import{l as E,f as l,o,g as _,a as e,t as F,u as A,r as i,d as q,b as H,j as B,h as P,e as W,c as R,w as G,F as K,p as z,q as Y,E as J,L as Q}from"./app-CTtqvBQy.js";import{P as X}from"./ProviderDashboardLayout-Bpkv7GAz.js";import{I as Z,a as ee,b as se,c as oe,d as te,e as le}from"./IconDocument-DbfsIkoI.js";import"./NotificationDropdown-BoJJU9Nh.js";import"./x-DpUPLwB8.js";const ae={class:"upload-section-container"},ne={key:0,class:"image-preview"},ie=["src"],re=["src"],de=["disabled"],ue={class:"placeholder-content"},ce={class:"placeholder-text"},ve={__name:"UploadSection",props:{title:{type:String,required:!0},image:{type:String,default:null},existingImageUrl:{type:String,default:null},buttonTitle:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["add","remove"],setup(d){return(U,r)=>(o(),l("div",ae,[d.image||d.existingImageUrl?(o(),l("div",ne,[d.image?(o(),l("img",{key:0,src:d.image,alt:"Uploaded document",class:"preview-image"},null,8,ie)):d.existingImageUrl?(o(),l("img",{key:1,src:d.existingImageUrl,alt:"Existing document",class:"preview-image"},null,8,re)):_("",!0),e("button",{onClick:r[0]||(r[0]=p=>U.$emit("remove")),class:"remove-button",disabled:d.disabled},[...r[2]||(r[2]=[e("i",{class:"fas fa-times"},null,-1)])],8,de)])):(o(),l("div",{key:1,class:"upload-placeholder",onClick:r[1]||(r[1]=p=>U.$emit("add"))},[e("div",ue,[r[3]||(r[3]=e("i",{class:"fas fa-plus-circle plus-icon"},null,-1)),e("p",ce,F(d.buttonTitle),1)])]))]))}},S=E(ve,[["__scopeId","data-v-b59ceb38"]]),pe={class:"upload-document-container"},me={class:"document-header"},fe={key:0,class:"document-intro"},ge={key:1,class:"document-upload"},be={class:"upload-content"},ye={class:"upload-section"},ke={class:"upload-item"},he={class:"upload-item"},we={class:"upload-section"},Ue={class:"upload-item"},Ce={class:"upload-section"},$e={class:"upload-item"},Ie=["disabled"],Be={key:0},_e={key:1,class:"loading-spinner"},xe={class:"upload-options-modal"},De={key:3,class:"alert-overlay"},Se={key:4,class:"alert-overlay"},Ee={class:"alert-box error"},Fe={class:"alert-message"},Re={__name:"UploadDocumentScreen",emits:["close"],setup(d,{emit:U}){const r=U;A();const p=i(null),$=i(!1),f=i(!1),C=i(!1),a=i(!1),b=i(""),n=i(null),g=i(null),y=i(null),k=i(null),I=i(null),h=i({showError:!1,errorMessage:"Uh Oh"}),T=q(()=>!n.value&&!g.value&&!y.value&&!k.value),L=()=>{$.value=!1},x=u=>{b.value=u,f.value=!0},M=()=>{f.value=!1,p.value.click()},O=()=>{f.value=!1,p.value.click()},j=u=>{const s=u.target.files[0];if(s){const m=new FileReader;m.onload=c=>{const v=c.target.result;switch(b.value){case"front":n.value=v;break;case"back":g.value=v;break;case"address":y.value=v;break;case"business":k.value=v;break}},m.readAsDataURL(s)}},N=async()=>{var u;if(!a.value)try{a.value=!0;const s=new FormData;s.append("user_id","provider-id-here"),n.value&&s.append("id_card_front",D(n.value,"id_front.jpg")),g.value&&s.append("id_card_back",D(g.value,"id_back.jpg")),y.value&&s.append("proof_of_address",D(y.value,"address_proof.jpg")),k.value&&s.append("business_registration_document",D(k.value,"business_doc.jpg"));const c=await(await fetch("/api/uploadDocuments",{method:"POST",body:s})).json();c.success?(n.value=null,g.value=null,y.value=null,k.value=null,I.value=c.data,C.value=!0):(h.value.showError=!0,h.value.errorMessage=((u=c.errors)==null?void 0:u[0])||"Error while uploading documents.")}catch(s){h.value.showError=!0,h.value.errorMessage=s.message}finally{a.value=!1}},V=()=>{C.value=!1,r("close")},D=(u,s)=>{const m=u.split(","),c=m[0].match(/:(.*?);/)[1],v=atob(m[1]);let w=v.length;const t=new Uint8Array(w);for(;w--;)t[w]=v.charCodeAt(w);return new File([t],s,{type:c})};return H(async()=>{}),(u,s)=>{var m,c,v,w;return o(),l("div",pe,[e("div",me,[e("button",{onClick:s[0]||(s[0]=t=>u.$emit("close")),class:"close-button"},[...s[13]||(s[13]=[e("i",{class:"fas fa-times"},null,-1)])])]),$.value?(o(),l("div",ge,[e("div",{class:"upload-header"},[e("button",{onClick:L,class:"back-button"},[...s[17]||(s[17]=[e("i",{class:"fas fa-arrow-left"},null,-1)])]),s[18]||(s[18]=e("h3",{class:"upload-title"},"Upload Documents",-1))]),e("div",be,[e("div",ye,[s[19]||(s[19]=e("h4",{class:"section-title"},"Upload photos of your ID card",-1)),e("div",ke,[B(S,{title:"Front of card",image:n.value,existingImageUrl:(m=I.value)==null?void 0:m.idCardFront,buttonTitle:"Front of card",onAdd:s[2]||(s[2]=t=>x("front")),onRemove:s[3]||(s[3]=t=>n.value=null),disabled:a.value},null,8,["image","existingImageUrl","disabled"])]),e("div",he,[B(S,{title:"Back of card",image:g.value,existingImageUrl:(c=I.value)==null?void 0:c.idCardBack,buttonTitle:"Back of card",onAdd:s[4]||(s[4]=t=>x("back")),onRemove:s[5]||(s[5]=t=>g.value=null),disabled:a.value},null,8,["image","existingImageUrl","disabled"])])]),e("div",we,[s[20]||(s[20]=e("h4",{class:"section-title"},"Upload proof of address",-1)),e("div",Ue,[B(S,{title:"Proof of address",image:y.value,existingImageUrl:(v=I.value)==null?void 0:v.proofOfAddress,buttonTitle:"Upload copy of address proof",onAdd:s[6]||(s[6]=t=>x("address")),onRemove:s[7]||(s[7]=t=>y.value=null),disabled:a.value},null,8,["image","existingImageUrl","disabled"])])]),e("div",Ce,[s[21]||(s[21]=e("h4",{class:"section-title"},"Upload Business registration document",-1)),e("div",$e,[B(S,{title:"Business document",image:k.value,existingImageUrl:(w=I.value)==null?void 0:w.businessRegistrationDocument,buttonTitle:"Upload copy of business registration document",onAdd:s[8]||(s[8]=t=>x("business")),onRemove:s[9]||(s[9]=t=>k.value=null),disabled:a.value},null,8,["image","existingImageUrl","disabled"])])]),e("button",{onClick:N,class:"continue-button",disabled:T.value||a.value},[a.value?(o(),l("span",_e)):(o(),l("span",Be,"Continue"))],8,Ie)])])):(o(),l("div",fe,[s[14]||(s[14]=e("div",{class:"icon-container"},[e("i",{class:"fas fa-shield-alt verification-icon"})],-1)),s[15]||(s[15]=e("h2",{class:"document-title"},"Upload your documents for verification",-1)),s[16]||(s[16]=e("p",{class:"document-description"}," Upload your personal & business documents to become a verified provider. This will show customers that you are a verified and trusted provider. ",-1)),e("button",{onClick:s[1]||(s[1]=t=>$.value=!0),class:"upload-button"}," Upload Now ")])),f.value?(o(),l("div",{key:2,class:"modal-overlay",onClick:s[11]||(s[11]=P(t=>f.value=!1,["self"]))},[e("div",xe,[s[24]||(s[24]=e("h3",{class:"modal-title"},"Upload Photo",-1)),e("div",{class:"modal-options"},[e("button",{onClick:M,class:"modal-option"},[...s[22]||(s[22]=[e("i",{class:"fas fa-camera"},null,-1),e("span",null,"Take Photo",-1)])]),e("button",{onClick:O,class:"modal-option"},[...s[23]||(s[23]=[e("i",{class:"fas fa-image"},null,-1),e("span",null,"Choose from Gallery",-1)])])]),e("button",{onClick:s[10]||(s[10]=t=>f.value=!1),class:"modal-cancel"},"Cancel")])])):_("",!0),C.value?(o(),l("div",De,[e("div",{class:"alert-box success"},[s[25]||(s[25]=e("h3",{class:"alert-title"},"Verification under review",-1)),s[26]||(s[26]=e("p",{class:"alert-message"},"We are currently reviewing your documents. We will get back to you very soon!",-1)),e("button",{onClick:V,class:"alert-button"},"OK")])])):_("",!0),h.value.showError?(o(),l("div",Se,[e("div",Ee,[s[27]||(s[27]=e("h3",{class:"alert-title"},"Oops!",-1)),e("p",Fe,F(h.value.errorMessage),1),e("button",{onClick:s[12]||(s[12]=t=>h.value.showError=!1),class:"alert-button"},"OK")])])):_("",!0),e("input",{ref_key:"fileInput",ref:p,type:"file",style:{display:"none"},accept:"image/*",onChange:j},null,544)])}}},Ae=E(Re,[["__scopeId","data-v-fccd868d"]]),Pe={class:"business-wrapper"},Te={class:"sidebar-menu"},Le=["onClick"],Me={class:"modal-content"},Oe={__name:"BusinessHub",setup(d){const U=A(),r=W().path,p=i(!1),$=[{title:"Business information",icon:Z,route:"/provider/business-info"},{title:"Business address",icon:ee,route:"/provider/setup/location"},{title:"Business hours",icon:se,route:"/provider/setup/business-hours"},{title:"Portfolio",icon:oe,route:"/provider/setup/portfolio"},{title:"Employees",icon:te,route:"/provider/setup/employees"},{title:"Documents",icon:le,route:"upload-id-card"}],f=a=>{a.route==="upload-id-card"?p.value=!0:U.push(a.route)},C=()=>p.value=!1;return(a,b)=>(o(),R(X,null,{default:G(()=>[e("div",Pe,[e("div",Te,[b[0]||(b[0]=e("h2",{class:"sidebar-title"},"Business Hub",-1)),(o(),l(K,null,z($,n=>e("div",{key:n.title,class:Y(["menu-item",{active:n.route===J(r)}]),onClick:g=>f(n)},[(o(),R(Q(n.icon),{class:"svg-icon"})),e("span",null,F(n.title),1)],10,Le)),64))]),b[1]||(b[1]=e("div",{class:"content-box"},[e("h1",{class:"content-title"},"Business information"),e("p",{class:"content-subtitle"}," This is the brand name your clients will see. Your billing and legal name can be added later. "),e("div",{class:"white-card"},[e("div",{class:"upload-section"},[e("img",{src:"/logo-placeholder.png",class:"upload-preview"}),e("button",{class:"upload-btn"},"Upload Business Logo")]),e("div",{class:"info-list"},[e("div",{class:"list-row"},[e("span",null,"What's your business name? *"),e("i",{class:"fas fa-chevron-right"})]),e("div",{class:"list-row"},[e("span",null,"Business address"),e("i",{class:"fas fa-chevron-right"})]),e("div",{class:"list-row"},[e("span",null,"Business hours"),e("i",{class:"fas fa-chevron-right"})]),e("div",{class:"list-row"},[e("span",null,"Portfolio"),e("i",{class:"fas fa-chevron-right"})]),e("div",{class:"list-row"},[e("span",null,"Employees"),e("i",{class:"fas fa-chevron-right"})]),e("div",{class:"list-row"},[e("span",null,"Documents"),e("i",{class:"fas fa-chevron-right"})])])])],-1))]),p.value?(o(),l("div",{key:0,class:"modal-overlay",onClick:P(C,["self"])},[e("div",Me,[B(Ae,{onClose:C})])])):_("",!0)]),_:1}))}},We=E(Oe,[["__scopeId","data-v-7bf9e9fe"]]);export{We as default};
