import{r as u,b,u as x,e as h,c as w,o as p,w as k,a as s,f as _,g as q,t as g,h as A,i as E,v as S,k as C}from"./app-CTtqvBQy.js";import{_ as T}from"./AuthLayout-W6lUstZ7.js";const B={class:"w-full max-w-md mx-auto"},M={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},D=["disabled"],$={__name:"SignupEmail",props:{userType:{type:String,required:!0}},setup(v){const l=h(),d=x(),c=v,o=u(""),n=u(!1),r=u(""),y=async()=>{var i,a;if(o.value){n.value=!0,r.value="";try{const e={email:o.value};console.log("Adding email with data:",e);const t=await C.post("/add-email",e);console.log("Add email response:",t.data),t.data&&t.data.success?d.push({path:`/signup/password/${c.userType}`,query:{contact:l.query.contact,countryCode:l.query.countryCode,mobile:l.query.mobile,email:o.value}}):r.value=(i=t.data)!=null&&i.errors&&t.data.errors.length>0?t.data.errors.join(", "):((a=t.data)==null?void 0:a.message)||"Failed to save email. Please try again."}catch(e){if(console.error("Add email error:",e),e.response){const t=e.response.status,m=e.response.data;if(t===422){const f=m.errors||[];r.value=f.join(", ")||"Invalid input data."}else r.value=m.message||"An error occurred while saving email."}else e.request?r.value="Network error. Please check your connection.":r.value="An unexpected error occurred."}finally{n.value=!1}}};return b(()=>{localStorage.getItem("authToken")||d.push(`/signup/mobile/${c.userType}`),l.query.email&&(o.value=l.query.email)}),(i,a)=>(p(),w(T,null,{default:k(()=>[s("div",B,[a[2]||(a[2]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Enter Your Email"),s("p",{class:"text-gray-600"}," We'll use this email to send you important updates about your account. ")],-1)),r.value?(p(),_("div",M,g(r.value),1)):q("",!0),s("form",{onSubmit:A(y,["prevent"]),class:"space-y-6"},[s("div",null,[a[1]||(a[1]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"Email Address",-1)),E(s("input",{id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),type:"email",placeholder:"Enter your email address",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors",required:""},null,512),[[S,o.value]])]),s("button",{type:"submit",disabled:n.value||!o.value,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 px-4 rounded-lg transition-colors"},g(n.value?"Saving...":"Continue"),9,D)],32)])]),_:1}))}};export{$ as default};
