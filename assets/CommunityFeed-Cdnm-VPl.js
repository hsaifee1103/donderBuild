import{r as m,d as ye,k as j,z as Me,b as Pe,f as n,o as a,a as e,g as v,E as s,i as Y,F as _e,p as ke,t as g,q as we,h as ne,v as be,S as Ce,n as je,A as Ee}from"./app-7omrHMIl.js";function ze(){const q=m(!1),E=m(!1),x=m([]),z=m(1),F=m(!1),I=m(null),L=m(!1),$=m(""),M=m(null),U=m(null),B=m(!1),c=m(null),D=m(!1),y=m(null),V=m(""),O=m(!1),P=m(null),_=m(null),R=m(!1),J=m(null),S=m(!1),k=m("post"),H=m(null),G=["Spam","Abusive Content","Harassment or Bullying","Hate Speech","False Information","Violence or Threats","Inappropriate or Sexual Content","Scam or Fraud","Impersonation","Other"],w=m(null),Q=ye(()=>{var u,i;const r=((u=w.value)==null?void 0:u.first_name)||"",l=((i=w.value)==null?void 0:i.last_name)||"";return`${r} ${l}`.trim()||"User"}),ae=ye(()=>{var r,l;return console.log((r=w.value)==null?void 0:r.image_url,"currentUser.value?.image_url"),(l=w.value)==null?void 0:l.image_url}),p=ye(()=>{var r;return((r=w.value)==null?void 0:r.id)||null}),X=async(r=!1)=>{var l;if(!q.value){r&&(z.value=1,x.value=[]),q.value=!0;try{const u=await j.get("/posts?per_page=15");if(u.data&&u.data.success){const i=u.data.data;x.value=i.data||[],Z(i)}else console.error("Error fetching posts:",(l=u.data)==null?void 0:l.errors)}catch(u){console.error("Error fetching posts:",u)}finally{q.value=!1}}},T=async()=>{var r;if(!(E.value||!F.value)){E.value=!0;try{const l=await j.get(`/posts?per_page=15&page=${z.value+1}`);if(l.data&&l.data.success){const u=l.data.data;x.value=[...x.value,...u.data||[]],Z(u)}else console.error("Error loading more posts:",(r=l.data)==null?void 0:r.errors)}catch(l){console.error("Error loading more posts:",l)}finally{E.value=!1}}},Z=r=>{F.value=r.last_page>r.current_page,z.value=r.current_page,I.value=r.next_page_url},ie=r=>{var l;!E.value&&F.value&&((l=x.value[x.value.length-1])==null?void 0:l.id)===r.id&&T()},de=async()=>{var r,l,u;if(!(!$.value.trim()||B.value)){B.value=!0;try{const i=new FormData;i.append("content",$.value),M.value&&i.append("image",U.value);const d=await j.post("/posts",i,{headers:{"Content-Type":"multipart/form-data"}});d.data&&d.data.success?(x.value.unshift(d.data.data),$.value="",M.value=null,U.value=null,L.value=!1,alert("Post created successfully!")):(console.error("Error creating post:",(r=d.data)==null?void 0:r.errors),alert("Error creating post: "+(((u=(l=d.data)==null?void 0:l.errors)==null?void 0:u[0])||"Unknown error")))}catch(i){console.error("Error creating post:",i),alert("Error creating post: "+i.message)}finally{B.value=!1}}},ue=async r=>{var l,u;if(p.value)try{const i=await j.post("/likes",{post_id:r.id});i.data&&i.data.success?((l=r.likes)==null?void 0:l.some(f=>f.userId===p.value||f.user_id===p.value))?r.likes=r.likes.filter(f=>f.userId!==p.value&&f.user_id!==p.value):(r.likes||(r.likes=[]),r.likes.push({id:Date.now(),user_id:p.value,userId:p.value,post_id:r.id,postId:r.id})):console.error("Error toggling like:",(u=i.data)==null?void 0:u.errors)}catch(i){console.error("Error toggling like:",i)}},ce=r=>{var l;return((l=r.likes)==null?void 0:l.some(u=>u.userId===p.value||u.user_id===p.value))||!1},me=async r=>{var l,u,i;if(confirm("Are you sure you want to delete this post?"))try{const d=await j.delete("/posts",{data:{id:r.id,_method:"DELETE"}});d.data&&d.data.success?(x.value=x.value.filter(f=>f.id!==r.id),P.value=null,alert("Post deleted successfully!")):(console.error("Error deleting post:",(l=d.data)==null?void 0:l.errors),alert("Error deleting post: "+(((i=(u=d.data)==null?void 0:u.errors)==null?void 0:i[0])||"Unknown error")))}catch(d){console.error("Error deleting post:",d),alert("Error deleting post: "+d.message)}},ve=r=>{k.value="post",H.value=r.id,S.value=!0,P.value=null},ge=r=>{y.value=r,D.value=!0,V.value=""},fe=async()=>{var r,l,u;if(!(!V.value.trim()||!y.value||O.value)){O.value=!0;try{const i=new FormData;i.append("post_id",y.value.id),i.append("content",V.value);const d=await j.post("/comments",i,{headers:{"Content-Type":"multipart/form-data"}});d.data&&d.data.success?(y.value.comments||(y.value.comments=[]),y.value.comments.unshift(d.data.data),V.value="",Me(()=>{const f=document.querySelector(".overflow-y-auto");f&&(f.scrollTop=f.scrollHeight)})):(console.error("Error adding comment:",(r=d.data)==null?void 0:r.errors),alert("Error adding comment: "+(((u=(l=d.data)==null?void 0:l.errors)==null?void 0:u[0])||"Unknown error")))}catch(i){console.error("Error adding comment:",i),alert("Error adding comment: "+i.message)}finally{O.value=!1}}},ee=async r=>{var l,u,i;if(confirm("Are you sure you want to delete this comment?"))try{const d=await j.delete("/comments",{data:{id:r.id,_method:"DELETE"}});d.data&&d.data.success?(y.value&&y.value.comments&&(y.value.comments=y.value.comments.filter(f=>f.id!==r.id)),_.value=null,alert("Comment deleted successfully!")):(console.error("Error deleting comment:",(l=d.data)==null?void 0:l.errors),alert("Error deleting comment: "+(((i=(u=d.data)==null?void 0:u.errors)==null?void 0:i[0])||"Unknown error")))}catch(d){console.error("Error deleting comment:",d),alert("Error deleting comment: "+d.message)}},te=r=>{k.value="comment",H.value=r.id,S.value=!0,_.value=null},se=async r=>{var l,u,i;try{const d=await j.post("/report",{id:H.value,type:k.value,reason:r});d.data&&d.data.success?(alert(`${k.value} reported successfully!`),S.value=!1):(console.error("Error reporting:",(l=d.data)==null?void 0:l.errors),alert("Error reporting: "+(((i=(u=d.data)==null?void 0:u.errors)==null?void 0:i[0])||"Unknown error")))}catch(d){console.error("Error reporting:",d),alert("Error reporting: "+d.message)}},oe=r=>r.user_id===p.value,re=r=>r.user_id===p.value,K=r=>{P.value=P.value==r?null:r},he=r=>{_.value=_.value===r?null:r},le=()=>{P.value=null},pe=()=>{_.value=null},h=()=>{c.value.click()},t=r=>{const l=r.target.files[0];if(l&&l.type.startsWith("image/")){const u=new FileReader;u.onload=i=>{M.value=i.target.result,U.value=l},u.readAsDataURL(l)}},b=()=>{M.value=null,U.value=null},N=r=>{J.value=r,R.value=!0},A=()=>{R.value=!1,J.value=null},o=r=>{if(!r)return"";const l=new Date(r);if(isNaN(l.getTime()))return"Invalid date";const i=new Date-l,d=Math.floor(i/6e4),f=Math.floor(i/36e5),xe=Math.floor(i/864e5);return d<1?"Just now":d<60?`${d} min ago`:f<24?`${f} hour${f>1?"s":""} ago`:xe<7?`${xe} day${xe>1?"s":""} ago`:l.toLocaleDateString()},C=()=>{try{const r=localStorage.getItem("userData");r&&(w.value=JSON.parse(r))}catch(r){console.error("Error loading user data:",r)}};return{isLoading:q,isLoadingMore:E,posts:x,currentPage:z,hasMorePages:F,nextPageUrl:I,showCreatePost:L,postContent:$,postImage:M,postImageFile:U,isCreatingPost:B,fileInput:c,showPostDetail:D,selectedPost:y,commentText:V,isAddingComment:O,activePostMenu:P,activeCommentMenu:_,showImageViewer:R,viewerImageUrl:J,showReportModal:S,reportType:k,reportTargetId:H,reportReasons:G,currentUser:w,currentUserName:Q,currentUserImage:ae,currentUserId:p,fetchCommunityPosts:X,loadMorePosts:T,loadMorePostsIfNeeded:ie,createPost:de,toggleLike:ue,isPostLiked:ce,deletePost:me,reportPost:ve,openPostDetail:ge,addComment:fe,deleteComment:ee,reportComment:te,submitReport:se,isPostOwner:oe,isCommentOwner:re,togglePostMenu:K,toggleCommentMenu:he,closePostMenu:le,closeCommentMenu:pe,triggerFileUpload:h,handleImageUpload:t,removePostImage:b,openImageViewer:N,closeImageViewer:A,formatDate:o,loadCurrentUser:C,initialize:()=>{C(),X()}}}const Ie={class:"max-w-7xl mx-auto"},Le={key:0,class:"flex justify-center mt-20"},$e={key:1},Ue={key:0,class:"mt-6 space-y-6"},Be={class:"flex items-start mb-4"},De={class:"flex-shrink-0 mr-4"},Ve=["src","alt"],Te={key:1,class:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center"},Ne={class:"flex-1"},Fe={class:"flex items-center justify-between"},Oe={class:"text-lg font-medium text-gray-900"},Re={class:"text-sm text-gray-500"},Se={class:"mb-4"},He={key:0,class:"text-gray-700 mb-4"},Ae={key:1,class:"mb-4"},We=["src","onClick"],qe={class:"flex items-center justify-between border-t border-gray-200 pt-4"},Je={class:"flex space-x-4"},Ke=["onClick"],Ye=["onClick"],Ge={class:"relative"},Qe=["onClick"],Xe=["onClick"],Ze=["onClick"],et={key:0,class:"flex justify-center py-4"},tt={key:1,class:"h-4"},st={key:1,class:"text-center py-12"},ot={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},rt={class:"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto"},lt={class:"p-6"},nt={class:"flex justify-between items-center mb-6"},at={class:"flex items-center mb-4"},it={class:"flex-shrink-0 mr-3"},dt=["src"],ut={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},ct={class:"text-md font-medium text-gray-900"},mt={class:"mb-4"},vt={key:0,class:"mb-4"},gt={class:"relative"},ft=["src"],ht={key:1,class:"mb-6"},pt={class:"flex justify-end space-x-3"},xt=["disabled"],yt={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_t={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"},kt={class:"p-4 border-b border-gray-200"},wt={class:"flex justify-between items-center"},bt={class:"flex-1 overflow-y-auto p-4"},Ct={key:0,class:"mb-6"},Mt={class:"flex items-start mb-4"},Pt={class:"flex-shrink-0 mr-4"},jt=["src","alt"],Et={key:1,class:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center"},zt={class:"flex-1"},It={class:"flex items-center justify-between"},Lt={class:"text-lg font-medium text-gray-900"},$t={class:"text-sm text-gray-500"},Ut={class:"mb-4"},Bt={key:0,class:"text-gray-700 mb-4"},Dt={key:1,class:"mb-4"},Vt=["src"],Tt={class:"flex items-center justify-between border-t border-gray-200 pt-4"},Nt={class:"flex space-x-4"},Ft={key:1},Ot={class:"text-md font-medium text-gray-900 mb-4"},Rt={key:0,class:"space-y-4 mb-6"},St={key:0,class:"flex-1 bg-gray-50 rounded-lg p-4"},Ht={class:"flex items-start mb-2"},At={class:"flex-shrink-0 mr-3"},Wt=["src","alt"],qt={key:1,class:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center"},Jt={class:"flex-1"},Kt={class:"flex items-center justify-between"},Yt={class:"text-sm font-medium text-gray-900"},Gt={class:"text-xs text-gray-500"},Qt={class:"relative"},Xt=["onClick"],Zt=["onClick"],es=["onClick"],ts={key:0,class:"text-gray-700 text-sm"},ss={key:1,class:"mt-2"},os=["src"],rs={key:1,class:"text-center py-4 text-gray-500"},ls={class:"p-4 border-t border-gray-200"},ns={class:"flex items-center space-x-3"},as={class:"flex-shrink-0"},is=["src"],ds={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},us={class:"flex-1"},cs=["disabled"],ms={key:4,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50"},vs={class:"relative max-w-4xl max-h-[90vh]"},gs=["src"],fs={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},hs={class:"bg-white rounded-lg w-full max-w-md"},ps={class:"p-6"},xs={class:"flex justify-between items-center mb-4"},ys={class:"text-lg font-bold text-gray-900"},_s={class:"text-gray-600 mb-4"},ks={class:"space-y-2"},ws=["onClick"],bs={class:"mt-6 flex justify-end"},Ms={__name:"CommunityFeed",setup(q){const{isLoading:E,isLoadingMore:x,posts:z,hasMorePages:F,showCreatePost:I,postContent:L,postImage:$,isCreatingPost:M,fileInput:U,showPostDetail:B,selectedPost:c,commentText:D,activePostMenu:y,activeCommentMenu:V,showImageViewer:O,viewerImageUrl:P,showReportModal:_,reportType:R,reportReasons:J,currentUserName:S,currentUserImage:k,loadMorePosts:H,createPost:G,toggleLike:w,isPostLiked:Q,deletePost:ae,reportPost:p,openPostDetail:X,addComment:T,deleteComment:Z,reportComment:ie,submitReport:de,isPostOwner:ue,isCommentOwner:ce,togglePostMenu:me,toggleCommentMenu:ve,closePostMenu:ge,closeCommentMenu:fe,triggerFileUpload:ee,handleImageUpload:te,removePostImage:se,openImageViewer:oe,closeImageViewer:re,formatDate:K,initialize:he}=ze();Pe(()=>{he()});const le={mounted(h,t){h.clickOutsideEvent=function(b){h===b.target||h.contains(b.target)||t.value(b)},document.body.addEventListener("click",h.clickOutsideEvent)},unmounted(h){document.body.removeEventListener("click",h.clickOutsideEvent)}},pe={mounted(h,t){const b={root:null,rootMargin:"0px",threshold:.1},N=new IntersectionObserver(A=>{A.forEach(o=>{o.isIntersecting&&t.value()})},b);N.observe(h),h._observer=N},unmounted(h){h._observer&&h._observer.disconnect()}};return(h,t)=>{var b,N,A;return a(),n("div",Ie,[t[44]||(t[44]=e("div",{class:"mt-5"},[e("h1",{class:"text-2xl px-6 font-bold text-gray-900"},"Community")],-1)),s(E)?(a(),n("div",Le,[...t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"},null,-1)])])):(a(),n("div",$e,[s(z).length>0?(a(),n("div",Ue,[(a(!0),n(_e,null,ke(s(z),o=>{var C,W,r;return a(),n("div",{key:o.id,class:"bg-white rounded-lg shadow-sm p-6"},[e("div",Be,[e("div",De,[(C=o.user_details)!=null&&C.profile_image?(a(),n("img",{key:0,src:o.user_details.profile_image,alt:o.user_details.first_name+" "+o.user_details.last_name,class:"h-12 w-12 rounded-full object-cover"},null,8,Ve)):(a(),n("div",Te,[...t[20]||(t[20]=[e("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",Ne,[e("div",Fe,[e("div",null,[e("h4",Oe,g(o.user_details.first_name+" "+o.user_details.last_name),1),e("p",Re,g(s(K)(o.created_at)),1)])])])]),e("div",Se,[o.content?(a(),n("p",He,g(o.content),1)):v("",!0),o.image_url?(a(),n("div",Ae,[e("img",{src:o.image_url,alt:"Post image",class:"w-full rounded-lg object-cover max-h-96 cursor-pointer",onClick:l=>s(oe)(o.image_url)},null,8,We)])):v("",!0)]),e("div",qe,[e("div",Je,[e("button",{onClick:l=>s(w)(o),class:we(["flex items-center space-x-1 text-gray-500 hover:text-red-500",{"text-red-500":s(Q)(o)}])},[t[21]||(t[21]=e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),e("span",null,g(((W=o.likes)==null?void 0:W.length)||0),1)],10,Ke),e("button",{onClick:l=>s(X)(o),class:"flex items-center space-x-1 text-gray-500 hover:text-blue-500"},[t[22]||(t[22]=e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z","clip-rule":"evenodd"})],-1)),e("span",null,g(((r=o.comments)==null?void 0:r.length)||0),1)],8,Ye)]),e("div",Ge,[e("button",{onClick:ne(l=>s(me)(o.id),["stop"]),class:"text-gray-500 hover:text-gray-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,Qe),s(y)==o.id?Y((a(),n("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",onClick:t[0]||(t[0]=ne(()=>{},["stop"]))},[s(ue)(o)?(a(),n("button",{key:0,onClick:l=>s(ae)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Delete ",8,Xe)):v("",!0),e("button",{onClick:l=>s(p)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Report ",8,Ze)])),[[le,s(ge)]]):v("",!0)])])])}),128)),s(x)?(a(),n("div",et,[...t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"},null,-1)])])):v("",!0),s(F)&&!s(x)?Y((a(),n("div",tt,null,512)),[[pe,s(H)]]):v("",!0)])):(a(),n("div",st,[...t[25]||(t[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),e("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No Posts Yet",-1),e("p",{class:"mt-1 text-gray-500"},"Community posts will appear here.",-1)])]))])),e("button",{onClick:t[1]||(t[1]=o=>I.value=!0),class:"fixed bottom-6 right-6 bg-red-500 text-white rounded-full p-4 shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 z-40"},[...t[26]||(t[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),s(I)?(a(),n("div",ot,[e("div",rt,[e("div",lt,[e("div",nt,[t[28]||(t[28]=e("h3",{class:"text-xl font-bold text-gray-900"},"Create Post",-1)),e("button",{onClick:t[2]||(t[2]=o=>I.value=!1),class:"text-gray-500 hover:text-gray-700"},[...t[27]||(t[27]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",at,[e("div",it,[s(k)?(a(),n("img",{key:0,src:s(k),alt:"User",class:"h-10 w-10 rounded-full object-cover"},null,8,dt)):(a(),n("div",ut,[...t[29]||(t[29]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",null,[e("h4",ct,g(s(S)),1),t[30]||(t[30]=e("p",{class:"text-sm text-gray-500"},"via post",-1))])]),e("div",mt,[Y(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>Ce(L)?L.value=o:null),rows:"4",class:"shadow-sm focus:ring-red-500 focus:border-red-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"What's on your mind?"},null,512),[[be,s(L)]])]),s($)?(a(),n("div",vt,[e("div",gt,[e("img",{src:s($),alt:"Post image",class:"w-full rounded-lg object-cover max-h-64"},null,8,ft),e("button",{onClick:t[4]||(t[4]=(...o)=>s(se)&&s(se)(...o)),class:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75"},[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):(a(),n("div",ht,[e("button",{onClick:t[5]||(t[5]=(...o)=>s(ee)&&s(ee)(...o)),class:"flex items-center justify-center w-full py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},[...t[32]||(t[32]=[e("svg",{class:"w-5 h-5 mr-2 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),je(" Add Photo ",-1)])]),e("input",{type:"file",ref_key:"fileInput",ref:U,onChange:t[6]||(t[6]=(...o)=>s(te)&&s(te)(...o)),class:"hidden",accept:"image/*"},null,544)])),e("div",pt,[e("button",{onClick:t[7]||(t[7]=o=>I.value=!1),class:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("button",{onClick:t[8]||(t[8]=(...o)=>s(G)&&s(G)(...o)),class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:s(M)||!s(L).trim()},g(s(M)?"Posting...":"Post"),9,xt)])])])])):v("",!0),s(B)?(a(),n("div",yt,[e("div",_t,[e("div",kt,[e("div",wt,[t[34]||(t[34]=e("h3",{class:"text-lg font-bold text-gray-900"},"Comments",-1)),e("button",{onClick:t[9]||(t[9]=o=>B.value=!1),class:"text-gray-500 hover:text-gray-700"},[...t[33]||(t[33]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",bt,[s(c)?(a(),n("div",Ct,[e("div",Mt,[e("div",Pt,[(b=s(c).user_details)!=null&&b.profile_image?(a(),n("img",{key:0,src:s(c).user_details.profile_image,alt:s(c).user_details.first_name+" "+s(c).user_details.first_name,class:"h-12 w-12 rounded-full object-cover"},null,8,jt)):(a(),n("div",Et,[...t[35]||(t[35]=[e("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",zt,[e("div",It,[e("div",null,[e("h4",Lt,g(s(c).user_details.first_name+" "+s(c).user_details.first_name),1),e("p",$t,g(s(K)(s(c).created_at)),1)])])])]),e("div",Ut,[s(c).content?(a(),n("p",Bt,g(s(c).content),1)):v("",!0),s(c).image_url?(a(),n("div",Dt,[e("img",{src:s(c).image_url,alt:"Post image",class:"w-full rounded-lg object-cover max-h-96 cursor-pointer",onClick:t[10]||(t[10]=o=>s(oe)(s(c).image_url))},null,8,Vt)])):v("",!0)]),e("div",Tt,[e("div",Nt,[e("button",{onClick:t[11]||(t[11]=o=>s(w)(s(c))),class:we(["flex items-center space-x-1 text-gray-500 hover:text-red-500",{"text-red-500":s(Q)(s(c))}])},[t[36]||(t[36]=e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),e("span",null,g(((N=s(c).likes)==null?void 0:N.length)||0),1)],2)])])])):v("",!0),s(c)?(a(),n("div",Ft,[e("h4",Ot,"Comments ("+g(((A=s(c).comments)==null?void 0:A.length)||0)+")",1),s(c).comments&&s(c).comments.length>0?(a(),n("div",Rt,[(a(!0),n(_e,null,ke(s(c).comments,o=>{var C;return a(),n("div",{key:o.id,class:"flex"},[t[39]||(t[39]=e("div",{class:"flex flex-col items-center mr-4"},[e("div",{class:"w-0.5 h-full bg-gray-200"})],-1)),o!=null&&o.user_details?(a(),n("div",St,[e("div",Ht,[e("div",At,[(C=o.user_details)!=null&&C.profile_image?(a(),n("img",{key:0,src:o.user_details.profile_image,alt:o.user_details.first_name+" "+o.user_details.last_name,class:"h-8 w-8 rounded-full object-cover"},null,8,Wt)):(a(),n("div",qt,[...t[37]||(t[37]=[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",Jt,[e("div",Kt,[e("div",null,[e("h5",Yt,g(o.user_details.first_name+" "+o.user_details.last_name),1),e("p",Gt,g(s(K)(o.created_at)),1)]),e("div",Qt,[e("button",{onClick:ne(W=>s(ve)(o.id),["stop"]),class:"text-gray-500 hover:text-gray-700"},[...t[38]||(t[38]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,Xt),s(V)==o.id?Y((a(),n("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",onClick:t[12]||(t[12]=ne(()=>{},["stop"]))},[s(ce)(o)?(a(),n("button",{key:0,onClick:W=>s(Z)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Delete ",8,Zt)):v("",!0),e("button",{onClick:W=>s(ie)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Report ",8,es)])),[[le,s(fe)]]):v("",!0)])])])]),o.content?(a(),n("p",ts,g(o.content),1)):v("",!0),o.image_url?(a(),n("div",ss,[e("img",{src:o.image_url,alt:"Comment image",class:"w-full rounded-lg object-cover max-h-48"},null,8,os)])):v("",!0)])):v("",!0)])}),128))])):(a(),n("div",rs," No comments yet. Be the first to comment! "))])):v("",!0)]),e("div",ls,[e("div",ns,[e("div",as,[s(k)?(a(),n("img",{key:0,src:s(k),alt:"User",class:"h-10 w-10 rounded-full object-cover"},null,8,is)):(a(),n("div",ds,[...t[40]||(t[40]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",us,[Y(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>Ce(D)?D.value=o:null),type:"text",class:"shadow-sm focus:ring-red-500 focus:border-red-500 block w-full sm:text-sm border border-gray-300 rounded-md py-2 px-3",placeholder:"Add a comment here",onKeyup:t[14]||(t[14]=Ee((...o)=>s(T)&&s(T)(...o),["enter"]))},null,544),[[be,s(D)]])]),e("button",{onClick:t[15]||(t[15]=(...o)=>s(T)&&s(T)(...o)),class:"flex-shrink-0 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:!s(D).trim()},[...t[41]||(t[41]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,cs)])])])])):v("",!0),s(O)?(a(),n("div",ms,[e("div",vs,[e("img",{src:s(P),alt:"Full size image",class:"max-w-full max-h-full object-contain"},null,8,gs),e("button",{onClick:t[16]||(t[16]=(...o)=>s(re)&&s(re)(...o)),class:"absolute top-4 right-4 bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-opacity-75"},[...t[42]||(t[42]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):v("",!0),s(_)?(a(),n("div",fs,[e("div",hs,[e("div",ps,[e("div",xs,[e("h3",ys,"Report "+g(s(R)),1),e("button",{onClick:t[17]||(t[17]=o=>_.value=!1),class:"text-gray-500 hover:text-gray-700"},[...t[43]||(t[43]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("p",_s,"Why are you reporting this "+g(s(R))+"?",1),e("div",ks,[(a(!0),n(_e,null,ke(s(J),o=>(a(),n("button",{key:o,onClick:C=>s(de)(o),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md"},g(o),9,ws))),128))]),e("div",bs,[e("button",{onClick:t[18]||(t[18]=o=>_.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900"}," Cancel ")])])])])):v("",!0)])}}};export{Ms as _};
