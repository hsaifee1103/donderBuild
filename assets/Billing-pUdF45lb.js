import{l as v,r as m,b as x,c as k,o as _,w as c,k as p,u as w,j as S,a as t,h as U,i as r,v as s,t as A,I as i}from"./app-C7zuiOEw.js";import{S as B}from"./SetupLayout-C6r45dy3.js";import{P as V}from"./ProviderDashboardLayout-BQ6qSee8.js";import"./BackIcon-sjpbuZQf.js";import"./IconDocument-DLGVqC3k.js";import"./NotificationDropdown-Ywe_Y4sx.js";import"./x-BRj-0eBZ.js";const q={class:"flex-1 flex flex-col overflow-hidden"},C={class:"flex-1 overflow-y-auto"},D={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8"},E={class:"mb-6"},F={class:"grid grid-cols-2 gap-6 mb-6"},I={class:"grid grid-cols-2 gap-6 mb-6"},T={class:"border-t border-gray-200 pt-8"},h={class:"grid grid-cols-2 gap-6 mb-6"},O={class:"mb-6"},P={class:"mb-6"},K={class:"grid grid-cols-2 gap-6 mb-6"},L={class:"grid grid-cols-2 gap-6 mb-6"},M={class:"flex gap-4 pt-6 border-t border-gray-200"},N=["disabled"],G={__name:"Billing",setup(j){const b=w(),d=m(!1),l=m({account_holder_name:"",account_number:"",bank_sort_code:"",bank_name:"",invoice_email:"",first_name:"",last_name:"",address_line1:"",address_line2:"",city:"",state:"",country:"",postcode:"",country_code:""});function g(){return["account_holder_name","account_number","bank_sort_code","bank_name","invoice_email","first_name","last_name","address_line1","city","state","country","postcode"].every(e=>{var o;return((o=l.value[e])==null?void 0:o.trim())!==""})}async function f(){var n,e;if(!g()){i({type:"error",title:"Validation Error",message:"Please fill in all required fields.",confirmButtonText:"OK"});return}d.value=!0;try{const o={"United Kingdom":"GB","United States":"US",Canada:"CA",Australia:"AU",Germany:"DE",France:"FR",Spain:"ES",Italy:"IT"},u={...l.value,country_code:o[l.value.country]||l.value.country.substring(0,2).toUpperCase()},a=await p.post("/add_edit_bankdetails",u);(n=a.data)!=null&&n.success?(i({type:"success",title:"Success",message:"Bank details saved successfully.",confirmButtonText:"Great!"}),b.push("/provider/setup/business-hours")):i({type:"error",title:"Error",message:((e=a.data)==null?void 0:e.message)||"Failed to save bank details.",confirmButtonText:"OK"})}catch(o){console.error("Error saving bank details:",o),i({type:"error",title:"Error",message:"An error occurred while saving bank details.",confirmButtonText:"OK"})}finally{d.value=!1}}async function y(){var n,e;try{const o=localStorage.getItem("userData");if(!o)return;const u=JSON.parse(o),a=await p.post("/provider/profile",{provider_id:u.id});(n=a.data)!=null&&n.success&&((e=a.data)!=null&&e.data)&&Object.assign(l.value,a.data.data.bank_details[0]||{})}catch(o){console.error("Error fetching bank details:",o)}}return x(()=>{y()}),(n,e)=>(_(),k(V,null,{default:c(()=>[S(B,null,{default:c(()=>[t("div",q,[e[28]||(e[28]=t("div",{class:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6"},[t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Add your bank details"),t("p",{class:"text-gray-600"},"We'll only charge you for new client commissions via the Donderstorm marketplace and any other paid features you decide to use.")],-1)),t("div",C,[t("div",D,[t("form",{onSubmit:U(f,["prevent"]),class:"space-y-8"},[t("div",null,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Bank details",-1)),t("div",E,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Account holder name *",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.account_holder_name=o),type:"text",placeholder:"Add account holder name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.account_holder_name]])]),t("div",F,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Account number *",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.account_number=o),type:"text",placeholder:"Add account number",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.account_number]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bank sort code *",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.bank_sort_code=o),type:"text",placeholder:"Add bank sort code",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.bank_sort_code]])])]),t("div",I,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bank name *",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.bank_name=o),type:"text",placeholder:"Add bank name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.bank_name]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Invoice email *",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.invoice_email=o),type:"email",placeholder:"Add invoice email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.invoice_email]])])])]),t("div",T,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Billing address",-1)),e[26]||(e[26]=t("p",{class:"text-sm text-gray-600 mb-6"},"Your billing details will be displayed on your monthly invoice from Donderstorm.",-1)),e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"What's your name? *",-1)),t("div",h,[t("div",null,[r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.first_name=o),type:"text",placeholder:"First name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.first_name]])]),t("div",null,[r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.last_name=o),type:"text",placeholder:"Last name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.last_name]])])]),t("div",O,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Address line 1 *",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.address_line1=o),type:"text",placeholder:"Street Address",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.address_line1]])]),t("div",P,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Address line 2",-1)),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.address_line2=o),type:"text",placeholder:"Address line 2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"},null,512),[[s,l.value.address_line2]])]),t("div",K,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"City *",-1)),r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.city=o),type:"text",placeholder:"City",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.city]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"State *",-1)),r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.state=o),type:"text",placeholder:"State",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.state]])])]),t("div",L,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Country *",-1)),r(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.country=o),type:"text",placeholder:"Country",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.country]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Postcode *",-1)),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.value.postcode=o),type:"text",placeholder:"Postcode",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[s,l.value.postcode]])])])]),t("div",M,[t("button",{type:"submit",disabled:d.value,class:"bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white font-medium py-3 px-8 rounded-lg transition-colors"},A(d.value?"Saving...":"Save & Continue"),9,N)])],32)])])])]),_:1})]),_:1}))}},X=v(G,[["__scopeId","data-v-a1dbcbd2"]]);export{X as default};
