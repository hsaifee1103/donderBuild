import{r as f,d as y,b as _,f as o,o as l,a as s,t as d,F as S,p as B,q as p,k as C}from"./app-DJPj3-n2.js";const M={class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},j={class:"bg-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col"},D={class:"p-6 border-b border-gray-200 flex justify-between items-center"},Y={key:0,class:"flex-1 flex justify-center items-center py-8"},T={key:1,class:"flex-1 flex flex-col justify-center items-center py-8 text-center"},V={class:"text-red-500 mb-4"},q={key:2,class:"flex-1 flex justify-center items-center py-8 text-gray-500"},A={key:3,class:"flex-1 p-6 overflow-y-auto"},F={class:"relative pl-6"},L={class:"mt-2 font-semibold text-gray-900"},N={class:"text-sm text-gray-600 leading-relaxed"},E={__name:"StatusTimeline",props:{bookingId:{type:[String,Number],required:!0},type:{type:String,required:!0}},emits:["close"],setup(b,{emit:$}){const v=b,n=f([]),c=f(!0),a=f(null),x={pending:{label:"Booking Confirmed",desc:"Your booking has been placed successfully."},confirmed:{label:"Drop-off Vehicle",desc:"You need to Drop-off vehicle today"},in_shop:{label:"Vehicle in Shop",desc:"Your vehicle arrived in garage safely."},servicing:{label:"Working on Vehicle",desc:"Your vehicle on under servicing & maintanace"},pickup_available:{label:"Pickup Available",desc:"Your vehicle are ready to pickup"},completed:{label:"Completed",desc:"Service completed successfully."}},m=async()=>{var t;try{c.value=!0,a.value=null;const e=await C.post("/BookingStatus",{booking_id:v.bookingId});e.data&&e.data.success?n.value=e.data.data||[]:a.value=((t=e.data)==null?void 0:t.message)||"Failed to fetch status history"}catch(e){console.error("Error fetching statuses:",e),a.value="An error occurred while fetching status history"}finally{c.value=!1}},h=y(()=>n.value.map(t=>{const e=x[t.status]||{label:t.status.charAt(0).toUpperCase()+t.status.slice(1),desc:t.message||"Status updated"};return{...t,...e,formattedTime:w(t.created_at)}}).sort((t,e)=>new Date(t.created_at)-new Date(e.created_at))),k=y(()=>[...h.value].reverse()),i=t=>t.id===Math.max(...n.value.map(e=>e.id)),w=t=>{const e=new Date(t),g=new Date-e,u=Math.floor(g/6e4);return u===0?"now":u<60?`${u} minutes ago`:e.toLocaleString("en-GB",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(","," â€¢ ")};return _(()=>{m()}),(t,e)=>(l(),o("div",M,[s("div",j,[s("div",D,[e[2]||(e[2]=s("h3",{class:"text-xl font-bold text-gray-900"},"Your Booking Status",-1)),s("button",{onClick:e[0]||(e[0]=r=>t.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[...e[1]||(e[1]=[s("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c.value?(l(),o("div",Y,[...e[3]||(e[3]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"},null,-1)])])):a.value?(l(),o("div",T,[s("p",V,d(a.value),1),s("button",{onClick:m,class:"text-sm underline text-red-500"},"Retry")])):n.value.length===0?(l(),o("div",q,[...e[4]||(e[4]=[s("p",null,"No status history available.",-1)])])):(l(),o("div",A,[s("div",F,[e[5]||(e[5]=s("div",{class:"absolute left-3 top-0 w-[2px] bg-gray-200 h-full"},null,-1)),(l(!0),o(S,null,B(k.value,(r,g)=>(l(),o("div",{key:r.id,class:"relative mb-6 last:mb-0"},[s("div",{style:{left:"-17px"},class:p(["absolute -left-[7px] top-1.5 w-3.5 h-3.5 rounded-full border-4  flex items-center justify-center",i(r)&&"border-gray-300 bg-black",!i(r)&&"border-gray-300 bg-gray-500"])},null,2),s("div",{class:p(["rounded-xl px-4 py-3",i(r)?"bg-yellow-50":""])},[s("span",{class:p(["text-xs font-medium px-2 py-0.5 rounded-md",i(r)?"bg-yellow-400 text-black":"bg-gray-200 text-gray-700"])},d(r.formattedTime),3),s("h4",L,d(r.label),1),s("p",N,d(r.desc),1)],2)]))),128))])]))])]))}};export{E as _};
