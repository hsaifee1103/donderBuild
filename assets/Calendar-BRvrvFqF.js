import{l as Q,r as g,J as se,d as ae,f as l,g as w,o,b as e,t as r,F as I,p as Z,q as ee,K as fe,i as O,v as K,k as U,I as F,z as be,c as W,a as G,n as oe,h as he,w as Ne,u as Te,G as Ae,H as pe,U as ye}from"./app-C0VbAaEP.js";import{P as Ee}from"./ProviderDashboardLayout-CMKWW1G9.js";import{l as xe}from"./index-BJbuQlN4.js";import{c as ze}from"./countries-DXaTS7mb.js";import{D as Ie}from"./DateRangePicker-x_UiMPE4.js";import"./NotificationDropdown-BpaKGOwL.js";import"./x-BGqzC3Ia.js";const Ze={key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-sm"},Fe={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-lg transition-all overflow-hidden"},Oe={class:"p-6 flex flex-col items-center"},We={class:"text-4xl font-bold text-gray-900 mb-4"},Ue={class:"grid grid-cols-3 gap-4 mb-6 text-xl font-medium text-gray-800 w-full"},Re=["onClick"],Ke={key:0},qe={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6 mx-auto"},Ge=["disabled"],Je={key:0,class:"fixed inset-0 z-60 flex items-end sm:items-center justify-center bg-black/50"},Qe={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-lg transition-all overflow-hidden payment-select-modal"},Ye={class:"flex justify-between items-center px-4 py-3 border-b border-gray-100"},Xe={class:"p-6 space-y-4"},et={class:"grid grid-cols-2 gap-4"},tt={width:"34",height:"28",viewBox:"0 0 34 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},st=["fill"],ot=["fill"],at=["fill"],lt=["fill"],nt={width:"33",height:"28",viewBox:"0 0 33 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rt=["fill"],it={key:1,class:"fixed inset-0 z-70 flex items-end sm:items-center justify-center bg-black/50"},dt={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-lg overflow-y-auto max-h-[95vh]"},ut={class:"flex justify-between items-center px-4 py-3 border-b border-gray-100"},ct={class:"p-6 space-y-4"},mt={class:"sticky bottom-0 pt-5 border-t border-gray-100 bg-white"},vt={class:"flex justify-between items-center mb-3 px-1"},gt={class:"font-semibold text-gray-900 text-base"},pt={__name:"QuickPaymentModal",props:{showQuickPayment:{type:Boolean,default:!1},initialAmount:{type:Number,default:12}},emits:["close"],setup($,{emit:A}){const M=xe("pk_test_51SnNCKAeoTwVR6BPo0LCcZlDptfnv7dlIWUWZisaHH2hIgiqodlfD8np3jKymUkDTHJuR0xHHeJn8mvxwEXbzqrP00jg3nHLOf"),x=JSON.parse(localStorage.getItem("userData")||"{}"),b=(x==null?void 0:x.id)||null,B=$,C=A,v=g(B.showQuickPayment);se(()=>B.showQuickPayment,j=>v.value=j);const p=g(B.initialAmount),c=g(String(p.value.toFixed(2)).replace(/\.00$/,""));se(p,j=>{(!c.value||parseFloat(c.value)!==j)&&(c.value=String(j))});const n=g(!1),i=g(!1),_=g(null),y=g(!1),h=g({name:"",zip:""}),k=["1","2","3","4","5","6","7","8","9",".","0","del"];let T=null,S=null,V=null;ae(async()=>{T=await M,S=T.elements()}),se(i,async j=>{if(j){await be(),(!T||!S)&&(T=await M),V||(V=S.create("card",{hidePostalCode:!0,style:{base:{fontSize:"16px",color:"#32325d"}}}));const u=document.getElementById("card-element");u&&!u.children.length&&V.mount("#card-element")}else if(V)try{V.unmount()}catch{}});function P(j){const u=c.value;if(j==="del")c.value=u.length>1?u.slice(0,-1):"0";else{if(j==="."&&u.includes("."))return;c.value=u==="0"&&j!=="."?j:u+j}p.value=parseFloat(c.value)||0}function q(j){_.value=j}async function E(){if(_.value==="card")n.value=!1,i.value=!0;else if(_.value==="cash")try{y.value=!0;const u=(await U.post("/capture_payment_intent_quick",{payment_mode:"cash",provider_id:b,amount:p.value})).data;u.success?(F({type:"success",title:"Payment Recorded",message:"ðŸ’µ Cash payment recorded successfully.",confirmButtonText:"OK"}),N()):F({type:"error",title:"Cash Payment Failed",message:u.message||"Unable to record cash payment.",confirmButtonText:"OK"})}catch(j){F({type:"error",title:"Error",message:j.message||"An unexpected error occurred while recording payment.",confirmButtonText:"OK"})}finally{y.value=!1}else F({type:"warning",title:"Select Payment Method",message:"Please choose a payment method before continuing.",confirmButtonText:"OK"})}async function d(){var j,u;try{if(y.value=!0,!V){F({type:"error",title:"Card Missing",message:"Card input is not initialized properly. Please refresh and try again.",confirmButtonText:"OK"});return}const{paymentMethod:m,error:L}=await T.createPaymentMethod({type:"card",card:V,billing_details:{name:h.value.name}});if(L){F({type:"error",title:"Card Error",message:L.message,confirmButtonText:"OK"}),y.value=!1;return}const R=(await U.post("/create_payment_intent",{amount:p.value,payment_method_id:m.id,provider_id:b})).data;if(!R.success)throw new Error(R.message||"Failed to create payment intent");const de=R.data.payment_intent_id,ne=(await U.post("/capture_payment_intent_quick",{payment_mode:"stripe",payment_intent_id:de,provider_id:b,tap_to_pay:!0})).data;ne.success?(F({type:"success",title:"Payment Captured",message:"ðŸ’³ Card payment captured successfully.",confirmButtonText:"OK"}),N()):F({type:"error",title:"Capture Failed",message:ne.message||"Stripe payment capture failed.",confirmButtonText:"OK"})}catch(m){console.error("Payment error:",m),F({type:"error",title:"Payment Error",message:((u=(j=m.response)==null?void 0:j.data)==null?void 0:u.error)||m.message||"Unexpected payment error.",confirmButtonText:"OK"})}finally{y.value=!1}}function N(){v.value=!1,C("close")}return(j,u)=>v.value?(o(),l("div",Ze,[e("div",Fe,[e("div",{class:"flex justify-between items-center px-4 py-3 border-b border-gray-100"},[u[6]||(u[6]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Quick Payment",-1)),e("button",{onClick:N,class:"text-gray-400 hover:text-gray-600"},"âœ•")]),e("div",Oe,[e("div",We,"Â£"+r(p.value.toFixed(2)),1),e("div",Ue,[(o(),l(I,null,Z(k,m=>e("button",{key:m,onClick:L=>P(m),class:"p-3 rounded-lg hover:bg-gray-100 active:bg-gray-200"},[m!=="del"?(o(),l("span",Ke,r(m),1)):(o(),l("svg",qe,[...u[7]||(u[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],8,Re)),64))]),e("button",{disabled:p.value<1,onClick:u[0]||(u[0]=m=>n.value=!0),class:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold transition"}," Continue ",8,Ge)])]),n.value?(o(),l("div",Je,[e("div",Qe,[e("div",Ye,[u[8]||(u[8]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Select payment method",-1)),e("button",{onClick:u[1]||(u[1]=m=>n.value=!1),class:"text-gray-400 hover:text-gray-600"},"âœ•")]),e("div",Xe,[e("div",et,[e("button",{onClick:u[2]||(u[2]=m=>q("cash")),class:ee(["flex gap-2  items-center justify-center border rounded-lg py-4 font-medium transition",_.value==="cash"?"bg-red-500 text-white border-rose-500":"border-gray-300 text-gray-800 hover:bg-gray-50"])},[(o(),l("svg",tt,[e("path",{d:"M18.09 4.67174C18.0687 4.67174 18.0475 4.66834 18.0273 4.66167L3.93101 0.0101818C3.82612 -0.0244309 3.71303 0.0325426 3.67841 0.137436L2.22749 4.53441C2.20045 4.61637 2.12387 4.67174 2.03756 4.67174H0.2C0.0895432 4.67174 0 4.76128 0 4.87174V23.0233C0 23.1337 0.0895431 23.2233 0.2 23.2233H15.044C15.0653 23.2233 15.0864 23.2267 15.1066 23.2334L29.2029 27.8848C29.3078 27.9195 29.4208 27.8625 29.4555 27.7576L30.9064 23.3606C30.9334 23.2786 31.01 23.2233 31.0963 23.2233H32.9339C33.0443 23.2233 33.1339 23.1337 33.1339 23.0233V4.87174C33.1339 4.76128 33.0443 4.67174 32.9339 4.67174H18.09ZM31.1924 8.24562C31.1924 8.38246 31.058 8.47859 30.9329 8.42305C30.2436 8.11693 29.6887 7.56201 29.3826 6.87271C29.327 6.74764 29.4231 6.61318 29.56 6.61318H30.9924C31.1029 6.61318 31.1924 6.70272 31.1924 6.81318V8.24562ZM27.3104 21.1212C27.2887 21.2141 27.207 21.2818 27.1115 21.2818H6.02233C5.92687 21.2818 5.84514 21.2141 5.82347 21.1212C5.39447 19.2805 3.94274 17.8288 2.10204 17.3998C2.00907 17.3781 1.94144 17.2963 1.94144 17.2009V10.6941C1.94144 10.5986 2.00907 10.5169 2.10204 10.4952C3.94275 10.0662 5.39448 8.61449 5.82347 6.77378C5.84514 6.68081 5.92687 6.61318 6.02233 6.61318H27.1115C27.207 6.61318 27.2887 6.68081 27.3104 6.77378C27.7394 8.61449 29.1911 10.0662 31.0318 10.4952C31.1248 10.5169 31.1924 10.5986 31.1924 10.6941V17.2009C31.1924 17.2964 31.1248 17.3781 31.0318 17.3998C29.1911 17.8288 27.7394 19.2805 27.3104 21.1212ZM10.6806 4.28181C10.8964 4.35302 10.8451 4.67174 10.6179 4.67174H4.50318C4.36692 4.67174 4.27055 4.53846 4.31325 4.40907L4.91369 2.58947C4.9483 2.48458 5.06139 2.4276 5.16628 2.46222L10.6806 4.28181ZM3.57388 6.61318C3.71072 6.61318 3.80685 6.74764 3.75131 6.87271C3.44519 7.562 2.89028 8.11688 2.20098 8.42303C2.07591 8.47858 1.94144 8.38245 1.94144 8.2456V6.81318C1.94144 6.70272 2.03098 6.61318 2.14144 6.61318H3.57388ZM1.94144 19.6493C1.94144 19.5125 2.0759 19.4164 2.20097 19.4719C2.89027 19.778 3.44519 20.3329 3.75131 21.0222C3.80685 21.1473 3.71072 21.2818 3.57388 21.2818H2.14144C2.03098 21.2818 1.94144 21.1922 1.94144 21.0818V19.6493ZM22.4533 23.6131C22.2375 23.5419 22.2887 23.2232 22.516 23.2232H28.6307C28.767 23.2232 28.8633 23.3565 28.8206 23.4859L28.2202 25.3055C28.1856 25.4104 28.0725 25.4674 27.9676 25.4327L22.4533 23.6131ZM29.56 21.2818C29.4231 21.2818 29.327 21.1473 29.3826 21.0222C29.6887 20.3329 30.2436 19.778 30.9329 19.4719C31.058 19.4164 31.1924 19.5125 31.1924 19.6493V21.0818C31.1924 21.1922 31.1029 21.2818 30.9924 21.2818H29.56Z",fill:_.value!=="cash"?"#EC5B70":"#fff"},null,8,st),e("path",{d:"M16.5669 8.9429C13.8074 8.9429 11.5624 11.188 11.5624 13.9475C11.5624 16.707 13.8074 18.9521 16.5669 18.9521C19.3264 18.9521 21.5715 16.707 21.5715 13.9475C21.5715 11.188 19.3265 8.9429 16.5669 8.9429ZM16.5669 17.0106C14.8779 17.0106 13.5038 15.6365 13.5038 13.9475C13.5038 12.2585 14.8779 10.8843 16.5669 10.8843C18.256 10.8843 19.6301 12.2584 19.6301 13.9475C19.6301 15.6365 18.256 17.0106 16.5669 17.0106Z",fill:_.value!=="cash"?"#EC5B70":"#fff"},null,8,ot),e("path",{d:"M5.15562 13.1768C5.15562 13.0663 5.24516 12.9768 5.35562 12.9768H8.40704C8.5175 12.9768 8.60704 13.0663 8.60704 13.1768V14.7182C8.60704 14.8287 8.5175 14.9182 8.40704 14.9182H5.35562C5.24516 14.9182 5.15562 14.8287 5.15562 14.7182V13.1768Z",fill:_.value!=="cash"?"#EC5B70":"#fff"},null,8,at),e("path",{d:"M24.6131 13.1768C24.6131 13.0663 24.7026 12.9768 24.8131 12.9768H27.8645C27.975 12.9768 28.0645 13.0663 28.0645 13.1768V14.7182C28.0645 14.8287 27.975 14.9182 27.8645 14.9182H24.8131C24.7026 14.9182 24.6131 14.8287 24.6131 14.7182V13.1768Z",fill:_.value!=="cash"?"#EC5B70":"#fff"},null,8,lt)])),u[9]||(u[9]=e("span",null,"Cash",-1))],2),e("button",{onClick:u[3]||(u[3]=m=>q("card")),class:ee(["flex flex gap-2 items-center justify-center border rounded-lg py-4 font-medium transition",_.value==="card"?"bg-red-500 text-white border-rose-500":"border-gray-300 text-gray-800 hover:bg-gray-50"])},[(o(),l("svg",nt,[e("path",{d:"M8.90918 0.0996094H28.7637C30.8138 0.099629 32.4814 1.76825 32.4814 3.81836V16.5459C32.4812 18.5958 30.8136 20.2637 28.7637 20.2637H27.3906V24.1816C27.3906 26.2317 25.7229 27.9003 23.6729 27.9004H3.81836C1.76824 27.9004 0.0996094 26.2318 0.0996094 24.1816V11.4541C0.0998499 9.40419 1.76839 7.73633 3.81836 7.73633H23.6729C25.7228 7.7364 27.3904 9.40423 27.3906 11.4541V17.918H28.7637C29.5205 17.9179 30.1365 17.3027 30.1367 16.5459V3.81836C30.1367 3.06136 29.5207 2.44533 28.7637 2.44531H8.90918C8.15217 2.44531 7.53613 3.06135 7.53613 3.81836C7.53604 4.46598 7.01092 4.99121 6.36328 4.99121C5.7158 4.99102 5.19053 4.46586 5.19043 3.81836C5.19043 1.76824 6.85906 0.0996094 8.90918 0.0996094ZM3.81836 10.082C3.0615 10.082 2.44555 10.6973 2.44531 11.4541V24.1816C2.44531 24.9387 3.06135 25.5547 3.81836 25.5547H23.6729C24.4298 25.5546 25.0459 24.9386 25.0459 24.1816V15.1729H6.36328C5.71575 15.1727 5.19043 14.6476 5.19043 14C5.19043 13.3524 5.71575 12.8273 6.36328 12.8271H25.0459V11.4541C25.0457 10.6973 24.4297 10.0821 23.6729 10.082H3.81836ZM16.0361 20.4639H21.127C21.7747 20.4639 22.2998 20.989 22.2998 21.6367C22.2996 22.2843 21.7745 22.8096 21.127 22.8096H16.0361C15.3887 22.8094 14.8635 22.2842 14.8633 21.6367C14.8633 20.9891 15.3885 20.464 16.0361 20.4639Z",fill:_.value!=="card"?"#EC5B70":"#fff",stroke:"white","stroke-width":"0.2"},null,8,rt)])),u[10]||(u[10]=e("span",null,"Manual card entry",-1))],2)]),e("button",{onClick:E,class:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold transition"}," Continue ")])])])):w("",!0),i.value?(o(),l("div",it,[e("div",dt,[e("div",ut,[u[11]||(u[11]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Manual card entry",-1)),e("button",{onClick:u[4]||(u[4]=m=>i.value=!1),class:"text-gray-400 hover:text-gray-600"},"âœ•")]),e("div",ct,[e("div",null,[u[12]||(u[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Card holder full name",-1)),O(e("input",{"onUpdate:modelValue":u[5]||(u[5]=m=>h.value.name=m),type:"text",class:"w-full border border-gray-300 rounded-lg p-2.5 focus:ring-rose-500 focus:border-rose-500"},null,512),[[K,h.value.name]])]),u[14]||(u[14]=fe('<div data-v-136f404d><label class="block text-sm font-medium text-gray-700 mb-1" data-v-136f404d>Card details</label><div id="card-element" class="border border-gray-300 rounded-lg p-2.5" data-v-136f404d></div><div id="card-errors" class="text-red-500 text-sm mt-2" data-v-136f404d></div></div><div class="pt-6 border-t border-gray-200" data-v-136f404d><h4 class="text-base font-semibold text-gray-800 mb-2" data-v-136f404d>How it works</h4><div class="text-sm text-gray-600 space-y-2" data-v-136f404d><div data-v-136f404d><span class="font-medium text-gray-800" data-v-136f404d>Step 1:</span> Ask your client for authorisation to process this payment on their card. </div><div data-v-136f404d><span class="font-medium text-gray-800" data-v-136f404d>Step 2:</span> Add your clientâ€™s card details for payment. </div><div data-v-136f404d><span class="font-medium text-gray-800" data-v-136f404d>Step 3:</span> Tap <span class="font-semibold text-rose-500" data-v-136f404d>Pay Now</span> to complete the transaction securely. </div></div></div>',2)),e("div",mt,[e("div",vt,[u[13]||(u[13]=e("span",{class:"text-gray-700 text-sm font-medium"},"To pay",-1)),e("span",gt,"Â£"+r(p.value.toFixed(2)),1)]),e("button",{onClick:d,class:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold transition"}," Pay Now ")])])])])):w("",!0)])):w("",!0)}},yt=Q(pt,[["__scopeId","data-v-136f404d"]]),ft={class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-90 flex items-end sm:items-center justify-center"},bt={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-xl max-h-[95vh] overflow-y-auto"},ht={class:"flex justify-between items-center px-5 py-4 border-b border-gray-100"},xt=["disabled"],wt={class:"p-5 space-y-5"},_t={class:"grid grid-cols-2 gap-3"},kt=["disabled"],Ct=["disabled"],$t={class:"flex border border-gray-300 rounded-lg overflow-hidden"},Dt=["disabled"],Mt=["src"],St={class:"text-sm font-medium text-gray-700"},Vt=["disabled"],Bt={key:0,class:"absolute bg-white border border-gray-200 shadow-md rounded-lg mt-1 max-h-48 overflow-y-auto z-50 w-full"},Ht=["disabled"],jt=["onClick","disabled"],Lt=["src"],Pt=["disabled"],Nt={class:"sticky bottom-0 bg-white border-t border-gray-100 p-4"},Tt=["disabled"],At={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Et={key:1},zt={key:2},It={__name:"AddNewClient",emits:["close","saved"],setup($,{emit:A}){const M=A,x=g(""),b=g(""),B=g(""),C=g(""),v=g(!1),p=g(""),c=g(!1),n=g({name:"United Kingdom",code:"GB",dial_code:"+44"}),i=W(()=>ze.filter(S=>S.name.toLowerCase().includes(p.value.toLowerCase()))),_=()=>{v.value||(c.value=!c.value)},y=S=>{v.value||(n.value=S,c.value=!1)},h=S=>`https://flagcdn.com/w20/${S.toLowerCase()}.png`,k=()=>{v.value||M("close")},T=()=>{v.value||(v.value=!0,setTimeout(()=>{M("saved",{first_name:x.value,last_name:b.value,mobile:B.value.toString(),email:C.value,country_code:n.value.dial_code}),M("close"),v.value=!1},1e3))};return(S,V)=>(o(),l("div",ft,[e("div",bt,[e("div",ht,[V[5]||(V[5]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Add New Client",-1)),e("button",{onClick:k,class:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:v.value}," âœ• ",8,xt)]),e("div",wt,[e("div",_t,[O(e("input",{"onUpdate:modelValue":V[0]||(V[0]=P=>x.value=P),type:"text",placeholder:"First name",disabled:v.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},null,8,kt),[[K,x.value]]),O(e("input",{"onUpdate:modelValue":V[1]||(V[1]=P=>b.value=P),type:"text",placeholder:"Last name",disabled:v.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Ct),[[K,b.value]])]),e("div",null,[V[7]||(V[7]=e("label",{class:"text-sm font-medium text-gray-700 mb-1 block"},"Phone Number ",-1)),e("div",$t,[e("div",{class:"flex items-center gap-2 px-3 py-2 bg-gray-50 cursor-pointer hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",onClick:_,disabled:v.value},[e("img",{src:h(n.value.code),class:"w-6 h-4 rounded-sm"},null,8,Mt),e("span",St,r(n.value.dial_code),1),V[6]||(V[6]=e("svg",{class:"w-4 h-4 text-gray-500 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],8,Dt),O(e("input",{"onUpdate:modelValue":V[2]||(V[2]=P=>B.value=P),type:"number",placeholder:"9876543210",disabled:v.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Vt),[[K,B.value]])]),c.value?(o(),l("div",Bt,[O(e("input",{"onUpdate:modelValue":V[3]||(V[3]=P=>p.value=P),type:"search",placeholder:"Search country",disabled:v.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Ht),[[K,p.value]]),(o(!0),l(I,null,Z(i.value,P=>(o(),l("div",{key:P.code,onClick:q=>y(P),class:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:v.value},[e("img",{src:h(P.code),class:"w-6 h-4 rounded-sm"},null,8,Lt),e("span",null,r(P.name)+" ("+r(P.dial_code)+")",1)],8,jt))),128))])):w("",!0)]),e("div",null,[V[8]||(V[8]=e("label",{class:"text-sm font-medium text-gray-700 mb-1 block"},"Email",-1)),O(e("input",{"onUpdate:modelValue":V[4]||(V[4]=P=>C.value=P),type:"email",placeholder:"Email",disabled:v.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Pt),[[K,C.value]])])]),e("div",Nt,[e("button",{disabled:!x.value||!B.value||v.value,onClick:T,class:ee(["w-full py-3 rounded-lg text-white font-medium transition flex items-center justify-center gap-2",x.value&&B.value&&!v.value?"bg-red-500 hover:bg-red-600":"bg-gray-300 cursor-not-allowed"])},[v.value?(o(),l("svg",At,[...V[9]||(V[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),v.value?(o(),l("span",zt,"Saving...")):(o(),l("span",Et,"Save Client"))],10,Tt)])])]))}},Zt=Q(It,[["__scopeId","data-v-738100e5"]]),Ft={class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-70 flex items-end sm:items-center justify-center"},Ot={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-xl max-h-[95vh] overflow-y-auto"},Wt={class:"flex justify-between items-center px-5 py-4 border-b border-gray-100"},Ut=["disabled"],Rt=["disabled"],Kt={class:"px-4 pb-6"},qt=["onClick","disabled"],Gt={class:"h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-700 font-bold capitalize"},Jt={class:"ml-3 flex-1"},Qt={class:"text-gray-900 font-medium"},Yt={class:"text-sm text-gray-500"},Xt={key:0,class:"text-gray-500 text-center py-6"},es={key:1,class:"flex justify-center items-center py-6"},ts={__name:"ClientPopup",emits:["close","selected"],setup($,{emit:A}){const M=A,x=g([]),b=g(!1),B=g(!1),v=JSON.parse(localStorage.getItem("userData")||"{}").id,p=()=>{B.value||M("close")},c=_=>{B.value||M("selected",_)},n=async()=>{var _;B.value=!0;try{const y=await U.post("/getWalkinCustomers",{provider_id:v});(_=y.data)!=null&&_.success&&(x.value=y.data.data)}catch(y){console.error("Error loading customers",y)}finally{B.value=!1}},i=_=>{x.value.unshift(_),b.value=!1,M("selected",_)};return ae(n),(_,y)=>(o(),l("div",Ft,[e("div",Ot,[e("div",Wt,[y[2]||(y[2]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Select client",-1)),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:B.value}," âœ• ",8,Ut)]),e("div",{class:"m-4 p-4 border border-gray-200 rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:y[0]||(y[0]=h=>b.value=!0),disabled:B.value},[...y[3]||(y[3]=[e("span",{class:"font-medium text-gray-700"},"Add new client",-1),e("div",{class:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)])],8,Rt),e("div",Kt,[y[5]||(y[5]=e("h3",{class:"text-sm text-gray-600 mb-2"},"Existing clients",-1)),(o(!0),l(I,null,Z(x.value,h=>(o(),l("div",{key:h.id,class:"flex items-center p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",onClick:k=>c(h),disabled:B.value},[e("div",Gt,r(h.first_name.charAt(0)),1),e("div",Jt,[e("p",Qt,r(h.first_name)+" "+r(h.last_name),1),e("p",Yt,r(h.country_code)+" "+r(h.mobile),1)])],8,qt))),128)),x.value.length===0&&!B.value?(o(),l("div",Xt," No customers found ")):w("",!0),B.value?(o(),l("div",es,[...y[4]||(y[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"},null,-1)])])):w("",!0)])]),b.value?(o(),G(Zt,{key:0,onClose:y[1]||(y[1]=h=>b.value=!1),onSaved:i})):w("",!0)]))}},ss=Q(ts,[["__scopeId","data-v-250ce24c"]]),os={class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-80 flex items-end sm:items-center justify-center"},as={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-xl max-h-[95vh] overflow-y-auto"},ls={class:"flex items-center px-5 py-4 border-b border-gray-100"},ns=["disabled"],rs={class:"flex overflow-x-auto border-b border-gray-100 px-4 py-3 space-x-3"},is=["onClick","disabled"],ds={class:"p-5 space-y-5"},us={class:"flex justify-between items-start"},cs={class:"flex-1 pr-3"},ms={class:"font-semibold text-gray-900"},vs={class:"text-sm text-gray-500"},gs={class:"font-semibold mt-1"},ps=["onClick","disabled"],ys=["onClick","disabled"],fs={key:0,class:"text-center text-gray-500 py-3"},bs={key:1,class:"flex justify-center items-center py-3"},hs={class:"p-4 border-t bg-white sticky bottom-0"},xs=["disabled"],ws={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_s={key:1},ks={key:2},Cs={__name:"ServiceSelector",props:{services:Array,selected:Array},emits:["close","added"],setup($,{emit:A}){const M=$,x=A,b=g(!1),B=()=>{b.value||x("close")},C=g([]),v=g(null),p=g([]);ae(()=>{var h;p.value=JSON.parse(JSON.stringify(M.selected||[]));const y=new Map;M.services.forEach(k=>{y.set(k.cat_id,{id:k.cat_id,name:k.cat_name||"Category"})}),C.value=[...y.values()],v.value=(h=C.value[0])==null?void 0:h.id}),se(()=>M.selected,y=>{p.value=JSON.parse(JSON.stringify(y||[]))});const c=W(()=>M.services.filter(y=>y.cat_id===v.value)),n=y=>p.value.some(h=>h.subcat_id===y.subcat_id),i=y=>{if(b.value)return;p.value.find(k=>k.subcat_id===y.subcat_id)?p.value=p.value.filter(k=>k.subcat_id!==y.subcat_id):p.value.push(y)},_=()=>{b.value||p.length===0||(b.value=!0,setTimeout(()=>{x("added",p.value),x("close"),b.value=!1},800))};return(y,h)=>(o(),l("div",os,[e("div",as,[e("div",ls,[e("button",{onClick:B,class:"mr-3 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.value},[...h[0]||(h[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,ns),h[1]||(h[1]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Select services",-1))]),e("div",rs,[(o(!0),l(I,null,Z(C.value,k=>(o(),l("button",{key:k.id,onClick:T=>v.value=k.id,disabled:b.value,class:ee(["px-4 py-2 rounded-full text-sm whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",v.value===k.id?"bg-black text-white":"bg-gray-100 text-gray-700"])},r(k.name),11,is))),128))]),e("div",ds,[(o(!0),l(I,null,Z(c.value,k=>(o(),l("div",{key:k.subcat_id,class:"border-b border-gray-100 pb-4"},[e("div",us,[e("div",cs,[e("p",ms,r(k.name),1),e("p",vs,r(k.service_duration),1),e("p",gs,"Â£"+r(k.price),1)]),n(k)?(o(),l("button",{key:0,onClick:T=>i(k),class:"disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.value},[...h[2]||(h[2]=[e("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("rect",{width:"24",height:"24",rx:"4",fill:"#EC5B70"}),e("path",{d:"M6 12l4 4 8-8",stroke:"white","stroke-width":"2"})],-1)])],8,ps)):(o(),l("button",{key:1,onClick:T=>i(k),class:"disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.value},[...h[3]||(h[3]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("rect",{width:"24",height:"24",rx:"4",fill:"#FFD9DE"}),e("path",{d:"M6 12H18",stroke:"#EC5B70","stroke-width":"2"}),e("path",{d:"M12 6L12 18",stroke:"#EC5B70","stroke-width":"2"})],-1)])],8,ys))])]))),128)),c.value.length===0&&!b.value?(o(),l("div",fs," No services found ")):w("",!0),b.value?(o(),l("div",bs,[...h[4]||(h[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"},null,-1)])])):w("",!0)]),e("div",hs,[e("button",{class:"w-full py-3 bg-black text-white rounded-lg font-medium disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:_,disabled:b.value||p.value.length===0},[b.value?(o(),l("svg",ws,[...h[5]||(h[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),b.value?(o(),l("span",ks,"Processing...")):(o(),l("span",_s,"Done ("+r(p.value.length)+")",1))],8,xs)])])]))}},$s=Q(Cs,[["__scopeId","data-v-5ed8e77b"]]),Ds={key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-60 flex items-end sm:items-center justify-center"},Ms={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-xl overflow-hidden max-h-[95vh]"},Ss={class:"flex justify-between items-center px-5 py-4 border-b border-gray-100"},Vs={class:"text-xl font-semibold text-gray-900"},Bs={class:"text-sm text-gray-500"},Hs=["disabled"],js={class:"p-5 border-b border-gray-100"},Ls={class:"bg-gray-50 rounded-xl p-4 flex items-center justify-between"},Ps={class:"flex-1"},Ns={key:0,class:"font-semibold text-gray-900"},Ts={key:1,class:"text-sm text-gray-600"},As={key:2,class:"text-sm text-gray-500"},Es={key:0,class:"h-12 w-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center font-bold uppercase flex-shrink-0"},zs={key:1,class:"h-12 w-12 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center flex-shrink-0"},Is=["disabled"],Zs={class:"p-5 border-b border-gray-100"},Fs={class:"flex justify-between items-center mb-3"},Os=["disabled"],Ws={key:0,class:"space-y-3"},Us={class:"flex-1 pr-3"},Rs={class:"font-medium text-gray-900"},Ks={class:"text-xs text-gray-500 flex items-center mt-1"},qs={class:"font-semibold text-gray-900"},Gs={key:1,class:"text-center text-gray-500 py-6 bg-gray-50 rounded-lg"},Js={class:"p-5 bg-white sticky bottom-0 border-t border-gray-100"},Qs={key:0,class:"mb-4 p-2 bg-blue-50 rounded-lg text-xs text-blue-600 flex items-center gap-2"},Ys={class:"space-y-2 mb-4"},Xs={class:"flex justify-between items-center text-sm"},eo={class:"font-medium text-gray-900"},to={key:0,class:"flex justify-between items-center text-sm"},so={class:"text-gray-500"},oo={class:"font-medium text-gray-900"},ao={class:"flex justify-between items-center pt-2 border-t border-gray-100"},lo={key:0,class:"text-xs text-gray-500"},no={class:"text-2xl font-bold text-red-600"},ro=["disabled"],io={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},uo={key:1},co={key:2},mo={__name:"WalkInAppointmentModal",props:{show:Boolean,time:String,date:String},emits:["close","saved"],setup($,{emit:A}){const M=$,x=A,B=JSON.parse(localStorage.getItem("userData")||"{}").id,C=g(null),v=g([]),p=g([]),c=g(!1),n=g(!1),i=g(!1),_=g({has_vat:!1,vat_percentage:0}),y=W(()=>new Date(M.date).toLocaleDateString("en-GB",{weekday:"short",day:"2-digit",month:"short"})),h=W(()=>M.time),k=W(()=>v.value.reduce((u,m)=>u+Number(m.price),0).toFixed(2)),T=W(()=>_.value.has_vat?(Number(k.value)*_.value.vat_percentage/100).toFixed(2):"0.00"),S=W(()=>{const u=Number(k.value),m=Number(T.value);return(u+m).toFixed(2)}),V=async()=>{var u;try{const m=await U.post("/get-servcieswithid",{provider_id:B});if((u=m.data)!=null&&u.success){const L=[];m.data.data.forEach(le=>{le.sub_categories.forEach(R=>{L.push({cat_id:R.cat_id,cat_name:le.name,subcat_id:R.sub_cat_id,name:R.service_name,price:R.price,service_duration:R.service_duration})})}),p.value=L}}catch(m){console.error("Error loading services:",m)}},P=async()=>{var u;try{const m=await U.get("/provider/vat-settings");(u=m.data)!=null&&u.success&&(_.value=m.data.data)}catch(m){console.error("Error loading VAT settings:",m)}};V(),P();const q=()=>{i.value||(n.value=!0)},E=u=>{i.value||(C.value=u,n.value=!1)},d=u=>{i.value||(v.value=u)},N=async()=>{var m;if(i.value||!C.value||v.value.length===0)return;i.value=!0;const u={provider_id:B,first_name:C.value.first_name,last_name:C.value.last_name,email:C.value.email,country_code:C.value.country_code,mobile:C.value.mobile,date:M.date,time:M.time,total_amount:Number(k.value),services:v.value.map(L=>({cat_id:L.cat_id,subcat_id:L.subcat_id,price:L.price}))};try{const L=await U.post("/saveWalkinBooking",u);(m=L.data)!=null&&m.success&&(x("saved",L.data.data),x("close"))}catch(L){console.error("Error creating booking:",L)}finally{i.value=!1}},j=()=>{i.value||x("close")};return(u,m)=>$.show?(o(),l("div",Ds,[e("div",Ms,[e("div",Ss,[e("div",null,[e("h2",Vs,r(y.value),1),e("div",Bs,r(h.value),1)]),e("button",{onClick:j,class:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-xl",disabled:i.value}," âœ• ",8,Hs)]),e("div",js,[e("div",Ls,[e("div",Ps,[C.value?(o(),l("p",Ns,r(C.value.first_name)+" "+r(C.value.last_name),1)):w("",!0),C.value?(o(),l("p",Ts,r(C.value.country_code)+" "+r(C.value.mobile),1)):w("",!0),C.value?w("",!0):(o(),l("p",As,"No client selected"))]),C.value?(o(),l("div",Es,r(C.value.first_name.charAt(0)),1)):(o(),l("div",zs,[...m[3]||(m[3]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("button",{onClick:q,class:"mt-3 text-red-500 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:i.value},r(C.value?"Change client":"Add client"),9,Is),n.value?(o(),G(ss,{key:0,onClose:m[0]||(m[0]=L=>n.value=!1),onSelected:E})):w("",!0)]),e("div",Zs,[e("div",Fs,[m[5]||(m[5]=e("h3",{class:"font-semibold text-gray-900"},"Services",-1)),e("button",{class:"text-red-500 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",onClick:m[1]||(m[1]=L=>c.value=!0),disabled:i.value},[...m[4]||(m[4]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" Add more ",-1)])],8,Os)]),v.value.length>0?(o(),l("div",Ws,[(o(!0),l(I,null,Z(v.value,L=>(o(),l("div",{key:L.subcat_id,class:"py-3 border-b border-gray-100 flex justify-between last:border-0"},[e("div",Us,[e("p",Rs,r(L.name),1),e("p",Ks,[m[6]||(m[6]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),oe(" "+r(L.service_duration),1)])]),e("p",qs,"Â£"+r(L.price),1)]))),128))])):(o(),l("div",Gs,[...m[7]||(m[7]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("p",{class:"mt-2 text-sm font-medium text-gray-900"},"No services selected",-1),e("p",{class:"text-xs text-gray-500 mt-1"},"Add services to create booking",-1)])])),c.value?(o(),G($s,{key:2,services:p.value,onClose:m[2]||(m[2]=L=>c.value=!1),onAdded:d},null,8,["services"])):w("",!0)]),e("div",Js,[_.value.has_vat?(o(),l("div",Qs,[m[8]||(m[8]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),oe(" Prices are shown tax-exclusive. VAT ("+r(_.value.vat_percentage)+"%) will be added to the total. ",1)])):w("",!0),e("div",Ys,[e("div",Xs,[m[9]||(m[9]=e("span",{class:"text-gray-500"},"Subtotal",-1)),e("span",eo,"Â£"+r(k.value),1)]),_.value.has_vat?(o(),l("div",to,[e("span",so,"VAT ("+r(_.value.vat_percentage)+"%)",1),e("span",oo,"Â£"+r(T.value),1)])):w("",!0),e("div",ao,[e("div",null,[m[10]||(m[10]=e("p",{class:"text-sm font-semibold text-gray-900"},"Total",-1)),v.value.length>0?(o(),l("p",lo,r(v.value.length)+" "+r(v.value.length===1?"service":"services"),1)):w("",!0)]),e("p",no,"Â£"+r(S.value),1)])]),e("button",{onClick:N,disabled:!C.value||v.value.length===0||i.value,class:"w-full py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2"},[i.value?(o(),l("svg",io,[...m[11]||(m[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),i.value?(o(),l("span",co,"Creating...")):(o(),l("span",uo,"Create Booking"))],8,ro)])])])):w("",!0)}},vo=Q(mo,[["__scopeId","data-v-260affcb"]]),go={class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center"},po={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-xl overflow-hidden max-h-[95vh]"},yo={class:"flex justify-between items-center px-5 py-4 border-b border-gray-100"},fo={class:"text-xl font-semibold text-gray-900"},bo={class:"text-sm text-gray-500"},ho=["disabled"],xo={class:"p-5 border-b border-gray-100"},wo={class:"bg-gray-50 rounded-xl p-4 flex items-center justify-between"},_o={class:"flex-1"},ko={class:"font-semibold text-gray-900"},Co={class:"text-sm text-gray-600"},$o={class:"h-12 w-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center font-bold uppercase flex-shrink-0"},Do={class:"p-5 border-b border-gray-100"},Mo={class:"space-y-3"},So={class:"flex-1 pr-3"},Vo={class:"font-medium text-gray-900"},Bo={class:"text-xs text-gray-500 flex items-center mt-1"},Ho={class:"font-semibold text-gray-900"},jo={class:"p-5 bg-white sticky bottom-0 border-t border-gray-100"},Lo={class:"space-y-2 mb-4"},Po={class:"flex justify-between items-center text-sm"},No={class:"font-medium text-gray-900"},To={key:0,class:"flex justify-between items-center text-sm"},Ao={class:"text-gray-500"},Eo={class:"font-medium text-gray-900"},zo={class:"flex justify-between items-center pt-2 border-t border-gray-100"},Io={class:"text-xs text-gray-500"},Zo={class:"text-2xl font-bold text-red-600"},Fo=["disabled"],Oo={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Wo={key:1},Uo={key:2},Ro={key:1,class:"text-sm text-gray-600 font-semibold text-center"},Ko={__name:"WalkinViewModal",props:{show:Boolean,booking:Object},emits:["close","checkout"],setup($,{emit:A}){const M=$,x=A,b=g(!1),B=W(()=>{var c;return(c=M.booking)!=null&&c.services?M.booking.services.reduce((n,i)=>n+Number(i.price),0).toFixed(2):"0.00"}),C=W(()=>new Date(M.booking.date).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})),v=()=>{b.value||x("close")},p=async()=>{if(!b.value){b.value=!0;try{await new Promise(c=>setTimeout(c,1e3)),x("checkout")}catch(c){console.error("Checkout error:",c)}finally{b.value=!1}}};return(c,n)=>(o(),l("div",go,[e("div",po,[e("div",yo,[e("div",null,[e("h2",fo,r(C.value),1),e("div",bo,r($.booking.time),1)]),e("button",{onClick:v,class:"text-gray-400 hover:text-gray-600 text-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.value}," âœ• ",8,ho)]),e("div",xo,[e("div",wo,[e("div",_o,[e("p",ko,r($.booking.first_name)+" "+r($.booking.last_name),1),e("p",Co,r($.booking.country_code)+" "+r($.booking.mobile),1)]),e("div",$o,r($.booking.first_name.charAt(0)),1)])]),e("div",Do,[n[1]||(n[1]=e("h3",{class:"font-semibold text-gray-900 mb-3"},"Services",-1)),e("div",Mo,[(o(!0),l(I,null,Z($.booking.services,i=>(o(),l("div",{key:i.subcat_id,class:"py-3 border-b border-gray-100 flex justify-between last:border-0"},[e("div",So,[e("p",Vo,r(i.subcategory_name||i.category_name),1),e("p",Bo,[n[0]||(n[0]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),oe(" "+r(i.service_duration),1)])]),e("p",Ho,"Â£"+r(i.price),1)]))),128))])]),e("div",jo,[e("div",Lo,[e("div",Po,[n[2]||(n[2]=e("span",{class:"text-gray-500"},"Subtotal",-1)),e("span",No,"Â£"+r(B.value),1)]),$.booking.has_vat?(o(),l("div",To,[e("span",Ao,"VAT ("+r($.booking.vat_percentage)+"%)",1),e("span",Eo,"Â£"+r($.booking.vat_amount),1)])):w("",!0),e("div",zo,[e("div",null,[n[3]||(n[3]=e("p",{class:"text-sm font-semibold text-gray-900"},"Total",-1)),e("p",Io,r($.booking.services.length)+" "+r($.booking.services.length===1?"service":"services"),1)]),e("p",Zo,"Â£"+r($.booking.total_amount),1)])]),$.booking.payment_status==="pending"?(o(),l("button",{key:0,onClick:p,disabled:b.value,class:"w-full py-3 bg-red-500 hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2"},[b.value?(o(),l("svg",Oo,[...n[4]||(n[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),b.value?(o(),l("span",Uo,"Processing...")):(o(),l("span",Wo,"Checkout"))],8,Fo)):(o(),l("span",Ro,"Payment Receive"))])])]))}},qo=Q(Ko,[["__scopeId","data-v-87ef617d"]]),Go={key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-60 flex items-end sm:items-center justify-center"},Jo={class:"bg-white w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-lg overflow-hidden max-h-[95vh]"},Qo={class:"flex justify-between items-center px-4 py-3 border-b border-gray-100"},Yo=["disabled"],Xo={class:"p-5 border-b border-gray-100"},ea={class:"font-medium"},ta={class:"text-xs text-gray-500"},sa={class:"font-semibold"},oa={class:"space-y-2 mt-4 pt-4 border-t border-gray-100"},aa={class:"flex justify-between items-center text-sm"},la={class:"font-medium text-gray-900"},na={key:0,class:"flex justify-between items-center text-sm"},ra={class:"text-gray-500"},ia={class:"font-medium text-gray-900"},da={class:"flex justify-between items-center pt-2 font-bold text-lg"},ua={class:"text-red-600"},ca={class:"p-5"},ma={class:"grid grid-cols-2 gap-4"},va=["disabled"],ga={width:"34",height:"28",viewBox:"0 0 34 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pa=["fill"],ya=["fill"],fa=["fill"],ba=["fill"],ha=["disabled"],xa={width:"33",height:"28",viewBox:"0 0 33 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wa=["fill"],_a=["disabled"],ka={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ca={key:1},$a={key:2},Da={class:"p-5 border-t bg-gray-50"},Ma={class:"flex justify-between items-end"},Sa={class:"text-2xl font-bold text-gray-900"},Va={key:0,class:"text-right text-xs text-gray-500"},Ba={key:0,class:"fixed inset-0 z-70 flex items-end sm:items-center justify-center bg-black/50"},Ha={class:"bg-white w-full sm:max-w-md max-h-[95vh] rounded-t-2xl sm:rounded-2xl shadow-xl overflow-y-auto"},ja={class:"flex justify-between items-center px-4 py-3 border-b"},La=["disabled"],Pa={class:"p-5 space-y-5"},Na=["disabled"],Ta={class:"sticky bottom-0 pt-5 border-t border-gray-100 bg-white"},Aa={class:"flex justify-between items-center mb-3 px-1"},Ea={class:"font-semibold text-gray-900 text-base"},za=["disabled"],Ia={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Za={key:1},Fa={key:2},Oa={__name:"WalkinPaymentModal",props:{booking:Object},emits:["close","success"],setup($,{emit:A}){const M=xe("pk_test_51SnNCKAeoTwVR6BPo0LCcZlDptfnv7dlIWUWZisaHH2hIgiqodlfD8np3jKymUkDTHJuR0xHHeJn8mvxwEXbzqrP00jg3nHLOf"),x=$,b=A,B=W(()=>{var E;return(E=x.booking)!=null&&E.services?x.booking.services.reduce((d,N)=>d+Number(N.price),0).toFixed(2):"0.00"}),C=g(!0),v=g(null),p=g(!1),c=g(!1),n=g(!1);let i=null,_=null,y=null;const h=g({name:""});ae(async()=>{i=await M,_=i.elements()}),se(p,async E=>{if(!E)return;await be(),y||(y=_.create("card",{hidePostalCode:!0,style:{base:{fontSize:"16px",color:"#333"}}}));const d=document.getElementById("card-element");d&&!d.children.length&&y.mount("#card-element")});const k=JSON.parse(localStorage.getItem("userData")||"{}").id,T=E=>{c.value||(v.value=E)},S=()=>{if(!(c.value||!v.value)){if(v.value==="cash")return V();v.value==="card"&&(p.value=!0)}},V=async()=>{if(!c.value){c.value=!0;try{await U.post("/walkinpaymentstatus",{provider_id:k,booking_id:x.booking.id,status:"completed",message:"payment done",payment_type:"cash"}),F({type:"success",message:"Cash payment completed!"}),b("success")}catch(E){console.error("Cash payment error:",E),F({type:"error",message:"Failed to process cash payment. Please try again."})}finally{c.value=!1}}},P=async()=>{var E,d;if(!(n.value||!h.value.name.trim())){n.value=!0;try{const{paymentMethod:N,error:j}=await i.createPaymentMethod({type:"card",card:y,billing_details:{name:h.value.name}});if(j)throw j;const m=(d=(E=(await U.post("/create_payment_intent",{amount:x.booking.total_amount,payment_method_id:N.id,provider_id:k})).data)==null?void 0:E.data)==null?void 0:d.payment_intent_id;await U.post("/capture_payment_intent",{payment_intent_id:m,booking_id:x.booking.id,provider_id:k,booking_type:"walkin",tap_to_pay:!1,amount:x.booking.total_amount}),F({type:"success",message:"Card payment successful!"}),b("success")}catch(N){console.error("Card payment error:",N),F({type:"error",message:N.message||"Failed to process card payment. Please try again."})}finally{n.value=!1}}},q=()=>{!c.value&&!n.value&&b("close")};return(E,d)=>C.value?(o(),l("div",Go,[e("div",Jo,[e("div",Qo,[d[4]||(d[4]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Walk-in booking payment",-1)),e("button",{onClick:q,class:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:c.value}," âœ• ",8,Yo)]),e("div",Xo,[d[7]||(d[7]=e("h3",{class:"font-medium mb-3"},"Order Summary",-1)),(o(!0),l(I,null,Z($.booking.services,N=>(o(),l("div",{key:N.subcat_id,class:"py-3 border-b flex justify-between"},[e("div",null,[e("p",ea,r(N.subcategory_name),1),e("p",ta," â± "+r(N.service_duration),1)]),e("p",sa,"Â£"+r(N.price),1)]))),128)),e("div",oa,[e("div",aa,[d[5]||(d[5]=e("span",{class:"text-gray-500"},"Subtotal",-1)),e("span",la,"Â£"+r(B.value),1)]),$.booking.has_vat?(o(),l("div",na,[e("span",ra,"VAT ("+r($.booking.vat_percentage)+"%)",1),e("span",ia,"Â£"+r($.booking.vat_amount),1)])):w("",!0),e("div",da,[d[6]||(d[6]=e("span",null,"Total to pay",-1)),e("span",ua,"Â£"+r($.booking.total_amount),1)])])]),e("div",ca,[d[11]||(d[11]=e("h3",{class:"font-medium mb-3"},"Payment option",-1)),e("div",ma,[e("button",{onClick:d[0]||(d[0]=N=>T("cash")),disabled:c.value,class:ee(["py-4 border rounded-xl flex flex-col items-center disabled:opacity-50 disabled:cursor-not-allowed",v.value==="cash"?"bg-red-500 text-white border-red-500":"border-gray-300 text-gray-800 hover:bg-gray-50"])},[(o(),l("svg",ga,[e("path",{d:"M18.09 4.67174C18.0687 4.67174 18.0475 4.66834 18.0273 4.66167L3.93101 0.0101818C3.82612 -0.0244309 3.71303 0.0325426 3.67841 0.137436L2.22749 4.53441C2.20045 4.61637 2.12387 4.67174 2.03756 4.67174H0.2C0.0895432 4.67174 0 4.76128 0 4.87174V23.0233C0 23.1337 0.0895431 23.2233 0.2 23.2233H15.044C15.0653 23.2233 15.0864 23.2267 15.1066 23.2334L29.2029 27.8848C29.3078 27.9195 29.4208 27.8625 29.4555 27.7576L30.9064 23.3606C30.9334 23.2786 31.01 23.2233 31.0963 23.2233H32.9339C33.0443 23.2233 33.1339 23.1337 33.1339 23.0233V4.87174C33.1339 4.76128 33.0443 4.67174 32.9339 4.67174H18.09ZM31.1924 8.24562C31.1924 8.38246 31.058 8.47859 30.9329 8.42305C30.2436 8.11693 29.6887 7.56201 29.3826 6.87271C29.327 6.74764 29.4231 6.61318 29.56 6.61318H30.9924C31.1029 6.61318 31.1924 6.70272 31.1924 6.81318V8.24562ZM27.3104 21.1212C27.2887 21.2141 27.207 21.2818 27.1115 21.2818H6.02233C5.92687 21.2818 5.84514 21.2141 5.82347 21.1212C5.39447 19.2805 3.94274 17.8288 2.10204 17.3998C2.00907 17.3781 1.94144 17.2963 1.94144 17.2009V10.6941C1.94144 10.5986 2.00907 10.5169 2.10204 10.4952C3.94275 10.0662 5.39448 8.61449 5.82347 6.77378C5.84514 6.68081 5.92687 6.61318 6.02233 6.61318H27.1115C27.207 6.61318 27.2887 6.68081 27.3104 6.77378C27.7394 8.61449 29.1911 10.0662 31.0318 10.4952C31.1248 10.5169 31.1924 10.5986 31.1924 10.6941V17.2009C31.1924 17.2964 31.1248 17.3781 31.0318 17.3998C29.1911 17.8288 27.7394 19.2805 27.3104 21.1212ZM10.6806 4.28181C10.8964 4.35302 10.8451 4.67174 10.6179 4.67174H4.50318C4.36692 4.67174 4.27055 4.53846 4.31325 4.40907L4.91369 2.58947C4.9483 2.48458 5.06139 2.4276 5.16628 2.46222L10.6806 4.28181ZM3.57388 6.61318C3.71072 6.61318 3.80685 6.74764 3.75131 6.87271C3.44519 7.562 2.89028 8.11688 2.20098 8.42303C2.07591 8.47858 1.94144 8.38245 1.94144 8.2456V6.81318C1.94144 6.70272 2.03098 6.61318 2.14144 6.61318H3.57388ZM1.94144 19.6493C1.94144 19.5125 2.0759 19.4164 2.20097 19.4719C2.89027 19.778 3.44519 20.3329 3.75131 21.0222C3.80685 21.1473 3.71072 21.2818 3.57388 21.2818H2.14144C2.03098 21.2818 1.94144 21.1922 1.94144 21.0818V19.6493ZM22.4533 23.6131C22.2375 23.5419 22.2887 23.2232 22.516 23.2232H28.6307C28.767 23.2232 28.8633 23.3565 28.8206 23.4859L28.2202 25.3055C28.1856 25.4104 28.0725 25.4674 27.9676 25.4327L22.4533 23.6131ZM29.56 21.2818C29.4231 21.2818 29.327 21.1473 29.3826 21.0222C29.6887 20.3329 30.2436 19.778 30.9329 19.4719C31.058 19.4164 31.1924 19.5125 31.1924 19.6493V21.0818C31.1924 21.1922 31.1029 21.2818 30.9924 21.2818H29.56Z",fill:v.value!=="cash"?"#EC5B70":"#fff"},null,8,pa),e("path",{d:"M16.5669 8.9429C13.8074 8.9429 11.5624 11.188 11.5624 13.9475C11.5624 16.707 13.8074 18.9521 16.5669 18.9521C19.3264 18.9521 21.5715 16.707 21.5715 13.9475C21.5715 11.188 19.3265 8.9429 16.5669 8.9429ZM16.5669 17.0106C14.8779 17.0106 13.5038 15.6365 13.5038 13.9475C13.5038 12.2585 14.8779 10.8843 16.5669 10.8843C18.256 10.8843 19.6301 12.2584 19.6301 13.9475C19.6301 15.6365 18.256 17.0106 16.5669 17.0106Z",fill:v.value!=="cash"?"#EC5B70":"#fff"},null,8,ya),e("path",{d:"M5.15562 13.1768C5.15562 13.0663 5.24516 12.9768 5.35562 12.9768H8.40704C8.5175 12.9768 8.60704 13.0663 8.60704 13.1768V14.7182C8.60704 14.8287 8.5175 14.9182 8.40704 14.9182H5.35562C5.24516 14.9182 5.15562 14.8287 5.15562 14.7182V13.1768Z",fill:v.value!=="cash"?"#EC5B70":"#fff"},null,8,fa),e("path",{d:"M24.6131 13.1768C24.6131 13.0663 24.7026 12.9768 24.8131 12.9768H27.8645C27.975 12.9768 28.0645 13.0663 28.0645 13.1768V14.7182C28.0645 14.8287 27.975 14.9182 27.8645 14.9182H24.8131C24.7026 14.9182 24.6131 14.8287 24.6131 14.7182V13.1768Z",fill:v.value!=="cash"?"#EC5B70":"#fff"},null,8,ba)])),d[8]||(d[8]=e("span",null,"Cash",-1))],10,va),e("button",{onClick:d[1]||(d[1]=N=>T("card")),disabled:c.value,class:ee(["py-4 border rounded-xl flex flex-col items-center disabled:opacity-50 disabled:cursor-not-allowed",v.value==="card"?"bg-red-500 text-white border-red-500":"border-gray-300 text-gray-800 hover:bg-gray-50"])},[(o(),l("svg",xa,[e("path",{d:"M8.90918 0.0996094H28.7637C30.8138 0.099629 32.4814 1.76825 32.4814 3.81836V16.5459C32.4812 18.5958 30.8136 20.2637 28.7637 20.2637H27.3906V24.1816C27.3906 26.2317 25.7229 27.9003 23.6729 27.9004H3.81836C1.76824 27.9004 0.0996094 26.2318 0.0996094 24.1816V11.4541C0.0998499 9.40419 1.76839 7.73633 3.81836 7.73633H23.6729C25.7228 7.7364 27.3904 9.40423 27.3906 11.4541V17.918H28.7637C29.5205 17.9179 30.1365 17.3027 30.1367 16.5459V3.81836C30.1367 3.06136 29.5207 2.44533 28.7637 2.44531H8.90918C8.15217 2.44531 7.53613 3.06135 7.53613 3.81836C7.53604 4.46598 7.01092 4.99121 6.36328 4.99121C5.7158 4.99102 5.19053 4.46586 5.19043 3.81836C5.19043 1.76824 6.85906 0.0996094 8.90918 0.0996094ZM3.81836 10.082C3.0615 10.082 2.44555 10.6973 2.44531 11.4541V24.1816C2.44531 24.9387 3.06135 25.5547 3.81836 25.5547H23.6729C24.4298 25.5546 25.0459 24.9386 25.0459 24.1816V15.1729H6.36328C5.71575 15.1727 5.19043 14.6476 5.19043 14C5.19043 13.3524 5.71575 12.8273 6.36328 12.8271H25.0459V11.4541C25.0457 10.6973 24.4297 10.0821 23.6729 10.082H3.81836ZM16.0361 20.4639H21.127C21.7747 20.4639 22.2998 20.989 22.2998 21.6367C22.2996 22.2843 21.7745 22.8096 21.127 22.8096H16.0361C15.3887 22.8094 14.8635 22.2842 14.8633 21.6367C14.8633 20.9891 15.3885 20.464 16.0361 20.4639Z",fill:v.value!=="card"?"#EC5B70":"#fff",stroke:"white","stroke-width":"0.2"},null,8,wa)])),d[9]||(d[9]=e("span",null,"Manual card entry",-1))],10,ha)]),e("button",{onClick:S,disabled:c.value||!v.value,class:"mt-6 w-full bg-red-500 hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2"},[c.value?(o(),l("svg",ka,[...d[10]||(d[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),c.value?(o(),l("span",$a,"Processing...")):(o(),l("span",Ca,"Continue"))],8,_a)]),e("div",Da,[e("div",Ma,[e("div",null,[d[12]||(d[12]=e("p",{class:"text-xs text-gray-500 uppercase font-semibold mb-1"},"Total to Receive",-1)),e("p",Sa,"Â£"+r($.booking.total_amount),1)]),$.booking.has_vat?(o(),l("div",Va," Includes Â£"+r($.booking.vat_amount)+" VAT ",1)):w("",!0)])])]),p.value?(o(),l("div",Ba,[e("div",Ha,[e("div",ja,[d[13]||(d[13]=e("h3",{class:"text-lg font-semibold"},"Manual card entry",-1)),e("button",{onClick:d[2]||(d[2]=N=>p.value=!1),class:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value}," âœ• ",8,La)]),e("div",Pa,[e("div",null,[d[14]||(d[14]=e("label",{class:"block text-sm font-medium mb-1"},"Card holder full name",-1)),O(e("input",{"onUpdate:modelValue":d[3]||(d[3]=N=>h.value.name=N),type:"text",disabled:n.value,class:"w-full border border-gray-300 rounded-lg p-3 focus:ring-red-500 focus:border-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Na),[[K,h.value.name]])]),d[17]||(d[17]=fe('<div data-v-d1b54e05><label class="block text-sm font-medium mb-1" data-v-d1b54e05>Card details</label><div id="card-element" class="border border-gray-300 rounded-lg p-3 disabled:opacity-50" data-v-d1b54e05></div><p id="card-errors" class="text-red-600 text-sm mt-1" data-v-d1b54e05></p></div><div class="pt-6 border-t border-gray-200" data-v-d1b54e05><h4 class="text-base font-semibold mb-2" data-v-d1b54e05>How it works</h4><div class="text-sm text-gray-600 space-y-2" data-v-d1b54e05><div data-v-d1b54e05><span class="font-medium text-gray-800" data-v-d1b54e05>Step 1:</span> Ask your client for authorisation to process this payment on their card. </div><div data-v-d1b54e05><span class="font-medium text-gray-800" data-v-d1b54e05>Step 2:</span> Add your client&#39;s card details for payment. </div><div data-v-d1b54e05><span class="font-medium text-gray-800" data-v-d1b54e05>Step 3:</span> Tap <span class="font-semibold text-red-500" data-v-d1b54e05>Pay Now</span> to complete the transaction securely. </div></div></div>',2)),e("div",Ta,[e("div",Aa,[d[15]||(d[15]=e("span",{class:"text-gray-700 text-sm font-medium"},"To pay",-1)),e("span",Ea,"Â£"+r($.booking.total_amount),1)]),e("button",{onClick:P,disabled:n.value||!h.value.name.trim(),class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2"},[n.value?(o(),l("svg",Ia,[...d[16]||(d[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),n.value?(o(),l("span",Fa,"Processing...")):(o(),l("span",Za,"Pay Now"))],8,za)])])])])):w("",!0)])):w("",!0)}},Wa=Q(Oa,[["__scopeId","data-v-d1b54e05"]]),Ua={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"},Ra={class:"bg-white w-full max-w-md h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden m-4"},Ka={class:"flex justify-between items-center px-6 py-4 border-b border-gray-100"},qa={class:"p-4 border-b border-gray-100 bg-gray-50/50"},Ga={class:"relative"},Ja={key:0,class:"flex-1 flex justify-center items-center"},Qa={key:1,class:"flex-1 flex flex-col justify-center items-center text-center p-8"},Ya={class:"text-gray-900 font-semibold mb-1"},Xa={class:"text-sm text-gray-500"},el={key:2,class:"flex-1 overflow-y-auto p-4 space-y-3"},tl=["onClick"],sl={class:"flex items-center gap-4"},ol={class:"w-12 h-12 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center text-gray-600 font-bold border border-white shadow-sm shrink-0 uppercase"},al={class:"flex-1 min-w-0"},ll={class:"font-semibold text-gray-900 truncate group-hover:text-red-500 transition-colors"},nl={class:"flex flex-col gap-0.5 mt-0.5"},rl={key:0,class:"text-xs text-gray-500 flex items-center gap-1.5"},il={class:"flex items-center gap-2"},dl=["href"],ul={__name:"ClientListModal",emits:["close"],setup($){const A=g(!0),M=g([]),x=g(""),b=JSON.parse(localStorage.getItem("userData")||"{}"),B=c=>c?c.split(" ").map(n=>n[0]).join("").slice(0,2):"?",C=W(()=>{if(!x.value)return M.value;const c=x.value.toLowerCase();return M.value.filter(n=>n.name.toLowerCase().includes(c)||n.phone&&n.phone.includes(c))}),v=async()=>{if(b.id)try{A.value=!0;const c=await U.post("/getWalkinCustomers",{provider_id:b.id});if(c.data&&c.data.success){const n=c.data.data||[];M.value=n.map(i=>({id:i.id,name:i.full_name||i.name||`${i.first_name||""} ${i.last_name||""}`.trim()||"Unknown Client",phone:i.mobile||i.phone||"",email:i.email||"",lastVisit:i.last_visit||null})).sort((i,_)=>i.name.localeCompare(_.name))}else M.value=[]}catch(c){console.error("Error fetching clients:",c),F({type:"error",message:"Failed to load client list"})}finally{A.value=!1}},p=c=>{console.log("Selected client:",c)};return ae(()=>{v()}),(c,n)=>(o(),l("div",Ua,[e("div",Ra,[e("div",Ka,[n[4]||(n[4]=e("h2",{class:"text-xl font-bold text-gray-900"},"Client List",-1)),e("button",{onClick:n[0]||(n[0]=i=>c.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition-colors bg-gray-50 hover:bg-gray-100 p-2 rounded-full"},[...n[3]||(n[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",qa,[e("div",Ga,[n[5]||(n[5]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),O(e("input",{"onUpdate:modelValue":n[1]||(n[1]=i=>x.value=i),type:"text",placeholder:"Search clients...",class:"w-full pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all"},null,512),[[K,x.value]])])]),A.value?(o(),l("div",Ja,[...n[6]||(n[6]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),e("span",{class:"text-sm text-gray-500 font-medium"},"Loading clients...")],-1)])])):C.value.length===0?(o(),l("div",Qa,[n[7]||(n[7]=e("div",{class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("h3",Ya,r(x.value?"No clients found":"No clients yet"),1),e("p",Xa,r(x.value?`We couldn't find any clients matching "${x.value}"`:"Your client list will appear here once you have bookings."),1)])):(o(),l("div",el,[(o(!0),l(I,null,Z(C.value,i=>(o(),l("div",{key:i.id,class:"bg-white p-4 rounded-xl border border-gray-100 hover:border-red-100 hover:shadow-md transition-all cursor-pointer group",onClick:_=>p(i)},[e("div",sl,[e("div",ol,r(B(i.name)),1),e("div",al,[e("h3",ll,r(i.name),1),e("div",nl,[i.phone?(o(),l("span",rl,[n[8]||(n[8]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),oe(" "+r(i.phone),1)])):w("",!0)])]),e("div",il,[i.phone?(o(),l("a",{key:0,href:`tel:${i.phone}`,class:"p-2 text-gray-400 hover:text-green-500 hover:bg-green-50 rounded-full transition-all",onClick:n[2]||(n[2]=he(()=>{},["stop"]))},[...n[9]||(n[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)])],8,dl)):w("",!0)])])],8,tl))),128))]))])]))}},cl=Q(ul,[["__scopeId","data-v-a8ac11bc"]]),ml={class:"bg-white rounded-xl shadow-md border border-gray-200"},vl={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4 p-4 border-b border-gray-200"},gl={class:"flex items-center space-x-3"},pl={class:"flex items-center border border-gray-300 rounded-lg"},yl={class:"relative"},fl={class:"flex items-center space-x-3"},bl={class:"relative"},hl=["innerHTML"],xl={key:0,class:"absolute right-0 mt-2 w-36 bg-white border border-gray-200 rounded-lg shadow-md z-50"},wl=["onClick"],_l=["innerHTML"],kl={class:"relative"},Cl={key:0,class:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-md z-50"},$l=["onClick"],Dl={class:"relative p-4"},Ml={key:0,class:"flex justify-center items-center h-64"},Sl={key:1,class:"flex"},Vl={class:"w-16 flex-shrink-0"},Bl={class:"flex-1 relative"},Hl={class:"flex border-b border-gray-200"},jl={class:"text-sm font-medium text-gray-500"},Ll={class:"flex"},Pl=["onClick"],Nl={class:"font-medium truncate"},Tl={class:"text-xs opacity-80"},Al={key:0,class:"text-xs opacity-80"},El={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},zl={class:"bg-white rounded-xl shadow-lg w-full max-w-md"},Il={class:"p-6"},Zl={class:"space-y-4"},Fl={class:"grid grid-cols-2 gap-4"},Ol={class:"flex space-x-4"},Wl={class:"flex items-center"},Ul={class:"flex items-center"},Rl={__name:"Calendar",setup($){const A=Te(),M=g(!1),x=g(!1),b=g({date:null,time:null}),B=new Date().toISOString().split("T")[0],C=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),v=()=>{F({type:"success",message:"Walk-in appointment created successfully!"}),Y()},p=g("day"),c=()=>{const t=new Date,a=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/London",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t).reduce((D,H)=>(D[H.type]=H.value,D),{});return new Date(`${a.year}-${a.month}-${a.day}T${a.hour}:${a.minute}:${a.second}`)};console.log("this is hii from custom",c());const n=g(c()),i=g([]),_=g(!1),y=g(!1),h=g(!1),k=g(!1),T=g(!1),S=g({start:c(),end:c()}),V=g(!1),P=g([]),q=g([]);console.log("this is hii from custom",S.value);const E=()=>T.value=!T.value,d=g({date:"",startTime:"",duration:"1 h 45min",clientName:"",service:"",type:"appointment"}),N=()=>{h.value=!h.value,y.value=!1},j=[{label:"Quick Payment",action:"quickPayment"},{label:"Walk-in Appointment",action:"appointment"},{label:"Sales client list",action:"salesClient"},{label:"Client List",action:"Client"}],u=t=>{switch(h.value=!1,t){case"quickPayment":k.value=!0;break;case"appointment":b.value={date:B,time:C},M.value=!0;break;case"Client":case"client":x.value=!0;break;case"salesClient":A.push("/provider/sales-client-list");break}},m=[{id:"day",name:"Day",icon:'<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.985352" y="5.69165" width="18.5" height="8.6164" rx="1.25" stroke="#182224" stroke-width="1.5"/><path d="M0.235352 2H20.2354" stroke="#182224" stroke-width="1.5"/><path d="M0.235352 18H20.2354" stroke="#182224" stroke-width="1.5"/></svg>'},{id:"3day",name:"3 Day",icon:'<svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.75" y="0.75" width="18.5" height="14.5" rx="1.25" stroke="#182224" stroke-width="1.5"/><path d="M6.78906 1.10571V15.4739" stroke="#182224" stroke-width="1.5"/><path d="M13.2749 1.10571V15.4739" stroke="#182224" stroke-width="1.5"/></svg>'},{id:"week",name:"Week",icon:'<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1.10889" y="2.75" width="18.5" height="14.5" rx="1.25" stroke="#182224" stroke-width="1.5"/><path d="M4.8291 3.1062V17.4744" stroke="#182224" stroke-width="1.5"/><path d="M8.51562 3.1062V17.4744" stroke="#182224" stroke-width="1.5"/><path d="M12.2017 3.1062V17.4744" stroke="#182224" stroke-width="1.5"/><path d="M15.8887 3.1062V17.4744" stroke="#182224" stroke-width="1.5"/></svg>'}],L=W(()=>{const t=m.find(s=>s.id===p.value);return t?`<span class="icon-wrap">${t.icon}</span> ${t.name}`:"View"}),le=()=>y.value=!y.value,R=t=>{p.value=t,y.value=!1;const s=new Date(n.value);let a=new Date(s),f=new Date(s);if(t==="day")S.value={start:a,end:f};else if(t==="3day")f.setDate(a.getDate()+2),S.value={start:a,end:f};else if(t==="week"){const D=a.getDay();a.setDate(a.getDate()-D),f=new Date(a),f.setDate(a.getDate()+6),S.value={start:a,end:f}}Y()},de=()=>{n.value=new Date,Y()},ue=W(()=>{const t=[];for(let s=0;s<24;s++){const a=new Date;a.setUTCHours(s,0,0,0);const f=a.toLocaleTimeString("en-GB",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Europe/London"});t.push(f.replace(":00",""))}return t}),ne=W(()=>{if(console.log(S.value,"selected range"),!S.value.start)return n.value.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});const t=S.value.start,s=S.value.end||S.value.start;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()?`${t.getDate()} - ${s.getDate()} ${t.toLocaleDateString("en-GB",{month:"short",year:"numeric"})}`:`${t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})} - ${s.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`}),ve=W(()=>{const t=[];if(S.value.start&&S.value.end){const s=new Date(S.value.start),a=new Date(S.value.end),f=new Date(s);for(;f<=a;)t.push({date:new Date(f),dayName:f.toLocaleDateString("en-GB",{weekday:"short"}),dayNumber:f.getDate()}),f.setDate(f.getDate()+1);return console.log(t,"days"),t}if(p.value==="day")t.push({date:new Date(n.value),dayName:n.value.toLocaleDateString("en-GB",{weekday:"short"}),dayNumber:n.value.getDate()});else if(p.value==="3day")for(let s=0;s<3;s++){const a=new Date(n.value);a.setDate(a.getDate()+s),t.push({date:a,dayName:a.toLocaleDateString("en-GB",{weekday:"short"}),dayNumber:a.getDate()})}else{const s=new Date(n.value);s.setDate(s.getDate()-s.getDay());for(let a=0;a<7;a++){const f=new Date(s);f.setDate(f.getDate()+a),t.push({date:f,dayName:f.toLocaleDateString("en-GB",{weekday:"short"}),dayNumber:f.getDate()})}}return t}),we=t=>{const s=new Date;return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()},_e=()=>{const t=new Date(n.value);if(p.value==="day")t.setDate(t.getDate()-1),S.value={start:t,end:t};else if(p.value==="3day"){t.setDate(t.getDate()-3);const s=new Date(t);s.setDate(t.getDate()+2),S.value={start:t,end:s}}else if(p.value==="week"){t.setDate(t.getDate()-7);const s=new Date(t);s.setDate(t.getDate()+6),S.value={start:t,end:s}}n.value=t,Y()},ke=()=>{const t=new Date(n.value);if(p.value==="day")t.setDate(t.getDate()+1),S.value={start:t,end:t};else if(p.value==="3day"){t.setDate(t.getDate()+3);const s=new Date(t);s.setDate(t.getDate()+2),S.value={start:t,end:s}}else if(p.value==="week"){t.setDate(t.getDate()+7);const s=new Date(t);s.setDate(t.getDate()+6),S.value={start:t,end:s}}n.value=t,Y()},Y=async()=>{var t,s;V.value=!0;try{const a=JSON.parse(localStorage.getItem("userData")||"{}"),f=c();let D,H;p.value==="day"?(D=new Date(f),H=new Date(f)):p.value==="3day"?(D=new Date(f),H=new Date(f),H.setDate(H.getDate()+2)):(D=new Date(f),D.setDate(D.getDate()-D.getDay()),H=new Date(D),H.setDate(H.getDate()+6));const z=te=>{const je=te.getFullYear(),Le=String(te.getMonth()+1).padStart(2,"0"),Pe=String(te.getDate()).padStart(2,"0");return`${je}-${Le}-${Pe}`},J=await U.post("/getBookingsByProvider",{provider_id:a.id}),X=await U.post("/getWalkinBookings",{provider_id:a.id});(t=J.data)!=null&&t.success&&(P.value=J.data.data.bookings),(s=X.data)!=null&&s.success&&(q.value=X.data.data),Ce()}catch(a){console.error("Error fetching bookings:",a)}finally{V.value=!1}},Ce=()=>{i.value=[],console.log("booking",P.value),P.value.forEach(t=>{var f,D;if(!t.booking_date)return;let s=0;t.services&&t.services.length>0&&t.services.forEach(H=>{if(H.service_duration){const z=H.service_duration.match(/(\d+)\s*h/),J=H.service_duration.match(/(\d+)\s*min/),X=z?parseInt(z[1]):0,te=J?parseInt(J[1]):0;s+=X*60+te}});let a="";if(s>0){const H=Math.floor(s/60),z=s%60;H>0?(a=`${H} h`,z>0&&(a+=` ${z}min`)):a=`${z} min`}else a="1 h";i.value.push({id:t.id,customer_id:t.customer_id||0,date:t.booking_date,first_name:t.customer_first_name||"",startTime:t.booking_time||"14:00",duration:a,services:t.services,total_amount:t.total_price,durationMinutes:s||60,title:`${t.customer_first_name||"Customer"} - ${((D=(f=t.services)==null?void 0:f[0])==null?void 0:D.category_name)||"Service"}`,type:"booking",status:t.booking_status||"confirmed",payment_status:t.provider_request_payment_status||"pending",has_vat:t.has_vat,vat_percentage:t.vat_percentage,vat_amount:t.vat_amount,extraCount:t.services&&t.services.length>1?t.services.length-1:0})}),q.value.forEach(t=>{var f,D;if(!t.date)return;let s=0;t.services&&t.services.length>0&&t.services.forEach(H=>{if(H.service_duration){const z=H.service_duration.match(/(\d+)\s*h/),J=H.service_duration.match(/(\d+)\s*min/),X=z?parseInt(z[1]):0,te=J?parseInt(J[1]):0;s+=X*60+te}});let a="";if(s>0){const H=Math.floor(s/60),z=s%60;H>0?(a=`${H} h`,z>0&&(a+=` ${z}min`)):a=`${z} min`}else a="1 h";i.value.push({id:t.id,customer_id:t.id||0,date:t.date,startTime:t.time||"14:00",first_name:t.first_name,services:t.services,duration:a,total_amount:t.total_amount,durationMinutes:s||60,title:`${t.first_name||"Walk-in"} - ${((D=(f=t.services)==null?void 0:f[0])==null?void 0:D.category_name)||"Service"}`,type:"walkin",status:"confirmed",payment_status:t.payment_status||"pending",has_vat:t.has_vat,vat_percentage:t.vat_percentage,vat_amount:t.vat_amount,extraCount:t.services&&t.services.length>1?t.services.length-1:0})}),$e()},$e=()=>{const t={};i.value.forEach(s=>{const a=`${s.date}_${s.startTime}`;t[a]||(t[a]=[]),t[a].push(s)}),Object.values(t).forEach(s=>{const a=s.length;s.forEach((f,D)=>{f.layoutIndex=D,f.layoutCount=a})}),i.value=i.value.map(s=>{const a=100/(s.layoutCount||1),f=a*(s.layoutIndex||0);return{...s,style:{...ge(s),width:`${a}%`,left:`${f}%`,right:"auto",position:"absolute"}}})},De=t=>{const s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),f=String(t.getDate()).padStart(2,"0"),D=`${s}-${a}-${f}`;return console.log(i.value.filter(H=>H.date===D),"appointments.value.filter(appointment => appointment.date === dateStr)"),i.value.filter(H=>H.date===D)},re=g(!1),ie=g(!1),ce=g(null),Me=t=>{console.log("Appointment clicked:",t),t.type==="walkin"?(console.log("Walk-in payment pending",t),ce.value=t,re.value=!0):(console.log("Regular appointment clicked",t),A.push(`/provider/bookings?bookingId=${t.id}`))},Se=()=>{re.value=!1,ie.value=!0},Ve=()=>{ie.value=!1,Y()},ge=t=>{const[s,a]=(t.time||t.startTime||"00:00").split(":").map(Number),f=new Date,D=new Date(f.toLocaleString("en-GB",{timeZone:"Europe/London"}));D.getHours(),D.getMinutes();const z=(s*60+a)/60*80,X=(t.durationMinutes||60)/60*80;return{top:`${z}px`,height:`${X}px`,left:"4px",right:"4px",position:"absolute"}},Be=t=>t.payment_status==="completed"||t.status==="completed"?"bg-green-100 text-green-800 border-l-4 border-green-500":t.status==="in_progress"||t.payment_status==="in_progress"?"bg-yellow-100 text-yellow-800 border-l-4 border-yellow-500":t.status==="cancelled"||t.payment_status==="cancelled"?"bg-red-100 text-red-800 border-l-4 border-red-500":t.type==="walkin"||t.booking_type==="walkin"?"bg-purple-100 text-purple-800 border-l-4 border-purple-500":"bg-blue-100 text-blue-800 border-l-4 border-blue-500",me=()=>{_.value=!1,d.value={date:"",startTime:"",duration:"1 h 45min",clientName:"",service:"",type:"appointment"}},He=()=>{const t={id:Date.now(),date:d.value.date,startTime:d.value.startTime,duration:d.value.duration,title:`${d.value.clientName} - ${d.value.service}`,type:d.value.type,extraCount:Math.floor(Math.random()*3)};i.value.push(t),me()};return se([n,p],()=>{Y()}),ae(()=>{Y()}),(t,s)=>(o(),G(Ee,null,{default:Ne(()=>[e("div",ml,[e("div",vl,[e("div",gl,[e("button",{onClick:de,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-medium"}," Today "),e("div",pl,[e("button",{onClick:_e,class:"px-3 py-2 border-r border-gray-300 hover:bg-gray-100"},[...s[15]||(s[15]=[e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("div",yl,[e("span",{class:"px-4 py-2 text-gray-800 font-medium text-sm sm:text-base cursor-pointer hover:bg-gray-100 rounded",onClick:E},r(ne.value),1),T.value?(o(),G(Ie,{key:0,modelValue:S.value,"onUpdate:modelValue":s[0]||(s[0]=a=>S.value=a),viewMode:p.value,onClose:s[1]||(s[1]=a=>T.value=!1),show:T.value},null,8,["modelValue","viewMode","show"])):w("",!0)]),e("button",{onClick:ke,class:"px-3 py-2 border-l border-gray-300 hover:bg-gray-100"},[...s[16]||(s[16]=[e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])]),e("div",fl,[e("div",bl,[e("button",{onClick:le,class:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100"},[L.value?(o(),l("span",{key:0,class:"flex items-center space-x-2 gap-2",innerHTML:L.value},null,8,hl)):w("",!0),s[17]||(s[17]=e("svg",{class:"w-4 h-4 ml-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),y.value?(o(),l("div",xl,[(o(),l(I,null,Z(m,a=>e("button",{key:a.id,onClick:f=>R(a.id),class:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},[a.icon?(o(),l("div",{key:0,class:"mr-2",innerHTML:a.icon},null,8,_l)):w("",!0),oe(" "+r(a.name),1)],8,wl)),64))])):w("",!0)]),e("div",kl,[e("button",{onClick:N,class:"flex items-center px-4 py-2 bg-gray-800 hover:bg-gray-900 text-white rounded-lg transition-colors"},[...s[18]||(s[18]=[e("span",null,"Add",-1),e("svg",{class:"w-4 h-4 ml-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),h.value?(o(),l("div",Cl,[(o(),l(I,null,Z(j,a=>e("button",{key:a.label,onClick:f=>u(a.action),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},r(a.label),9,$l)),64))])):w("",!0)])])]),k.value?(o(),G(yt,{key:0,onClose:s[2]||(s[2]=a=>k.value=!1),showQuickPayment:k.value},null,8,["showQuickPayment"])):w("",!0),e("div",Dl,[V.value?(o(),l("div",Ml,[...s[19]||(s[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"},null,-1)])])):(o(),l("div",Sl,[e("div",Vl,[(o(!0),l(I,null,Z(ue.value,a=>(o(),l("div",{key:a,class:"h-20 text-right pr-2 text-sm text-gray-500"},r(a),1))),128))]),e("div",Bl,[e("div",Hl,[(o(!0),l(I,null,Z(ve.value,(a,f)=>(o(),l("div",{key:f,class:"flex-1 text-center py-2"},[e("div",jl,r(a.dayName),1),e("div",{class:ee(["text-lg font-semibold",{"text-red-500":we(a.date)}])},r(a.dayNumber),3)]))),128))]),e("div",Ll,[(o(!0),l(I,null,Z(ve.value,(a,f)=>(o(),l("div",{key:f,class:"flex-1 relative"},[(o(!0),l(I,null,Z(ue.value,(D,H)=>(o(),l("div",{key:D,class:"h-20 border-b border-gray-100"}))),128)),(o(!0),l(I,null,Z(De(a.date),D=>(o(),l("div",{key:D.id,class:ee(["absolute rounded-lg p-2 text-sm overflow-hidden cursor-pointer",Be(D)]),style:Ae(ge(D)),onClick:H=>Me(D)},[e("div",Nl,r(D.title),1),e("div",Tl,r(D.duration),1),D.extraCount?(o(),l("div",Al,"+"+r(D.extraCount)+" more",1)):w("",!0)],14,Pl))),128))]))),128))])])]))])]),_.value?(o(),l("div",El,[e("div",zl,[e("div",Il,[e("div",{class:"flex justify-between items-center mb-4"},[s[21]||(s[21]=e("h3",{class:"text-xl font-bold text-gray-800"},"Add New Appointment",-1)),e("button",{onClick:me,class:"text-gray-500 hover:text-gray-700"},[...s[20]||(s[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:he(He,["prevent"])},[e("div",Zl,[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),O(e("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=a=>d.value.date=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[K,d.value.date]])]),e("div",Fl,[e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Time",-1)),O(e("input",{type:"time","onUpdate:modelValue":s[4]||(s[4]=a=>d.value.startTime=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[K,d.value.startTime]])]),e("div",null,[s[25]||(s[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Duration",-1)),O(e("select",{"onUpdate:modelValue":s[5]||(s[5]=a=>d.value.duration=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},[...s[24]||(s[24]=[e("option",{value:"30 min"},"30 min",-1),e("option",{value:"1 hour"},"1 hour",-1),e("option",{value:"1 h 30min"},"1 h 30min",-1),e("option",{value:"1 h 45min"},"1 h 45min",-1),e("option",{value:"2 hours"},"2 hours",-1)])],512),[[pe,d.value.duration]])])]),e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Client Name",-1)),O(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=a=>d.value.clientName=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter client name",required:""},null,512),[[K,d.value.clientName]])]),e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Service",-1)),O(e("select",{"onUpdate:modelValue":s[7]||(s[7]=a=>d.value.service=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},[...s[27]||(s[27]=[e("option",{value:""},"Select a service",-1),e("option",{value:"Exterior wash & hand wax"},"Exterior wash & hand wax",-1),e("option",{value:"Deep interior cleaning"},"Deep interior cleaning",-1),e("option",{value:"Full detailing"},"Full detailing",-1),e("option",{value:"Alloy refurbishment"},"Alloy refurbishment",-1),e("option",{value:"Window tinting"},"Window tinting",-1)])],512),[[pe,d.value.service]])]),e("div",null,[s[31]||(s[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Appointment Type",-1)),e("div",Ol,[e("label",Wl,[O(e("input",{type:"radio","onUpdate:modelValue":s[8]||(s[8]=a=>d.value.type=a),value:"appointment",class:"mr-2",checked:""},null,512),[[ye,d.value.type]]),s[29]||(s[29]=e("span",null,"Appointment",-1))]),e("label",Ul,[O(e("input",{type:"radio","onUpdate:modelValue":s[9]||(s[9]=a=>d.value.type=a),value:"lunch",class:"mr-2"},null,512),[[ye,d.value.type]]),s[30]||(s[30]=e("span",null,"Lunch Break",-1))])])])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{type:"button",onClick:me,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),s[32]||(s[32]=e("button",{type:"submit",class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600"}," Create Appointment ",-1))])],32)])])])):w("",!0),M.value?(o(),G(vo,{key:1,show:M.value,date:b.value.date,time:b.value.time,onClose:s[10]||(s[10]=a=>M.value=!1),onSaved:s[11]||(s[11]=a=>v())},null,8,["show","date","time"])):w("",!0),re.value?(o(),G(qo,{key:2,booking:ce.value,onClose:s[12]||(s[12]=a=>re.value=!1),onCheckout:Se},null,8,["booking"])):w("",!0),ie.value?(o(),G(Wa,{key:3,booking:ce.value,onClose:s[13]||(s[13]=a=>ie.value=!1),onSuccess:Ve},null,8,["booking"])):w("",!0),x.value?(o(),G(cl,{key:4,onClose:s[14]||(s[14]=a=>x.value=!1)})):w("",!0)]),_:1}))}},en=Q(Rl,[["__scopeId","data-v-e9589c1e"]]);export{en as default};
