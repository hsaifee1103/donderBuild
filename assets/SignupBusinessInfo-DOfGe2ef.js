import{C as I,D as T,r as p,d as h,f as m,o as b,j as V,a as s,E as g,g as y,G as M,h as R,i,n as l,v as r,t as U,u as D,s as L,k as A,l as E}from"./app-BYumhLZY.js";import{o as P,_ as q}from"./useOnboarding-yptWu4-9.js";const z={class:"page"},O={class:"container"},j={class:"logo-row"},F={class:"logo-picker"},W={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},G={class:"field"},Y={class:"field"},$={class:"field"},J={class:"with-icon"},H=["max"],K={class:"field"},Q={class:"field"},X={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},Z={class:"flex items-start"},ee={class:"text-sm"},se=I({__name:"SignupBusinessInfo",setup(te){const c=D(),{step:w,totalSteps:k,nextStep:x,setStep:S}=P(),t=T({businessName:"",website:"",establishedIn:"",vat:"",companyRegistrationNumber:"",logo:null}),u=p(null),d=p(!1),o=p(null),N=h(()=>({backgroundColor:"#f7c2c9",backgroundImage:u.value?`url(${u.value})`:"none",backgroundSize:"cover",backgroundPosition:"center"})),_=new Date().toISOString().split("T")[0],f=h(()=>!!t.businessName&&!!t.establishedIn&&!!t.vat&&!!t.companyRegistrationNumber);function B(n){const e=n.target.files;if(!e||!e[0])return;t.logo=e[0];const a=URL.createObjectURL(e[0]);u.value=a}function C(){c.back()}async function v(){if(!(!f.value||d.value)){d.value=!0,o.value=null;try{const n=localStorage.getItem("authToken");n&&L(n);const e=new FormData;e.append("business_name",t.businessName),e.append("business_website",t.website),e.append("established_in",t.establishedIn),e.append("vat_no",t.vat),e.append("companyRegistrationNumber",t.companyRegistrationNumber),t.logo&&e.append("image",t.logo),console.log("Submitting business data:",t);const a=await A.post("/add-business",e);a.data&&a.data.success?(localStorage.setItem("onboarding-business-info",JSON.stringify(t)),x(),c.push({name:"SignupBusinessServices",params:{userType:"garage"}})):a.data.errors&&Array.isArray(a.data.errors)&&a.data.errors.length>0?o.value=a.data.errors.join(", "):a.data.message?o.value=a.data.message:o.value="Failed to submit business information. Please try again."}catch(n){console.error("Error submitting business information:",n);const e=n;e.response&&e.response.data&&e.response.data.message?o.value=e.response.data.message:o.value="An error occurred while submitting your business information. Please try again."}finally{d.value=!1}}}return S(1),(n,e)=>(b(),m("div",z,[V(q,{step:g(w),"total-steps":g(k),"continue-disabled":!f.value||d.value,onBack:C,onContinue:v},null,8,["step","total-steps","continue-disabled"]),s("main",O,[e[15]||(e[15]=s("section",{class:"lead"},[s("p",{class:"eyebrow"},"ACCOUNT SETUP"),s("h1",{class:"title"},"What's Your Business Name?"),s("p",{class:"subtitle"}," This is the brand name your clients will see. Your billing and legal name can be added later. ")],-1)),s("section",j,[s("label",F,[s("input",{type:"file",accept:"image/*",class:"hidden",onChange:B},null,32),s("div",{class:"logo-box",style:M(N.value),"aria-hidden":"true"},[u.value?y("",!0):(b(),m("svg",W,[...e[5]||(e[5]=[s("path",{d:"M12 5v14M5 12h14",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round"},null,-1)])]))],4),e[6]||(e[6]=s("span",{class:"upload-btn"},"Upload Business Logo",-1))])]),s("form",{class:"form",onSubmit:R(v,["prevent"])},[s("label",G,[e[7]||(e[7]=s("span",null,[l("What's your business name? "),s("b",{"aria-hidden":"true"},"*")],-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.businessName=a),type:"text",placeholder:"e.g. my garage solution",required:""},null,512),[[r,t.businessName,void 0,{trim:!0}]])]),s("label",Y,[e[8]||(e[8]=s("span",null,[l("What's your business website? "),s("small",null,"(optional)")],-1)),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.website=a),type:"url",placeholder:"e.g. www.mybusiness.com"},null,512),[[r,t.website,void 0,{trim:!0}]])]),s("label",$,[e[10]||(e[10]=s("span",null,[l("Established In "),s("b",{"aria-hidden":"true"},"*")],-1)),s("div",J,[i(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.establishedIn=a),type:"date",required:"",max:g(_)},null,8,H),[[r,t.establishedIn]]),e[9]||(e[9]=s("svg",{class:"trailing",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",stroke:"currentColor","stroke-width":"2"}),s("path",{d:"M16 2v4M8 2v4M3 10h18",stroke:"currentColor","stroke-width":"2"})],-1))])]),s("label",K,[e[11]||(e[11]=s("span",null,[l("VAT number "),s("b",{"aria-hidden":"true"},"*")],-1)),i(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.vat=a),type:"text",placeholder:"e.g. GB123456789",required:""},null,512),[[r,t.vat,void 0,{trim:!0}]])]),s("label",Q,[e[12]||(e[12]=s("span",null,[l("Company Registration Number "),s("b",{"aria-hidden":"true"},"*")],-1)),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.companyRegistrationNumber=a),type:"text",placeholder:"e.g. 12345678",required:""},null,512),[[r,t.companyRegistrationNumber,void 0,{trim:!0}]])])],32),o.value?(b(),m("div",X,[s("div",Z,[e[14]||(e[14]=s("svg",{class:"h-5 w-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),s("div",null,[e[13]||(e[13]=s("p",{class:"font-medium"},"Error",-1)),s("p",ee,U(o.value),1)])])])):y("",!0)])]))}}),ne=E(se,[["__scopeId","data-v-e58c555a"]]);export{ne as default};
