import{_ as f}from"./AuthLayout-BLtCExCm.js";import{l as y,c as b,o as n,w as x,m as k,k as w,T as c,a as e,f as d,g as P,t as m,h as v,i as p,q as l,x as g}from"./app-DJPj3-n2.js";const C={name:"CustomerResetPassword",components:{AuthLayout:f},data(){return{password:"",confirmPassword:"",showPassword:!1,showConfirmPassword:!1,isLoading:!1,errorMessage:""}},computed:{passwordRequirements(){const t=this.password.length>=8,s=/[A-Z]/.test(this.password),i=/[0-9]/.test(this.password),u=/[!@#$%^&*(),.?":{}|<>]/.test(this.password);return{length:t,uppercase:s,number:i,special:u}},isPasswordValid(){const t=this.passwordRequirements;return t.length&&t.uppercase&&t.number&&t.special},isFormValid(){return this.password&&this.confirmPassword&&this.password===this.confirmPassword&&this.isPasswordValid}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},testNotify(){c.success("Password Reset Successful","Your password has been reset successfully. You will be redirected to the login page.",{confirmButtonText:"Continue",onConfirm:()=>{console.log("Confirmed!")},onClose:()=>{console.log("Closed!")}})},toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword},async handleSubmit(){var t;if(!this.isFormValid){this.password!==this.confirmPassword?this.errorMessage="Passwords do not match.":this.isPasswordValid||(this.errorMessage="Password does not meet the requirements.");return}this.isLoading=!0,this.errorMessage="";try{const s=await w.post("/customer/password/reset",{password:this.password,password_confirmation:this.confirmPassword});if(s.data&&s.data.success)c.success("Password Reset Successful","Your password has been reset successfully. You will be redirected to the login page.",{confirmButtonText:"Continue to Login",onConfirm:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userData"),w.setAuthToken(""),this.$router.push("/login")},onClose:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userData"),w.setAuthToken(""),this.$router.push("/login")}});else{alert("Failed to reset password.");let i=((t=s.data)==null?void 0:t.message)||"Failed to reset password.";s.data.errors&&Array.isArray(s.data.errors)&&s.data.errors.length>0&&(i=s.data.errors.join(", ")),c.error("Reset Failed",i)}}catch(s){alert("Error resetting password."),console.error("Error resetting password:",s);let i="An error occurred while resetting your password.";if(s.response){const u=s.response.status,r=s.response.data;u===422&&r.errors?i=r.errors.join(", "):i=r.message||i}c.error("Reset Failed",i)}finally{this.isLoading=!1}}}},M={class:"w-full max-w-md mx-auto"},L={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},_={class:"flex items-start"},V={class:"text-sm"},A={class:"relative"},R=["type"],S={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},q={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},B={class:"relative"},j=["type"],z={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},F={class:"text-sm text-gray-600"},D={class:"list-disc pl-5 space-y-1"},E=["disabled"];function I(t,s,i,u,r,o){const h=k("AuthLayout");return n(),b(h,null,{default:x(()=>[e("div",M,[s[12]||(s[12]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Reset Customer Password"),e("p",{class:"text-gray-600"}," Create a new password for your account. ")],-1)),r.errorMessage?(n(),d("div",L,[e("div",_,[s[6]||(s[6]=e("svg",{class:"h-5 w-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("div",null,[s[5]||(s[5]=e("p",{class:"font-medium"},"Error",-1)),e("p",V,m(r.errorMessage),1)])])])):P("",!0),e("form",{onSubmit:s[4]||(s[4]=v((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"])),class:"space-y-6"},[e("div",A,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>r.password=a),type:r.showPassword?"text":"password",placeholder:"Enter password",class:l(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors",{"border-red-500":r.errorMessage}]),required:""},null,10,R),[[g,r.password]]),e("button",{type:"button",onClick:s[1]||(s[1]=(...a)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...a)),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r.showPassword?(n(),d("svg",S,[...s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464m1.414 1.414L8.464 8.464m5.656 5.656l1.415 1.415m-1.415-1.415l1.415 1.415M14.828 14.828L16.243 16.243"},null,-1)])])):(n(),d("svg",q,[...s[8]||(s[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5,12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),e("div",B,[p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>r.confirmPassword=a),type:r.showConfirmPassword?"text":"password",placeholder:"Confirm password",class:l(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors",{"border-red-500":r.errorMessage}]),required:""},null,10,j),[[g,r.confirmPassword]]),e("button",{type:"button",onClick:s[3]||(s[3]=(...a)=>o.toggleConfirmPasswordVisibility&&o.toggleConfirmPasswordVisibility(...a)),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r.showConfirmPassword?(n(),d("svg",z,[...s[9]||(s[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9 97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464m1.414 1.414L8.464 8.464m5.656 5.656l1.415 1.415m-1.415-1.415l1.415 1.415M14.828 14.828L16.243 16.243"},null,-1)])])):(n(),d("svg",T,[...s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5,12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),e("div",F,[s[11]||(s[11]=e("p",{class:"mb-1"},"Password must contain:",-1)),e("ul",D,[e("li",{class:l(o.passwordRequirements.length?"text-green-600":"text-gray-600")},"At least 8 characters",2),e("li",{class:l(o.passwordRequirements.uppercase?"text-green-600":"text-gray-600")},"At least one uppercase letter",2),e("li",{class:l(o.passwordRequirements.number?"text-green-600":"text-gray-600")},"At least one number",2),e("li",{class:l(o.passwordRequirements.special?"text-green-600":"text-gray-600")},"At least one special character",2)])]),e("button",{type:"submit",disabled:r.isLoading||!o.isPasswordValid||r.password!==r.confirmPassword,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 px-4 rounded-lg transition-colors"},m(r.isLoading?"Resetting...":"Reset Password"),9,E)],32)])]),_:1})}const U=y(C,[["render",I]]);export{U as default};
