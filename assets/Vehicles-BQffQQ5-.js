import{C as L,r as C,f as m,o as c,a as e,g as h,h as D,j as b,E as M,n as x,t as u,K as T,l as E,b as O,y as z,O as I,J as A,c as _,w as B,k as H,F as k,p as Z,P as $}from"./app-C7zuiOEw.js";import{C as P}from"./CustomerDashboardLayout-CIWqDXsb.js";import{c as N}from"./x-BRj-0eBZ.js";import{A as R}from"./AddVehicleForm-D2zVW-td.js";import"./NotificationDropdown-Ywe_Y4sx.js";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=N("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=N("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Y={class:"vehicle-card",role:"group","aria-label":"Vehicle summary card"},F=["aria-expanded"],q={class:"left"},G={class:"header"},U={class:"title text-balance"},K={key:0},Q={class:"tags","aria-label":"Identifiers"},W=["aria-label"],X={class:"specs","aria-label":"Vehicle specifications"},e1={class:"spec"},a1={class:"spec-text"},t1={class:"value"},s1={class:"spec"},i1={class:"spec-text"},l1={class:"value"},n1={class:"spec"},o1={class:"spec-text"},r1={class:"value"},c1={class:"image-wrap"},d1=["src","alt"],u1="assets/images/car_image.png",m1=L({__name:"VehicleBox",props:{index:{},make:{default:"Audi"},model:{default:"Q2"},seriesLabel:{default:"Series"},registrationNumber:{default:"SV62TYA"},engineSize:{default:"1398"},fuelType:{default:"Petrol"},transmission:{default:"Manual"},yearOfManufacture:{default:"2012"},image:{default:""}},emits:["edit","delete","toggle-menu"],setup(V,{emit:w}){const n=V,r=C(!1),d=()=>{r.value=!r.value},g=()=>{v("edit",n.index),r.value=!1},y=()=>{v("delete",n.index),r.value=!1},v=w;return document.addEventListener("click",l=>{const a=document.querySelector(".menu-dropdown");a&&!a.contains(l.target)&&(l.target,document.querySelector(".menu-btn"))}),(l,a)=>(c(),m("article",Y,[e("button",{class:"menu-btn",onClick:d,"aria-label":"Open menu","aria-expanded":r.value},[...a[1]||(a[1]=[e("svg",{viewBox:"0 0 24 24",class:"menu-icon","aria-hidden":"true"},[e("circle",{cx:"6",cy:"12",r:"2"}),e("circle",{cx:"12",cy:"12",r:"2"}),e("circle",{cx:"18",cy:"12",r:"2"})],-1)])],8,F),r.value?(c(),m("div",{key:0,class:"menu-dropdown",onClick:a[0]||(a[0]=D(()=>{},["stop"]))},[e("button",{onClick:g,class:"menu-item flex items-center gap-2"},[b(M(J),{class:"w-4 h-4"}),a[2]||(a[2]=e("span",null,"Edit",-1))]),e("button",{onClick:y,class:"menu-item flex items-center gap-2"},[b(M(j),{class:"w-4 h-4"}),a[3]||(a[3]=e("span",null,"Delete",-1))])])):h("",!0),e("div",q,[e("header",G,[e("h2",U,[x(u(l.make)+" ",1),l.seriesLabel?(c(),m("span",K,u(l.seriesLabel),1)):h("",!0),x(" "+u(l.model),1)])]),e("div",Q,[e("span",{class:"plate","aria-label":`Registration ${l.registrationNumber}`},u(l.registrationNumber),9,W)]),e("ul",X,[e("li",e1,[a[5]||(a[5]=e("span",{class:"icon-wrap","aria-hidden":"true"},[e("svg",{width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.47371 0.552734C9.75287 0.552734 10.0206 0.663636 10.2181 0.861043C10.4154 1.05845 10.5263 1.32619 10.5263 1.60537C10.5263 1.88454 10.4154 2.15229 10.2181 2.34969C10.0206 2.5471 9.75287 2.658 9.47371 2.658H8.42105V3.71064H11.3305C11.6572 3.71065 11.9794 3.7867 12.2716 3.93274L15.6779 5.6359C16.0277 5.8107 16.322 6.07947 16.5275 6.41208C16.7332 6.7447 16.8421 7.12801 16.8421 7.51906V10.0264H17.8948V8.97382C17.8948 8.69459 18.0056 8.42691 18.2031 8.22947C18.4005 8.03203 18.6682 7.92116 18.9474 7.92116C19.2266 7.92116 19.4943 8.03203 19.6917 8.22947C19.8891 8.42691 20 8.69459 20 8.97382V13.1843C20 13.4635 19.8891 13.7312 19.6917 13.9287C19.4943 14.1261 19.2266 14.237 18.9474 14.237C18.6682 14.237 18.4005 14.1261 18.2031 13.9287C18.0056 13.7312 17.8948 13.4635 17.8948 13.1843V12.1317H16.8421V13.7106C16.8421 14.0374 16.766 14.3598 16.6198 14.6521C16.4737 14.9445 16.2615 15.1987 16 15.3948L12.4916 18.0264C12.1272 18.2997 11.6839 18.4475 11.2284 18.4475H2.10527C1.54691 18.4475 1.01143 18.2257 0.616618 17.8309C0.221804 17.436 0 16.9006 0 16.3422V5.81589C0 5.25755 0.221804 4.72206 0.616618 4.32725C1.01143 3.93243 1.54691 3.71064 2.10527 3.71064H6.3158V2.658H5.26316C4.98399 2.658 4.71625 2.5471 4.51884 2.34969C4.32143 2.15229 4.21053 1.88454 4.21053 1.60537C4.21053 1.32619 4.32143 1.05845 4.51884 0.861043C4.71625 0.663636 4.98399 0.552734 5.26316 0.552734H9.47371ZM8.43581 7.54537C8.21474 7.41266 7.95258 7.36571 7.69922 7.41345C7.44579 7.46118 7.21872 7.60026 7.06106 7.80432L6.99264 7.90643L5.42316 10.5212C5.33145 10.6736 5.27947 10.8467 5.27197 11.0244C5.26449 11.2022 5.30173 11.379 5.38029 11.5387C5.45886 11.6983 5.57622 11.8356 5.72164 11.9382C5.86706 12.0407 6.03589 12.105 6.21264 12.1254L6.33474 12.1317H7.61474L6.99264 13.1696C6.85555 13.3998 6.81142 13.6737 6.86925 13.9353C6.92707 14.1969 7.08249 14.4267 7.30384 14.5777C7.52519 14.7287 7.79578 14.7896 8.06047 14.748C8.32516 14.7064 8.56406 14.5654 8.72847 14.3538L8.79788 14.2528L10.3664 11.6369C10.4581 11.4845 10.51 11.3115 10.5175 11.1337C10.525 10.956 10.4877 10.7791 10.4092 10.6195C10.3306 10.4598 10.2133 10.3225 10.0678 10.22C9.92242 10.1174 9.75361 10.0531 9.57683 10.0327L9.45477 10.0264H8.17477L8.79684 8.98851C8.94022 8.74939 8.98287 8.46307 8.91539 8.19249C8.84791 7.92191 8.67575 7.68918 8.43686 7.54537H8.43581Z",fill:"#182224","fill-opacity":"0.75"})])],-1)),e("div",a1,[a[4]||(a[4]=e("span",{class:"label"},"ENGINE",-1)),e("span",t1,u(l.engineSize)+"cc",1)])]),e("li",s1,[a[7]||(a[7]=T('<span class="icon-wrap" aria-hidden="true" data-v-be6fc887><svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-be6fc887><g clip-path="url(#clip0_116_7206)" data-v-be6fc887><path d="M1.25 3C1.25 1.62109 2.37109 0.5 3.75 0.5H10C11.3789 0.5 12.5 1.62109 12.5 3V10.5H12.8125C14.7109 10.5 16.25 12.0391 16.25 13.9375V15.1875C16.25 15.707 16.668 16.125 17.1875 16.125C17.707 16.125 18.125 15.707 18.125 15.1875V9.17188C17.0469 8.89453 16.25 7.91406 16.25 6.75V4.25L15 3C14.6562 2.65625 14.6562 2.09375 15 1.75C15.3438 1.40625 15.9062 1.40625 16.25 1.75L19.2695 4.76953C19.7383 5.23828 20 5.875 20 6.53906V7.0625V8V9.25V15.1875C20 16.7422 18.7422 18 17.1875 18C15.6328 18 14.375 16.7422 14.375 15.1875V13.9375C14.375 13.0742 13.6758 12.375 12.8125 12.375H12.5V18C13.1914 18 13.75 18.5586 13.75 19.25C13.75 19.9414 13.1914 20.5 12.5 20.5H1.25C0.558594 20.5 0 19.9414 0 19.25C0 18.5586 0.558594 18 1.25 18V3ZM3.75 3.625V7.375C3.75 7.71875 4.03125 8 4.375 8H9.375C9.71875 8 10 7.71875 10 7.375V3.625C10 3.28125 9.71875 3 9.375 3H4.375C4.03125 3 3.75 3.28125 3.75 3.625Z" fill="#182224" fill-opacity="0.75" data-v-be6fc887></path></g><defs data-v-be6fc887><clipPath id="clip0_116_7206" data-v-be6fc887><rect width="20" height="20" fill="white" transform="translate(0 0.5)" data-v-be6fc887></rect></clipPath></defs></svg></span>',1)),e("div",i1,[a[6]||(a[6]=e("span",{class:"label"},"TYPE",-1)),e("span",l1,u(l.fuelType)+" â€¢ "+u(l.transmission),1)])]),e("li",n1,[a[9]||(a[9]=e("span",{class:"icon-wrap","aria-hidden":"true"},[e("svg",{width:"18",height:"21",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M5.25 0.5C5.94141 0.5 6.5 1.05859 6.5 1.75V3H11.5V1.75C11.5 1.05859 12.0586 0.5 12.75 0.5C13.4414 0.5 14 1.05859 14 1.75V3H15.875C16.9102 3 17.75 3.83984 17.75 4.875V6.75H0.25V4.875C0.25 3.83984 1.08984 3 2.125 3H4V1.75C4 1.05859 4.55859 0.5 5.25 0.5ZM0.25 8H17.75V18.625C17.75 19.6602 16.9102 20.5 15.875 20.5H2.125C1.08984 20.5 0.25 19.6602 0.25 18.625V8ZM2.75 11.125V12.375C2.75 12.7188 3.03125 13 3.375 13H4.625C4.96875 13 5.25 12.7188 5.25 12.375V11.125C5.25 10.7812 4.96875 10.5 4.625 10.5H3.375C3.03125 10.5 2.75 10.7812 2.75 11.125ZM7.75 11.125V12.375C7.75 12.7188 8.03125 13 8.375 13H9.625C9.96875 13 10.25 12.7188 10.25 12.375V11.125C10.25 10.7812 9.96875 10.5 9.625 10.5H8.375C8.03125 10.5 7.75 10.7812 7.75 11.125ZM13.375 10.5C13.0312 10.5 12.75 10.7812 12.75 11.125V12.375C12.75 12.7188 13.0312 13 13.375 13H14.625C14.9688 13 15.25 12.7188 15.25 12.375V11.125C15.25 10.7812 14.9688 10.5 14.625 10.5H13.375ZM2.75 16.125V17.375C2.75 17.7188 3.03125 18 3.375 18H4.625C4.96875 18 5.25 17.7188 5.25 17.375V16.125C5.25 15.7812 4.96875 15.5 4.625 15.5H3.375C3.03125 15.5 2.75 15.7812 2.75 16.125ZM8.375 15.5C8.03125 15.5 7.75 15.7812 7.75 16.125V17.375C7.75 17.7188 8.03125 18 8.375 18H9.625C9.96875 18 10.25 17.7188 10.25 17.375V16.125C10.25 15.7812 9.96875 15.5 9.625 15.5H8.375ZM12.75 16.125V17.375C12.75 17.7188 13.0312 18 13.375 18H14.625C14.9688 18 15.25 17.7188 15.25 17.375V16.125C15.25 15.7812 14.9688 15.5 14.625 15.5H13.375C13.0312 15.5 12.75 15.7812 12.75 16.125Z",fill:"#182224","fill-opacity":"0.75"})])],-1)),e("div",o1,[a[8]||(a[8]=e("span",{class:"label"},"REGISTERED YEAR",-1)),e("span",r1,u(l.yearOfManufacture),1)])])])]),e("figure",c1,[e("img",{class:"car-img",src:l.image||u1,alt:`${l.make} ${l.model}`,decoding:"async",loading:"lazy"},null,8,d1)])]))}}),g1=E(m1,[["__scopeId","data-v-be6fc887"]]),f1={class:"max-w-7xl mx-auto"},p1={class:"bg-white rounded-lg overflow-hidden"},C1={class:"p-6"},v1={class:"space-y-6"},h1={key:0,class:"p-4 text-center text-gray-500"},y1={key:0,class:"p-4 text-center text-gray-500"},x1={__name:"Vehicles",emits:["close","submit"],setup(V,{emit:w}){const n=C([]),r=C(!1),d=C(!1),g=async()=>{r.value=!0;const t=await H.get("/customer-info");if(localStorage.getItem("userData"))try{const i=t.data.data;console.log("Loaded userData from localStorage:",i),n.value=(i.car_details||[]).slice().reverse()}catch(i){console.error("Error parsing user data:",i),n.value=[]}r.value=!1},y=t=>{console.log("Edit vehicle at index:",t);const s=n.value[t];p.value={registrationNumber:s.registrationNumber||s.car_model||"",carModel:s.car_make||"",engineSize:s.engine_size||"",transmission:s.transmission||"Manual",fuelType:s.fuelType||"Petrol",yearOfRegistration:s.yearOfManufacture||"",car_id:s.id||null},d.value=!0},v=async t=>{if((await(await $(async()=>{const{default:o}=await import("./sweetalert2.esm.all-BL10lD4V.js");return{default:o}},[])).default.fire({title:"Are you sure?",text:"Do you really want to delete this vehicle?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"})).isConfirmed){console.log("Delete vehicle at index:",t);const o=n.value[t];if(!o||!o.id){console.error("Vehicle ID not found for deletion.");return}try{await H.post("/delete-car-details",{car_id:o.id}),n.value.splice(t,1);const f=JSON.parse(localStorage.getItem("userData")||"{}");f.car_details=n.value,localStorage.setItem("userData",JSON.stringify(f))}catch(f){console.error("Error deleting vehicle:",f)}}},l=t=>{console.log("Toggle menu for vehicle at index:",t)},a=()=>{p.value={registrationNumber:"",carModel:"",engineSize:"",transmission:"",fuelType:"",yearOfRegistration:""},d.value=!0},p=C({registrationNumber:"",carModel:"",engineSize:"",transmission:"",fuelType:"",yearOfRegistration:""}),S=t=>{const s={car_make:t.carModel,car_model:t.registrationNumber,registrationNumber:t.registrationNumber,engine_size:t.engineSize,fuelType:t.fuelType,transmission:t.transmission,yearOfManufacture:t.yearOfRegistration};if(p.value.registrationNumber){const o=n.value.findIndex(f=>f.registrationNumber===p.value.registrationNumber);o!==-1&&(n.value[o]={...n.value[o],...s})}else n.value.push(s);const i=JSON.parse(localStorage.getItem("userData")||"{}");i.car_details=n.value,localStorage.setItem("userData",JSON.stringify(i)),d.value=!1,g()};return O(()=>{z(),g();const t=s=>{s.key==="userData"&&g()};window.addEventListener("storage",t),I(()=>{window.removeEventListener("storage",t)})}),A(()=>localStorage.getItem("userData"),()=>{g()}),(t,s)=>(c(),_(P,null,{default:B(()=>[e("div",f1,[s[2]||(s[2]=e("div",{class:"mt-5"},[e("h1",{class:"text-2xl px-6 font-bold text-gray-900"},"My Vehicles")],-1)),e("div",p1,[e("div",C1,[e("div",{class:"flex justify-between items-center mb-6"},[s[1]||(s[1]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Vehicle Details",-1)),e("button",{onClick:a,class:"bg-red-500 text-white px-4 py-2 rounded-full hover:bg-red-600 transition-colors"}," + Add New ")]),e("div",v1,[r.value?(c(),m("div",h1," Loading vehicles... ")):(c(),m(k,{key:1},[(c(!0),m(k,null,Z(n.value,(i,o)=>(c(),_(g1,{key:o,index:o,make:i.car_make||"N/A",model:i.car_model||"N/A",seriesLabel:i.seriesLabel||"",registrationNumber:i.registrationNumber||i.car_model||"N/A",engineSize:i.engine_size||"N/A",fuelType:i.fuelType||"Petrol",transmission:i.transmission||"Manual",yearOfManufacture:i.yearOfManufacture||"2012",image:i.image||"/assets/images/car_image.png",onEdit:y,onDelete:v,onToggleMenu:l},null,8,["index","make","model","seriesLabel","registrationNumber","engineSize","fuelType","transmission","yearOfManufacture","image"]))),128)),n.value.length===0?(c(),m("div",y1," No vehicles registered. ")):h("",!0)],64))])])]),d.value?(c(),_(R,{key:0,isVisible:d.value,formData:p.value,onClose:s[0]||(s[0]=i=>d.value=!1),onSubmit:S},null,8,["isVisible","formData"])):h("",!0)])]),_:1}))}};export{x1 as default};
