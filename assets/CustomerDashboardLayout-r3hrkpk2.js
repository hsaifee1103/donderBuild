import{l as G,r as l,J as j,d as K,O as X,f as p,o as r,b as e,g as y,j as d,E as h,w as m,m as Y,u as W,K as ee,a as w,n as D,F,p as B,L as E,t as A,q as k,Q as ae,k as f,e as te}from"./app-CWmiax_p.js";import{_ as oe}from"./NotificationDropdown-V91OdzbG.js";import{c as b,M as se,B as le,X as ne,C as re,a as ie,b as ce,U as de,S as ue,d as pe,F as he,e as me,f as fe,g as ve}from"./x-CM3hx-6f.js";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=b("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=b("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=b("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=b("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xe={class:"min-h-screen bg-white flex flex-col"},Ce={class:"bg-white shadow-sm"},we={class:"flex items-center justify-between p-4 max-w-[1540px] mx-auto"},_e={class:"flex items-center gap-2"},Le=["aria-expanded"],Me={class:"flex items-center space-x-2 md:space-x-4"},Ne={class:"relative"},Se={key:0,class:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full","aria-hidden":"true"},He={class:"relative"},Ve=["aria-expanded"],je=["src","alt"],De={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-50",role:"menu"},Fe={class:"flex items-center justify-between p-4 border-b flex-shrink-0"},Be={class:"py-3 overflow-y-auto flex-1"},Ee={class:"space-y-1"},Ae={class:"mr-3 text-gray-500"},Ie={class:"flex flex-1 overflow-hidden"},Ue={class:"hidden md:block w-64 bg-white shadow flex-shrink-0"},qe={class:"py-3 h-full overflow-y-auto"},Pe={class:"space-y-1"},Ze={class:"mr-3 text-gray-500"},$e={class:"flex-1 overflow-y-auto p-4 md:p-6"},Oe={__name:"CustomerDashboardLayout",setup(ze){const _=te(),v=W(),i=l(!1),n=l(!1),u=l([]),x=l(!1),C=l(null),g=l(0),c=l(!1),L=l("John Doe"),I=l("john@example.com"),M=l("https://via.placeholder.com/150"),N=[{name:"personal-info",label:"Personal info",path:"/personal-info",icon:be},{name:"vehicles",label:"My Vehicles",path:"/vehicles",icon:re},{name:"bookings",label:"Bookings",path:"/my-bookings",icon:ie},{name:"messages",label:"Messages",path:"/messages",icon:ce},{name:"favorites",label:"Favorites",path:"/favorites",icon:ge},{name:"community",label:"Community",path:"/community",icon:de},{name:"password",label:"Password",path:"/password",icon:ye},{name:"invite-friends",label:"Invite Friends",path:"/invite-friends",icon:ke},{name:"settings",label:"Settings",path:"/settings",icon:ue},{name:"help-support",label:"Help & Support",path:"/help-support",icon:pe},{name:"faq",label:"FAQ",path:"/faq",icon:he},{name:"privacy-policy",label:"Privacy Policy",path:"/privacy-policy",icon:me},{name:"terms-conditions",label:"Terms & Conditions",path:"/terms-conditions",icon:fe},{name:"community-guide",label:"Community Guide",path:"/community-guide",icon:ve}],S=t=>_.path===t,U=()=>{i.value=!i.value,i.value&&(n.value=!1)},q=()=>{n.value=!n.value,n.value&&(i.value=!1,Z())},P=()=>{n.value=!1},Z=async()=>{try{x.value=!0;const t=await f.get("/getNotificationCustomer");t.data&&t.data.success&&(u.value=t.data.data||[],g.value=t.data.unread_count||0)}catch(t){console.error("Failed to fetch notifications:",t)}finally{x.value=!1}},$=async()=>{try{const t=await f.get("/readNotificationCustomer");t.data&&t.data.success&&(u.value=u.value.map(a=>({...a,is_read:1})),g.value=0)}catch(t){console.error("Failed to mark notifications as read:",t)}},O=async t=>{try{C.value=t;const a=await f.post("/deleteNotificationCustomer",{id:t});a.data&&a.data.success&&(u.value=u.value.filter(o=>o.id!==t))}catch(a){console.error("Failed to delete notification:",a)}finally{C.value=null}},z=()=>{n.value=!1,v.push("/notifications")},Q=()=>{c.value=!c.value},H=()=>{c.value=!1};j(()=>_.path,()=>{c.value=!1,i.value=!1,n.value=!1}),j(c,t=>{const a=document.documentElement;t?a.classList.add("overflow-hidden"):a.classList.remove("overflow-hidden")});const R=async()=>{try{await f.post("/logout")}catch(t){console.error("Logout error:",t)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("userData"),v.push("/login")}},T=()=>{var a;const t=localStorage.getItem("userData");if(t)try{const o=JSON.parse(t);L.value=`${o.first_name} ${o.last_name}`,I.value=o.email||"user@example.com",M.value=((a=o.image)==null?void 0:a.image_url)||"https://via.placeholder.com/150"}catch(o){console.error("Error parsing user data:",o)}},J=async()=>{var t;try{const a=await f.get("/getNotificationCustomer");(t=a.data)!=null&&t.success&&(g.value=a.data.unread_count||0)}catch(a){console.error("Error loading notifications:",a)}},V=t=>{t.target.closest(".relative")||(i.value=!1,n.value=!1)};return K(()=>{T(),J(),document.addEventListener("click",V)}),X(()=>{document.removeEventListener("click",V),document.documentElement.classList.remove("overflow-hidden")}),(t,a)=>{const o=Y("router-link");return r(),p("div",xe,[e("header",Ce,[e("div",we,[e("div",_e,[e("button",{class:"md:hidden p-2 rounded-lg hover:bg-gray-100","aria-label":"Open navigation","aria-expanded":c.value?"true":"false","aria-controls":"mobile-sidebar",onClick:Q},[d(h(se),{class:"w-6 h-6 text-gray-700"})],8,Le),d(o,{to:"/",class:"flex items-center","aria-label":"Go to home"},{default:m(()=>[...a[2]||(a[2]=[e("img",{src:"/assets/images/main-logo.png",alt:"Donder Storm Logo",class:"h-8 w-auto mr-2"},null,-1),e("span",{class:"sr-only"},"Donder Storm",-1)])]),_:1})]),e("div",Me,[e("button",{class:"px-2 py-2 text-black rounded-lg transition-colors cursor-pointer",onClick:a[0]||(a[0]=s=>h(v).push("/vehicles"))},[...a[3]||(a[3]=[ee('<svg width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" data-v-0aceddda><path d="M23.6629 13.4422L21.5994 12.4999L19.7781 9.59421C19.2517 8.75197 18.3252 8.24136 17.3303 8.24662H11.2596C10.3594 8.24662 9.50664 8.66248 8.95918 9.37838L6.60617 12.4578L2.68448 13.5317C1.68959 13.8054 1 15.7161 1 16.7478V18.2481C1 19.5167 2.01069 20.5642 3.27932 20.5642H3.61621C4.02154 22.1277 5.61653 23.0646 7.17994 22.6593C8.20643 22.3909 9.01182 21.5907 9.27502 20.5642H16.4302C16.8355 22.1277 18.4305 23.0646 19.9939 22.6593C21.0204 22.3909 21.8258 21.5907 22.089 20.5642H22.7206C23.9893 20.5642 25 19.5167 25 18.2481V15.5373C25.0052 14.6371 24.4788 13.8159 23.6629 13.4422ZM6.44298 21.6907C5.41124 21.6907 4.57426 20.8538 4.57426 19.822C4.57426 18.7903 5.41124 17.9533 6.44298 17.9533C7.47473 17.9533 8.31171 18.7903 8.31171 19.822C8.31697 20.8485 7.47999 21.6855 6.44298 21.6907ZM19.2569 21.6907C18.2252 21.6907 17.3882 20.8538 17.3882 19.822C17.3882 18.7903 18.2252 17.9533 19.2569 17.9533C20.2887 17.9533 21.1257 18.7903 21.1257 19.822C21.1309 20.8485 20.2939 21.6855 19.2569 21.6907ZM22.7206 19.5114H22.1627C21.989 17.9059 20.5413 16.7478 18.9358 16.9268C17.5724 17.0742 16.4986 18.1533 16.3512 19.5114H9.34872C9.175 17.9059 7.7274 16.7478 6.12188 16.9268C4.7585 17.0742 3.68464 18.1533 3.53725 19.5114H3.27405C2.58447 19.5114 2.04754 18.9377 2.04754 18.2481V16.7478C2.04227 16.1846 2.41602 14.695 2.95821 14.5424L7.05887 13.4211C7.16942 13.3896 7.26943 13.3264 7.33787 13.2316L9.79089 10.0153C10.1436 9.56262 10.6858 9.29942 11.2596 9.29942H17.3303C17.962 9.29416 18.5568 9.61526 18.8884 10.1522L20.794 13.1948C20.8467 13.2843 20.9309 13.3527 21.0204 13.3948L23.2207 14.4002C23.6629 14.6055 23.9472 15.0477 23.9419 15.5373V18.2481H23.9472C23.9472 18.9377 23.4102 19.5114 22.7206 19.5114Z" fill="#182224" stroke="#182224" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round" data-v-0aceddda></path><path d="M13 7.24749C12.9998 5.85935 13.4809 4.51408 14.3614 3.4409C15.2419 2.36773 16.4672 1.63305 17.8286 1.36204C19.1901 1.09104 20.6033 1.30048 21.8277 1.95468C23.052 2.60888 24.0116 3.66736 24.543 4.94977C25.0744 6.23218 25.1446 7.65916 24.7419 8.98758C24.3391 10.316 23.4881 11.4637 22.334 12.235C21.1799 13.0063 19.794 13.3537 18.4126 13.2177C17.0311 13.0818 15.7395 12.4711 14.7578 11.4897C14.2006 10.9326 13.7586 10.2713 13.4569 9.54342C13.1553 8.81555 13.0001 8.03538 13 7.24749Z" fill="white" stroke="#182224" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" data-v-0aceddda></path><path d="M18.9941 4.24658V10.2466" stroke="#182224" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" data-v-0aceddda></path><path d="M22 7.24072L16 7.24072" stroke="#182224" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" data-v-0aceddda></path></svg>',1)])]),e("button",{class:"px-2 py-2 text-black rounded-lg transition-colors cursor-pointer",onClick:a[1]||(a[1]=s=>h(v).push("/messages"))},[...a[4]||(a[4]=[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[e("path",{d:"M19 13C19 13.5304 18.7893 14.0391 18.4142 14.4142C18.0391 14.7893 17.5304 15 17 15H5L1 19V3C1 2.46957 1.21071 1.96086 1.58579 1.58579C1.96086 1.21071 2.46957 1 3 1H17C17.5304 1 18.0391 1.21071 18.4142 1.58579C18.7893 1.96086 19 2.46957 19 3V13Z",stroke:"#182224","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M5.33301 5.83008H14.7452",stroke:"#182224","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M5.5 10H12.25",stroke:"#182224","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),e("div",Ne,[e("button",{class:"relative p-2 rounded-full hover:bg-gray-100","aria-label":"Notifications",onClick:q},[d(h(le),{class:"w-6 h-6 text-gray-600"}),g.value>0?(r(),p("span",Se)):y("",!0)]),n.value?(r(),w(oe,{key:0,notifications:u.value,loading:x.value,"user-type":"customer","deleting-id":C.value,onMarkAllRead:$,onDelete:O,onViewAll:z,onClose:P},null,8,["notifications","loading","deleting-id"])):y("",!0)]),e("div",He,[e("button",{onClick:U,class:"flex items-center space-x-2 p-2 px-3 rounded-full hover:bg-gray-100","aria-haspopup":"menu","aria-expanded":i.value?"true":"false"},[e("img",{src:M.value,alt:L.value,class:"w-8 h-8 rounded-full border border-gray-200"},null,8,je)],8,Ve),i.value?(r(),p("div",De,[d(o,{to:"/personal-info",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},{default:m(()=>[...a[5]||(a[5]=[D(" Your Profile ",-1)])]),_:1}),d(o,{to:"/settings",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},{default:m(()=>[...a[6]||(a[6]=[D(" Settings ",-1)])]),_:1}),a[7]||(a[7]=e("hr",{class:"my-1"},null,-1)),e("button",{onClick:R,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," Logout ")])):y("",!0)])])])]),c.value?(r(),p("div",{key:0,class:"fixed inset-0 z-40 bg-black/30 md:hidden",onClick:H,"aria-hidden":"true"})):y("",!0),e("aside",{id:"mobile-sidebar",class:k(["fixed inset-y-0 left-0 z-50 w-72 bg-white shadow-lg transform transition-transform duration-200 ease-out md:hidden flex flex-col h-full",c.value?"translate-x-0":"-translate-x-full"]),role:"dialog","aria-modal":"true","aria-label":"Navigation"},[e("div",Fe,[a[8]||(a[8]=e("span",{class:"font-medium text-gray-900"},"Menu",-1)),e("button",{class:"p-2 rounded-lg hover:bg-gray-100","aria-label":"Close navigation",onClick:H},[d(h(ne),{class:"w-5 h-5 text-gray-700"})])]),e("nav",Be,[e("ul",Ee,[(r(),p(F,null,B(N,s=>e("li",{key:s.name},[d(o,{to:s.path,class:k(["flex items-center px-5 py-3 text-gray-700 hover:bg-gray-100 transition-colors",S(s.path)?"bg-red-50 text-red-600 border-l-4 border-red-600":""])},{default:m(()=>[e("span",Ae,[(r(),w(E(s.icon),{class:"w-5 h-5"}))]),e("span",null,A(s.label),1)]),_:2},1032,["to","class"])])),64))])])],2),e("div",Ie,[e("aside",Ue,[e("nav",qe,[e("ul",Pe,[(r(),p(F,null,B(N,s=>e("li",{key:s.name,class:k(s.name==="help-support"?"border-t border-gray-300 pt-4":"")},[d(o,{to:s.path,class:k(["flex items-center px-5 py-3 text-gray-700 hover:bg-gray-100 transition-colors",S(s.path)?"bg-red-50 text-red-600 border-l-4 border-red-600":""])},{default:m(()=>[e("span",Ze,[(r(),w(E(s.icon),{class:"w-5 h-5"}))]),e("span",null,A(s.label),1)]),_:2},1032,["to","class"])],2)),64))])])]),e("main",$e,[ae(t.$slots,"default",{},void 0,!0)])])])}}},Je=G(Oe,[["__scopeId","data-v-0aceddda"]]);export{Je as C};
