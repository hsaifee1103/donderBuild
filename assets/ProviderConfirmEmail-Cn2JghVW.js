import{l as y,c as p,o as v,w as b,m as x,r as l,b as w,e as h,k as E,u as k,a as s,f as C,g as S,n as g,t as m,h as _,i as A,v as L}from"./app-U24E4X8J.js";import{_ as P}from"./AuthLayout-Dx88WwOc.js";const q={name:"ProviderConfirmEmail",components:{AuthLayout:P},setup(){const c=k(),e=h(),n=l(""),o=l(!1),a=l(""),u=l(""),i=l(""),t=l(""),f=l("");return w(()=>{u.value=e.query.maskedEmail||"",i.value=e.query.mobile||"",t.value=e.query.countryCode||"",f.value=localStorage.getItem("forgotPasswordEmail")||"",localStorage.removeItem("forgotPasswordEmail")}),{email:n,isLoading:o,errorMessage:a,maskedEmail:u,handleSubmit:async()=>{o.value=!0,a.value="";try{if(n.value.toLowerCase()!==f.value.toLowerCase()){a.value="The email you entered does not match our records. Please try again.",o.value=!1;return}const d={email:n.value,mobile:i.value,country_code:t.value,user_type:"provider"},r=await E.post("/provider/password/forgot",d);r.data&&r.data.success?c.push({path:"/provider/forgot-password/otp",query:{email:n.value,mobile:i.value,countryCode:t.value}}):r.data.errors&&Array.isArray(r.data.errors)?a.value=r.data.errors.join(", "):r.data.message?a.value=r.data.message:a.value="Failed to send verification code."}catch(d){if(console.error("Error sending OTP:",d),d.response){const r=d.response.data;r.errors&&Array.isArray(r.errors)?a.value=r.errors.join(", "):r.message?a.value=r.message:a.value="An error occurred while sending the verification code."}else a.value="Network error. Please check your connection."}finally{o.value=!1}}}}},M={class:"w-full max-w-md mx-auto"},B={class:"text-gray-600 mb-8 text-center"},N={class:"font-medium text-gray-900"},T={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},V=["disabled"];function D(c,e,n,o,a,u){const i=x("AuthLayout");return v(),p(i,{link:"/login"},{default:b(()=>[s("div",M,[e[7]||(e[7]=s("h1",{class:"text-2xl font-bold text-gray-900 mb-2 text-center"},"Confirm Email",-1)),s("p",B,[e[2]||(e[2]=g(" We need to confirm your email address to send you instructions to reset your password. ",-1)),e[3]||(e[3]=s("br",null,null,-1)),e[4]||(e[4]=s("br",null,null,-1)),e[5]||(e[5]=g(" Your registered email is: ",-1)),s("span",N,m(o.maskedEmail),1)]),o.errorMessage?(v(),C("div",T,m(o.errorMessage),1)):S("",!0),s("form",{onSubmit:e[1]||(e[1]=_((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),class:"space-y-6"},[s("div",null,[e[6]||(e[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Enter your full email address",-1)),A(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.email=t),type:"email",placeholder:"Enter your email here",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none",required:""},null,512),[[L,o.email]])]),s("button",{type:"submit",disabled:o.isLoading,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white font-medium py-3 px-4 rounded-lg transition-colors"},m(o.isLoading?"Sending...":"Continue"),9,V)],32)])]),_:1})}const F=y(q,[["render",D]]);export{F as default};
