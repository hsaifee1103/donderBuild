import{r as g,d as M,e as H,c as N,o as y,w as x,u as P,m as T,a as t,f as h,g as C,t as f,n as b,j as w,h as z,i as A,v as E,k as L}from"./app-U24E4X8J.js";import{_ as U}from"./AuthLayout-Dx88WwOc.js";import{C as q}from"./CountrySelector-CzGpvy85.js";import"./countries-DXaTS7mb.js";/* empty css                                                                        */const j={class:"text-center mb-8"},F={class:"text-gray-600 text-lg"},G={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},D={key:1,class:"mb-4 p-3 bg-yellow-50 text-yellow-700 rounded-lg"},I={class:"mt-2"},R={class:"flex space-x-3"},O={class:"w-1/3"},Y=["disabled"],Z={key:2,class:"space-y-4"},K={class:"mt-8 text-center"},W={class:"text-gray-600"},oe={__name:"SignupMobile",setup(J){const V=H(),_=P(),s=g(""),m=g(!1),o=g(""),p=g(""),u=g({name:"United Kingdom",dial_code:"+44",code:"GB",flag:"gb"}),i=M(()=>V.params.userType),B=M(()=>i.value==="cust"?"car services":"garage business"),S=l=>{const e=l.replace(/[\s-]/g,"");return/^[0-9]{7,15}$/.test(e)},$=async()=>{var l,e,d,a,k;if(!s.value.trim()){o.value="Please enter your mobile number.";return}if(!S(s.value)){o.value="Please enter a valid mobile number (7â€“15 digits).";return}m.value=!0,o.value="",p.value="";try{const n={country_code:u.value.dial_code,mobile:s.value,usertype:i.value=="cust"?"cust":"garage",fcm_token:"eOJLsFzYdUeimHNV8fY_m8:APA91bHiKHyu4IZdPLIPuAcUeWw_85-ieyNT3oRvFHMbVeL9_nG7zCpi51eEvyybZiN8GEsHxOvzlvuVBypruqxd-n4q6aZhyi58ucpeGTDWLiSXU8BQaH8"};console.log("Attempting signup with data:",n);const r=await L.post("/signup",n);if(console.log("Signup response:",r.data),r.data&&r.data.success){if(((e=(l=r.data.data)==null?void 0:l.customer)==null?void 0:e.isUserExist)===1){const{first_name:c,last_name:v}=r.data.data.customer;p.value=`This mobile number is already registered to ${c} ${v}. Please log in instead.`;return}if(((a=(d=r.data.data)==null?void 0:d.provider)==null?void 0:a.isUserExist)===1){const{first_name:c,last_name:v}=r.data.data.provider;p.value=`This mobile number is already registered to ${c} ${v} as a provider. Please log in instead.`;return}i.value==="garage"?_.push({path:`/signup/garage-info/${i.value}`,query:{contact:s.value,countryCode:u.value.dial_code,mobile:s.value}}):_.push({path:`/signup/otp/${i.value}`,query:{contact:s.value,countryCode:u.value.dial_code,mobile:s.value}})}else o.value=((k=r.data)==null?void 0:k.message)||"Signup failed. Please try again."}catch(n){if(console.error("Signup error:",n),n.response){const r=n.response.status,c=n.response.data;if(r===422){const v=c.errors||[];o.value=v.join(", ")||"Invalid input data."}else o.value=c.message||"An error occurred during signup."}else n.request?o.value="Network error. Please check your connection.":o.value="An unexpected error occurred."}finally{m.value=!1}};return(l,e)=>{const d=T("router-link");return y(),N(U,null,{default:x(()=>[t("div",j,[e[6]||(e[6]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Enter Your Mobile Number",-1)),t("p",F," Enter your mobile number to create your account and manage your "+f(B.value)+" easily. ",1)]),o.value?(y(),h("div",G,f(o.value),1)):C("",!0),p.value?(y(),h("div",D,[b(f(p.value)+" ",1),t("div",I,[w(d,{to:{path:"/login",query:{mobile:s.value,countryCode:u.value.dial_code,userType:i.value}},class:"text-red-500 hover:text-red-600 font-medium"},{default:x(()=>[...e[7]||(e[7]=[b(" Click here to log in ",-1)])]),_:1},8,["to"])])])):C("",!0),t("form",{onSubmit:z($,["prevent"]),class:"space-y-6"},[t("div",R,[t("div",O,[w(q,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a)},null,8,["modelValue"])]),A(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),onInput:e[2]||(e[2]=a=>s.value=s.value.replace(/[^0-9]/g,"")),type:"tel",inputmode:"numeric",pattern:"[0-9]*",placeholder:"(000) 000 0000",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg",required:""},null,544),[[E,s.value]])]),t("button",{type:"submit",disabled:m.value,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white font-semibold py-4 px-6 rounded-lg transition-colors text-lg"},f(m.value?"Processing...":"Continue"),9,Y)],32),e[13]||(e[13]=t("div",{class:"my-8 relative text-center"},[t("span",{class:"text-gray-500 bg-white px-4 relative z-10"},"OR"),t("div",{class:"absolute left-0 right-0 h-px bg-gray-300 top-1/2"})],-1)),i.value==="customer"?(y(),h("div",Z,[t("button",{onClick:e[3]||(e[3]=a=>l.handleSocialLogin("apple")),class:"w-full flex items-center justify-center space-x-3 py-4 px-6 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},[...e[8]||(e[8]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})],-1),t("span",{class:"text-gray-700 font-medium"},"Continue with Apple",-1)])]),t("button",{onClick:e[4]||(e[4]=a=>l.handleSocialLogin("google")),class:"w-full flex items-center justify-center space-x-3 py-4 px-6 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24"},[t("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})],-1),t("span",{class:"text-gray-700 font-medium"},"Continue with Google",-1)])]),t("button",{onClick:e[5]||(e[5]=a=>l.handleSocialLogin("facebook")),class:"w-full flex items-center justify-center space-x-3 py-4 px-6 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1),t("span",{class:"text-gray-700 font-medium"},"Continue with Facebook",-1)])])])):C("",!0),t("div",K,[t("p",W,[e[12]||(e[12]=b(" Already have an account? ",-1)),w(d,{to:"/login",class:"text-red-500 hover:text-red-600 font-medium"},{default:x(()=>[...e[11]||(e[11]=[b("Log in",-1)])]),_:1})])])]),_:1})}}};export{oe as default};
