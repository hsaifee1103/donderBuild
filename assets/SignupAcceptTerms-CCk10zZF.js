import{r as c,b as f,u as h,e as b,c as x,o as m,w,a as e,f as _,g as k,t as y,h as A,i as P,B as T,k as S}from"./app-CeYD0-mp.js";import{_ as D}from"./AuthLayout-BYA2XhzW.js";const I={class:"w-full max-w-md mx-auto"},B={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},q={class:"flex items-start"},N={class:"flex items-center h-5"},C=["disabled"],L={__name:"SignupAcceptTerms",props:{userType:{type:String,required:!0}},setup(p){const l=b(),n=h(),u=p,r=c(!1),o=c(!1),s=c(""),g=async()=>{var i;if(!r.value){s.value="You must agree to the terms and conditions";return}o.value=!0,s.value="";try{const t={fcm_token:"eOJLsFzYdUeimHNV8fY_m8:APA91bHiKHyu4IZdPLIPuAcUeWw_85-ieyNT3oRvFHMbVeL9_nG7zCpi51eEvyybZiN8GEsHxOvzlvuVBypruqxd-n4q6aZhyi58ucpeGTDWLiSXU8BQaH8"};console.log("Accepting terms with data:",t);const a=await S.post("/accept-terms-and-conditions",t);console.log("Accept terms response:",a.data),a.data&&a.data.success?(a.data.data.customer&&localStorage.setItem("userData",JSON.stringify(a.data.data.customer)),u.userType==="cust"?n.push("/"):n.push("/garage-dashboard")):s.value=((i=a.data)==null?void 0:i.message)||"Failed to accept terms. Please try again."}catch(t){if(console.error("Accept terms error:",t),t.response){const a=t.response.status,d=t.response.data;if(a===422){const v=d.errors||[];s.value=v.join(", ")||"Invalid input data."}else s.value=d.message||"An error occurred while accepting terms."}else t.request?s.value="Network error. Please check your connection.":s.value="An unexpected error occurred."}finally{o.value=!1}};return f(()=>{localStorage.getItem("authToken")||n.push(`/signup/mobile/${u.userType}`),l.query.email&&console.log("Email from query:",l.query.email)}),(i,t)=>(m(),x(D,null,{default:w(()=>[e("div",I,[t[2]||(t[2]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Accept Donderstorm Terms & Review Privacy Notice"),e("p",{class:"text-gray-600"}," Please review and accept our terms and privacy policy to complete your registration. ")],-1)),s.value?(m(),_("div",B,y(s.value),1)):k("",!0),t[3]||(t[3]=e("div",{class:"bg-gray-50 rounded-lg p-4 mb-6 max-h-60 overflow-y-auto"},[e("h3",{class:"font-semibold text-gray-900 mb-2"},"Terms of Service"),e("p",{class:"text-sm text-gray-600 mb-4"}," By selecting 'I Agree' below, I agree to Donderstorm's Terms of Service and acknowledge that Donderstorm will handle my data in accordance with its Privacy Policy. I understand that I can change my communication preferences at any time in my account settings. "),e("h3",{class:"font-semibold text-gray-900 mb-2"},"Privacy Policy"),e("p",{class:"text-sm text-gray-600 mb-4"}," Donderstorm respects your privacy and is committed to protecting your personal data. This privacy policy will inform you as to how we look after your personal data when you visit our website or use our services and tell you about your privacy rights and how the law protects you. "),e("h3",{class:"font-semibold text-gray-900 mb-2"},"Age Confirmation"),e("p",{class:"text-sm text-gray-600"}," By creating an account, you confirm that you are at least 18 years of age and have the legal capacity to enter into a binding agreement with Donderstorm. ")],-1)),e("form",{onSubmit:A(g,["prevent"]),class:"space-y-6"},[e("div",q,[e("div",N,[P(e("input",{id:"agree","onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),type:"checkbox",class:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500",required:""},null,512),[[T,r.value]])]),t[1]||(t[1]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"agree",class:"font-medium text-gray-700"}," I agree to the Donderstorm Terms of Service and Privacy Policy "),e("p",{class:"text-gray-500"},"I am at least 18 years of age.")],-1))]),e("button",{type:"submit",disabled:o.value||!r.value,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 px-4 rounded-lg transition-colors"},y(o.value?"Processing...":"Agree & Continue"),9,C)],32)])]),_:1}))}};export{L as default};
