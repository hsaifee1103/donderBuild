import{l as B,r as t,d as P,c as V,o as d,w as A,u as E,a as e,E as I,j as S,i as b,f as i,g as C,v as g,q as p,k as U,I as f}from"./app-DJPj3-n2.js";import{P as D}from"./ProviderDashboardLayout-Dx-s-8A8.js";import{B as L}from"./BackIcon-lq4datRr.js";import"./NotificationDropdown-DQWgBRpK.js";import"./x-BthwGwRq.js";const _={class:"change-password-wrapper"},z={class:"header"},R={class:"card"},M={key:0,class:"error-msg"},Y={key:1,class:"validation-box"},Z=["disabled"],$={key:0,class:"loader"},j={key:1},q={__name:"ChangePassword",setup(F){const k=E(),u=t(""),l=t(""),r=t(""),n=t(!1),v=t(!1),w=t(!1),c=t(!1),m=t(!1),y=P(()=>r.value.length>0&&l.value!==r.value),h=P(()=>!u.value||!l.value||!r.value||y.value||!v.value||!w.value||!c.value||!m.value),x=o=>{v.value=o.length>=8,w.value=/[A-Za-z]/.test(o),c.value=/[0-9]/.test(o),m.value=/[^A-Za-z0-9]/.test(o)},N=async()=>{var s;if(n.value)return;n.value=!0;const o=JSON.parse(localStorage.getItem("userData")||"{}");try{const a=await U.post("/providerChangePassword",{provider_id:o.id,current_password:u.value,new_password:l.value,new_password_confirmation:r.value});a.data.success?(f({type:"success",title:"Password Updated",message:"Your password has been changed successfully."}),k.back()):f({type:"error",title:"Update Failed",message:((s=a.data.errors)==null?void 0:s[0])||a.data.message||"Error updating password."})}catch(a){f({type:"error",title:"Error",message:a.message||"Something went wrong."})}n.value=!1};return(o,s)=>(d(),V(D,null,{default:A(()=>[e("div",_,[e("div",z,[e("button",{class:"back-btn",onClick:s[0]||(s[0]=a=>I(k).back())},[S(L)]),s[5]||(s[5]=e("h1",{class:"title"},"Change Password",-1))]),e("div",R,[s[11]||(s[11]=e("label",{class:"input-label"},"Current password",-1)),b(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=a=>u.value=a),class:"input-box",placeholder:"Enter current password"},null,512),[[g,u.value]]),s[12]||(s[12]=e("div",{class:"divider"},null,-1)),s[13]||(s[13]=e("label",{class:"input-label"},"New password",-1)),b(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=a=>l.value=a),class:"input-box",placeholder:"Enter new password",onInput:s[3]||(s[3]=a=>x(l.value))},null,544),[[g,l.value]]),s[14]||(s[14]=e("label",{class:"input-label"},"Re-enter new password",-1)),b(e("input",{type:"password","onUpdate:modelValue":s[4]||(s[4]=a=>r.value=a),class:"input-box",placeholder:"Re-enter new password"},null,512),[[g,r.value]]),y.value?(d(),i("p",M," * New password does not match. ")):C("",!0),l.value.length>0?(d(),i("div",Y,[s[10]||(s[10]=e("p",{class:"validation-title"},"Your password must include",-1)),e("div",{class:p(["validation-row",{valid:v.value}])},[...s[6]||(s[6]=[e("span",null,"• At least 8 characters",-1)])],2),e("div",{class:p(["validation-row",{valid:w.value}])},[...s[7]||(s[7]=[e("span",null,"• At least one letter",-1)])],2),e("div",{class:p(["validation-row",{valid:c.value}])},[...s[8]||(s[8]=[e("span",null,"• At least one number",-1)])],2),e("div",{class:p(["validation-row",{valid:m.value}])},[...s[9]||(s[9]=[e("span",null,"• At least one special character",-1)])],2)])):C("",!0),e("button",{class:"submit-btn",disabled:h.value||n.value,onClick:N},[n.value?(d(),i("span",$)):(d(),i("span",j,"Change Password"))],8,Z)])])]),_:1}))}},K=B(q,[["__scopeId","data-v-b1079d5f"]]);export{K as default};
