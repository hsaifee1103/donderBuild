import{_ as f}from"./AuthLayout-C8DpIk_a.js";import{l as h,c as g,o as l,w as y,m as b,a as s,n as p,t as c,h as v,f as d,F as w,p as T,i as I,q as P,v as O}from"./app-BPEm73JO.js";const C={name:"OTPVerification",components:{AuthLayout:f},data(){return{otpDigits:["","","",""],otpInputs:[],isSubmitting:!1,resendCountdown:59,canResend:!1,countdownInterval:null}},computed:{userType(){return this.$route.params.userType},contactInfo(){return this.$route.query.contact||"jsmith.praveen88@gmail.com"},isOTPComplete(){return this.otpDigits.every(t=>t!=="")}},mounted(){this.$nextTick(()=>{this.otpInputs[0]&&this.otpInputs[0].focus()}),this.startCountdown()},beforeUnmount(){this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{handleOTPInput(t,e){const a=e.target.value;if(!/^\d*$/.test(a)){this.otpDigits[t]="";return}this.otpDigits[t]=a,a&&t<3&&this.otpInputs[t+1]&&this.otpInputs[t+1].focus()},handleKeyDown(t,e){e.key==="Backspace"&&!this.otpDigits[t]&&t>0&&this.otpInputs[t-1]&&this.otpInputs[t-1].focus()},async submitOTP(){if(this.isOTPComplete){this.isSubmitting=!0;try{const t=this.otpDigits.join("");console.log("[v0] Submitting OTP:",t,"for user type:",this.userType),await new Promise(e=>setTimeout(e,1500)),this.$router.push({name:"PasswordEntry",params:{userType:this.userType},query:{contact:this.contactInfo,userName:"Jessica"}})}catch(t){console.error("[v0] OTP verification failed:",t)}finally{this.isSubmitting=!1}}},async resendOTP(){console.log("[v0] Resending OTP to:",this.contactInfo),this.resendCountdown=59,this.canResend=!1,this.startCountdown();try{await new Promise(t=>setTimeout(t,1e3)),console.log("[v0] OTP resent successfully")}catch(t){console.error("[v0] Failed to resend OTP:",t)}},startCountdown(){this.countdownInterval=setInterval(()=>{this.resendCountdown--,this.resendCountdown<=0&&(this.canResend=!0,clearInterval(this.countdownInterval))},1e3)}}},_={class:"text-center mb-8"},x={class:"text-gray-600 leading-relaxed"},D={class:"font-semibold text-gray-900"},k={class:"flex justify-center space-x-4"},S=["onUpdate:modelValue","onInput","onKeydown"],R=["disabled"],V={class:"text-center mt-6"},B={key:1,class:"text-red-500 font-semibold"};function K(t,e,a,L,o,n){const m=b("AuthLayout");return l(),g(m,null,{default:y(()=>[s("div",_,[e[6]||(e[6]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Verification",-1)),s("p",x,[e[2]||(e[2]=p(" We've sent OTP to your email address at ",-1)),e[3]||(e[3]=s("br",null,null,-1)),s("span",D,c(n.contactInfo),1),e[4]||(e[4]=s("br",null,null,-1)),e[5]||(e[5]=p(" Please enter 4 digit code you receive. ",-1))])]),s("form",{onSubmit:e[0]||(e[0]=v((...u)=>n.submitOTP&&n.submitOTP(...u),["prevent"])),class:"space-y-6"},[s("div",k,[(l(!0),d(w,null,T(o.otpDigits,(u,r)=>I((l(),d("input",{key:r,ref_for:!0,ref:i=>o.otpInputs[r]=i,"onUpdate:modelValue":i=>o.otpDigits[r]=i,onInput:i=>n.handleOTPInput(r,i),onKeydown:i=>n.handleKeyDown(r,i),type:"text",maxlength:"1",class:P(["w-16 h-16 text-center text-2xl font-semibold border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none transition-colors",{"border-red-500":o.otpDigits[r]}])},null,42,S)),[[O,o.otpDigits[r]]])),128))]),s("button",{type:"submit",disabled:!n.isOTPComplete||o.isSubmitting,class:"w-full bg-red-500 text-white py-4 rounded-lg font-semibold text-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},c(o.isSubmitting?"Submitting...":"Submit"),9,R)],32),s("div",V,[o.canResend?(l(),d("button",{key:0,onClick:e[1]||(e[1]=(...u)=>n.resendOTP&&n.resendOTP(...u)),class:"text-red-500 font-semibold hover:text-red-600 transition-colors"}," Resend Code ")):(l(),d("span",B," Resend Code ("+c(o.resendCountdown)+"s) ",1))])]),_:1})}const A=h(C,[["render",K]]);export{A as default};
