import{l as I,r as c,d as n,e as R,b as G,c as V,o as m,w as K,I as C,u as P,k as U,a as t,n as J,t as a,f as _,F as q,p as z,j as Q,M as f}from"./app-DNlZ5eWp.js";import{_ as W}from"./MainLayout-B-T0i9xv.js";import"./NotificationDropdown-CtzNW0ed.js";const X={class:"min-h-screen bg-gray-50"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},t1={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},e1={class:"lg:col-span-2"},s1={class:"bg-white border border-gray-200 rounded-xl overflow-hidden"},o1={class:"p-6 sm:p-7"},a1={class:"rounded-lg border border-green-200 bg-green-50 p-5 sm:p-6"},n1={class:"flex gap-3"},i1={class:"min-w-0"},r1={class:"text-sm sm:text-base text-green-700 mt-2"},l1={class:"font-semibold"},d1={class:"px-6 sm:px-7 pb-6 sm:pb-7"},c1={class:"flex gap-6"},u1={class:"md:w-[62%]"},p1={class:"border border-gray-200 rounded-lg p-5"},g1={class:"mt-4 flex flex-wrap gap-3"},m1={class:"lg:col-span-1"},C1={class:"bg-white border border-gray-200 rounded-xl sticky top-6"},f1={class:"px-6 py-6 space-y-6"},x1={class:"space-y-1"},v1={class:"font-semibold text-gray-900"},h1={class:"flex items-start justify-between gap-4"},b1={class:"text-5xl font-bold tracking-tight text-gray-900"},_1={class:"text-sm text-gray-600"},y1={class:"font-medium"},w1={class:"space-y-2 mb-4 border-b pb-4 border-gray-300"},k1={class:"flex justify-between items-center text-sm"},L1={class:"text-gray-600 truncate flex items-center gap-2"},B1={class:"text-gray-600 text-sm"},M1={class:"font-medium text-gray-900"},N1={class:"flex items-center text-sm text-gray-600 mt-1"},A1={class:"bg-yellow-500 text-black px-2 py-1 rounded font-medium"},D1={class:"flex items-center text-xs text-gray-500 mt-2 space-x-4 list-disc"},j1={class:"space-y-4"},T1={class:"font-medium text-gray-900"},Z1={class:"mt-1 flex items-center text-sm text-gray-500 gap-1"},S1={class:"font-medium text-gray-900"},O1={class:"flex items-center justify-between text-lg font-bold pt-3 border-t border-gray-200"},F1={__name:"BookingConfirmed",setup(H1){const y=R(),w=P(),i=c(null),x=c(!0),u=c([]),v=c(""),h=c(""),p=c(""),k=n(()=>y.params.booking_id),L=async()=>{var s,e;try{x.value=!0;const o=JSON.parse(localStorage.getItem("userData")||"{}"),g=o.id||o.customer_id;if(!g){C({type:"error",title:"Authentication Error",message:"User not authenticated. Please log in again.",confirmButtonText:"OK"}),w.push("/login");return}let r=await U.post("/getBookingsByCustomer",{customer_id:g,booking_id:k.value});if(r=r.data,console.log("Booking details response:",r),r.data&&r.data.bookings&&r.data.bookings.length>0){const l=r.data.bookings[0];i.value=l,v.value=l.booking_ref||"",h.value=l.booking_date||"",p.value=l.booking_time||"",l.services&&(u.value=l.services.map(d=>({id:d.id,service_name:d.sub_category_name||d.category_name||"Service",category_id:d.cat_id,category_name:d.category_name||"Category",price:d.price,service_duration:"N/A"})))}else C({type:"error",title:"Error",message:"Booking details not found.",confirmButtonText:"OK"})}catch(o){C({type:"error",title:"Error",message:((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||o.message||"An error occurred",confirmButtonText:"OK"}),console.error("Error fetching booking details:",o)}finally{x.value=!1}},B=s=>s?(typeof s=="string"?new Date(s):s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short",year:"numeric"}):"",b=s=>{if(!s)return"";const[e,o]=s.split(":").map(Number);return`${e%12||12}:${o.toString().padStart(2,"0")}`},M=s=>s?b(s):"",N=n(()=>{var s;return((s=i.value)==null?void 0:s.business_name)||"Garage"});n(()=>{var e;const s=(e=i.value)==null?void 0:e.business_locations;return s?`${s.city}, ${s.state}, ${s.country}`:"Location not available"});const A=n(()=>u.value.reduce((s,e)=>s+parseFloat(e.price||0),0)),D=n(()=>0),j=n(()=>{var s;return(s=i.value)!=null&&s.total_price?parseFloat(i.value.total_price):A.value+D.value}),T=n(()=>"Duration not specified"),Z=n(()=>{var s,e;return((e=(s=i.value)==null?void 0:s.cardetails)==null?void 0:e.car_make)||"Unknown"}),S=n(()=>{var s,e;return((e=(s=i.value)==null?void 0:s.cardetails)==null?void 0:e.car_model)||"Vehicle"}),O=n(()=>{var s,e;return((e=(s=i.value)==null?void 0:s.cardetails)==null?void 0:e.registrationNumber)||"No Registration"}),F=n(()=>{var s,e;return((e=(s=i.value)==null?void 0:s.cardetails)==null?void 0:e.fuelType)||"N/A"}),H=n(()=>{var s,e;return((e=(s=i.value)==null?void 0:s.cardetails)==null?void 0:e.transmission)||"N/A"}),$=n(()=>{var s,e;return((e=(s=i.value)==null?void 0:s.cardetails)==null?void 0:e.yearOfManufacture)||"N/A"});n(()=>null);const E=s=>f("svg",{class:`h-4 w-4 ${s.class||""}`,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[f("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"}),f("path",{d:"M12 7v5l3 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]);return G(()=>{L()}),(s,e)=>(m(),V(W,null,{default:K(()=>[t("main",X,[t("div",Y,[t("div",t1,[t("section",e1,[t("div",s1,[t("div",o1,[t("div",a1,[t("div",n1,[e[5]||(e[5]=t("div",{class:"h-9 w-9 rounded-full flex items-center justify-center shrink-0","aria-hidden":"true"},[t("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M38.592 19.9996C39.2098 19.2803 39.6427 18.421 39.8532 17.4965C40.0637 16.5719 40.0454 15.61 39.8 14.694C39.5545 13.7781 39.0893 12.9359 38.4447 12.2405C37.8001 11.5451 36.9956 11.0175 36.1009 10.7034C36.2762 9.77148 36.2214 8.81087 35.9414 7.9049C35.6614 6.99893 35.1646 6.17496 34.494 5.50448C33.8234 4.834 32.9994 4.33727 32.0934 4.05737C31.1874 3.77747 30.2268 3.72286 29.2949 3.89829C28.981 3.00339 28.4535 2.19862 27.7581 1.55386C27.0627 0.909094 26.2204 0.443821 25.3043 0.198435C24.3883 -0.046952 23.4262 -0.0650346 22.5016 0.145757C21.577 0.356548 20.7178 0.789842 19.9986 1.40802C19.2793 0.790267 18.42 0.357364 17.4955 0.146864C16.5709 -0.0636364 15.6089 -0.0453755 14.693 0.200061C13.7771 0.445498 12.9349 0.910699 12.2395 1.55531C11.5441 2.19991 11.0165 3.00446 10.7024 3.89915C9.77053 3.72401 8.81002 3.77886 7.90416 4.05895C6.99831 4.33904 6.17447 4.8359 5.5041 5.50644C4.83373 6.17698 4.33708 7.00095 4.05722 7.90687C3.77736 8.8128 3.72276 9.77332 3.89814 10.7051C3.00345 11.0192 2.1989 11.5469 1.55429 12.2423C0.90968 12.9377 0.444477 13.7799 0.199041 14.6958C-0.0463965 15.6117 -0.06466 16.5736 0.14584 17.4982C0.35634 18.4228 0.789252 19.282 1.407 20.0014C0.789063 20.7207 0.356019 21.58 0.145459 22.5047C-0.0651008 23.4293 -0.0468214 24.3914 0.198723 25.3074C0.444268 26.2234 0.90965 27.0656 1.55448 27.761C2.19931 28.4563 3.00411 28.9838 3.899 29.2976C3.72348 30.2295 3.77802 31.1901 4.05791 32.096C4.3378 33.002 4.83458 33.826 5.50511 34.4964C6.17565 35.1669 6.99969 35.6635 7.9057 35.9433C8.81171 36.2231 9.77231 36.2775 10.7041 36.1019C11.0182 36.9966 11.5458 37.8011 12.2413 38.4457C12.9367 39.0903 13.7789 39.5555 14.6948 39.801C15.6107 40.0464 16.5726 40.0647 17.4972 39.8542C18.4217 39.6437 19.281 39.2108 20.0004 38.593C20.7197 39.2109 21.579 39.644 22.5037 39.8545C23.4283 40.0651 24.3904 40.0468 25.3064 39.8013C26.2224 39.5557 27.0646 39.0904 27.76 38.4455C28.4553 37.8007 28.9828 36.9959 29.2966 36.101C30.2285 36.2765 31.1891 36.2219 32.0951 35.942C33.0011 35.6621 33.8251 35.1654 34.4956 34.4949C35.1661 33.8243 35.6628 33.0003 35.9427 32.0944C36.2226 31.1884 36.2772 30.2278 36.1017 29.2959C36.9965 28.9819 37.8011 28.4543 38.4457 27.7588C39.0904 27.0634 39.5556 26.2211 39.8009 25.3052C40.0463 24.3892 40.0644 23.4272 39.8538 22.5026C39.6431 21.5781 39.21 20.7189 38.592 19.9996Z",fill:"#34A356"}),t("path",{d:"M16.4087 27.6331L10.8509 22.0787C10.64 21.8674 10.5215 21.5811 10.5215 21.2826C10.5215 20.984 10.64 20.6977 10.8509 20.4864L11.5261 19.8103C11.7374 19.5994 12.0237 19.4809 12.3222 19.4809C12.6208 19.4809 12.9071 19.5994 13.1184 19.8103L17.1585 23.8478L26.6731 13.7368C26.8779 13.5196 27.1604 13.3924 27.4588 13.3833C27.7572 13.3742 28.047 13.4839 28.2646 13.6882L28.958 14.3427C29.1755 14.5474 29.3028 14.8302 29.3119 15.1288C29.321 15.4273 29.2111 15.7173 29.0065 15.9349L18.0279 27.6079C17.9245 27.7181 17.8 27.8063 17.6619 27.8674C17.5237 27.9285 17.3747 27.9612 17.2236 27.9636C17.0726 27.9659 16.9226 27.9379 16.7826 27.8811C16.6426 27.8243 16.5154 27.74 16.4087 27.6331Z",fill:"white"})])],-1)),t("div",i1,[e[3]||(e[3]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-green-800"}," Thanks, your booking has been confirmed. ",-1)),e[4]||(e[4]=t("p",{class:"text-sm sm:text-base text-green-700 mt-2"}," Please check your email for receipt and booking details or visit Bookings to review your booking. ",-1)),t("p",r1,[e[2]||(e[2]=J(" Booking ref: ",-1)),t("span",l1,a(v.value),1)])])])])]),t("div",d1,[t("div",c1,[t("div",u1,[t("div",p1,[e[8]||(e[8]=t("div",{class:"flex items-start gap-3"},[t("div",{class:"h-9 w-9 rounded-lg flex items-center justify-center text-white font-bold text-lg select-none"},[t("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("rect",{width:"40",height:"40",rx:"6",fill:"#EC5B70"}),t("path",{d:"M20.6314 29.0347H18.0029C16.3565 29.0347 15.3961 27.1768 16.348 25.8336C16.7283 25.297 17.3452 24.9781 18.0029 24.9781H20.6315C22.0792 24.9764 23.4672 24.4006 24.4909 23.3769C25.5147 22.3531 26.0905 20.9652 26.0922 19.5174C26.0906 18.0696 25.5147 16.6816 24.491 15.6578C23.4673 14.634 22.0793 14.0582 20.6315 14.0565H18.0015C17.3438 14.0565 16.727 13.7376 16.3467 13.201C15.3948 11.8578 16.3552 10 18.0015 10H20.6316C21.2758 9.99983 21.9184 10.0646 22.5497 10.1934C23.162 10.3188 23.7604 10.5045 24.3362 10.7479C24.9021 10.9875 25.4435 11.2814 25.9528 11.6255C26.4582 11.9672 26.9299 12.3563 27.3614 12.7875C27.7927 13.219 28.1818 13.6907 28.5235 14.1962C28.8675 14.7055 29.1614 15.2469 29.401 15.8129C29.6444 16.3886 29.8301 16.9871 29.9555 17.5994C30.0842 18.2307 30.149 18.8732 30.1489 19.5175C30.149 20.1616 30.0842 20.8041 29.9555 21.4353C29.83 22.0477 29.6443 22.6462 29.401 23.2221C29.1613 23.788 28.8674 24.3295 28.5235 24.8388C28.1817 25.3441 27.7926 25.8157 27.3614 26.2472C26.9299 26.6785 26.4582 27.0677 25.9528 27.4094C25.4435 27.7533 24.9021 28.0473 24.3362 28.2871C23.7604 28.5303 23.162 28.716 22.5497 28.8415C21.9184 28.9702 21.2757 29.0349 20.6314 29.0347Z",fill:"white"}),t("path",{d:"M16.9629 24.9986C16.9629 24.9986 16.9629 24.9986 16.9628 24.9986H15.118C14.1913 24.9986 13.6517 23.9518 14.1893 23.197L15.7594 20.9923C16.3863 20.112 16.3863 18.931 15.7594 18.0507L14.7654 16.655C13.9865 15.5612 14.7684 14.0444 16.1111 14.0444C16.6455 14.0444 17.1469 14.3029 17.4569 14.7382L20.6499 19.2217C20.7697 19.39 20.7701 19.6157 20.6508 19.7844L16.9629 24.9986C16.9629 24.9986 16.9628 24.9986 16.9629 24.9986Z",fill:"white"}),t("path",{d:"M12.0394 30.053H11.9903C10.3279 30.053 9.36636 28.1683 10.3421 26.8223L10.4621 26.6568C10.7696 26.2326 11.2619 25.9814 11.7859 25.9814H12.4764C13.5239 25.9814 14.1298 27.1691 13.5149 28.0172L12.0392 30.0526C12.0391 30.0528 12.0392 30.053 12.0394 30.053Z",fill:"white"}),t("path",{d:"M12.9489 31.817C12.0652 32.3213 11.1189 31.263 11.7184 30.441C11.8961 30.1973 12.1795 30.0532 12.4811 30.0532C13.4494 30.0532 13.7899 31.3372 12.9489 31.817Z",fill:"white"})])]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"}," Get the donderstorm App for instant access "),t("p",{class:"text-sm text-rose-600 font-medium"}," to your booking information ")])],-1)),t("div",g1,[t("button",{type:"button",class:"inline-flex items-center gap-2 rounded-md bg-black text-white px-3 py-2",onClick:e[0]||(e[0]=o=>s.window.open("https://apps.apple.com/in/app/donderstorm/id6736373373","_blank"))},[...e[6]||(e[6]=[t("svg",{width:"23",height:"28",viewBox:"0 0 23 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M19.1757 14.8395C19.1891 13.8276 19.4644 12.8355 19.976 11.9554C20.4877 11.0753 21.219 10.3358 22.1021 9.8058C21.5411 9.02365 20.8011 8.37997 19.9407 7.92588C19.0804 7.47179 18.1235 7.21982 17.1459 7.18996C15.0607 6.97626 13.0391 8.40816 11.9765 8.40816C10.8933 8.40816 9.25731 7.21117 7.49556 7.24656C6.35601 7.2825 5.24543 7.60602 4.27203 8.18559C3.29863 8.76516 2.4956 9.58102 1.94119 10.5537C-0.460349 14.6131 1.33099 20.5791 3.6315 23.8605C4.7825 25.4673 6.12769 27.2621 7.88785 27.1984C9.61028 27.1287 10.2536 26.1261 12.3327 26.1261C14.3925 26.1261 14.996 27.1984 16.7919 27.158C18.6401 27.1287 19.8046 25.544 20.9152 23.922C21.7422 22.7772 22.3786 21.5118 22.8008 20.1729C21.727 19.7295 20.8107 18.9873 20.166 18.0389C19.5214 17.0905 19.177 15.9778 19.1757 14.8395Z",fill:"white"}),t("path",{d:"M15.7825 5.03214C16.7902 3.85106 17.2867 2.33298 17.1665 0.800293C15.6269 0.958164 14.2047 1.67655 13.1834 2.81231C12.684 3.36716 12.3015 4.01266 12.0578 4.7119C11.8141 5.41114 11.714 6.15042 11.7631 6.88748C12.5332 6.89522 13.295 6.73226 13.9912 6.41088C14.6875 6.08951 15.2999 5.61809 15.7825 5.03214Z",fill:"white"})],-1),t("span",{class:"text-xs leading-none"},[t("span",{class:"block text-[10px] opacity-80"},"Download on the"),t("span",{class:"block font-semibold -mt-0.5"},"App Store")],-1)])]),t("button",{type:"button",class:"inline-flex items-center gap-2 rounded-md bg-black text-white px-3 py-2",onClick:e[1]||(e[1]=o=>s.window.open("https://play.google.com/store/apps/details?id=com.app.donderstorm&pli=1","_blank"))},[...e[7]||(e[7]=[t("svg",{width:"24",height:"28",viewBox:"0 0 24 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.3869 13.408L0.700195 25.0067C0.701199 25.0088 0.701199 25.0118 0.702203 25.0139C1.03042 26.2733 2.1546 27.2002 3.48957 27.2002C4.02355 27.2002 4.52442 27.0524 4.95401 26.7937L4.98814 26.7732L17.0169 19.6754L11.3869 13.408Z",fill:"#EA4335"}),t("path",{d:"M22.1977 11.4331L22.1876 11.4259L16.9943 8.34765L11.1436 13.6717L17.0154 19.6743L22.1806 16.6268C23.086 16.1259 23.7012 15.1498 23.7012 14.0248C23.7012 12.906 23.095 11.935 22.1977 11.4331Z",fill:"#FBBC04"}),t("path",{d:"M0.699928 2.99284C0.635689 3.23508 0.601562 3.48964 0.601562 3.7524V24.2482C0.601562 24.5109 0.635689 24.7655 0.700932 25.0067L11.754 13.7047L0.699928 2.99284Z",fill:"#4285F4"}),t("path",{d:"M11.4662 14.0002L16.9968 8.34563L4.98212 1.2222C4.54549 0.954303 4.0356 0.80034 3.49057 0.80034C2.15561 0.80034 1.02942 1.72926 0.701198 2.98972C0.701198 2.99074 0.700195 2.99177 0.700195 2.9928L11.4662 14.0002Z",fill:"#34A853"})],-1),t("span",{class:"text-xs leading-none"},[t("span",{class:"block text-[10px] opacity-80"},"GET IT ON"),t("span",{class:"block font-semibold -mt-0.5"},"Google Play")],-1)])])])])]),e[9]||(e[9]=t("div",{class:"md:w-[38%]"},[t("div",{class:"border border-gray-200 rounded-lg overflow-hidden"},[t("img",{src:"/assets/images/app_preview.png",alt:"App preview",class:"w-full h-70 object-cover object-top"})])],-1))])])])]),t("aside",m1,[t("div",C1,[e[14]||(e[14]=t("div",{class:"px-6 py-5 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"Booking details")],-1)),t("div",f1,[t("div",x1,[t("h3",v1,a(N.value),1)]),t("div",h1,[t("div",b1,a(b(p.value)),1),t("div",_1,[t("div",y1,a(B(h.value)),1),t("div",null,a(M(p.value))+" ("+a(T.value)+")",1)])]),t("div",w1,[t("div",k1,[t("span",L1,[t("div",null,[t("p",B1,[t("h3",M1,a(Z.value||"Unknown"),1),t("div",N1,[t("span",A1,a(S.value||O.value||"No Registration"),1)]),t("ul",D1,[t("li",null,a(F.value||"N/A"),1),t("li",null,a(H.value||"N/A"),1),t("li",null,a($.value||"N/A"),1)])])])]),e[10]||(e[10]=t("span",{class:"font-medium"},[t("img",{src:"/assets/images/car_image.png",class:"h-16 w-24",alt:"",srcset:""})],-1))])]),t("div",null,[e[12]||(e[12]=t("h4",{class:"font-semibold text-gray-900 mb-3"},"Order Summary",-1)),t("div",j1,[(m(!0),_(q,null,z(u.value,o=>(m(),_("div",{key:o.id,class:"flex items-start justify-between gap-4"},[t("div",null,[t("div",T1,a(o.service_name),1),t("div",Z1,[Q(E,{class:"text-gray-400"}),t("span",null,a(o.service_duration||"N/A"),1)])]),t("div",S1,"£"+a(o.price),1)]))),128)),t("div",O1,[e[11]||(e[11]=t("div",null,"Total",-1)),t("div",null,"£"+a(j.value.toFixed(2)),1)])])]),e[13]||(e[13]=t("div",{class:"rounded-lg bg-green-50 border border-green-200 text-green-800 px-4 py-3"},[t("div",{class:"flex items-center gap-2"},[t("svg",{class:"h-5 w-5 text-green-600",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 8v4l3 3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M20 12a8 8 0 11-16 0 8 8 0 0116 0Z",stroke:"currentColor","stroke-width":"2",opacity:".4"})]),t("span",{class:"text-sm font-medium"},"Reschedule up to 1 day before appointment")])],-1))])])])])])])]),_:1}))}},R1=I(F1,[["__scopeId","data-v-5ef5c1dc"]]);export{R1 as default};
