import{r as f,d as R,e as z,b as D,c as E,o as a,w as S,k as I,a as t,f as r,g as p,F as c,p as d,q as m,t as n,n as N}from"./app-BPEm73JO.js";import{P as V}from"./ProviderDashboardLayout-DK9selkM.js";import"./NotificationDropdown-CEg50caZ.js";import"./x-C6CNGGpS.js";const q={class:"max-w-7xl mx-auto"},O={key:0,class:"flex justify-center mt-20"},P={key:1},A={class:"bg-white rounded-lg shadow-sm p-6 mt-6"},W={class:"flex flex-col items-center"},J={class:"flex items-center mb-2"},K={class:"flex"},Q={class:"text-lg font-medium text-gray-900"},T={class:"w-full mt-6 space-y-3"},U={class:"flex items-center justify-between"},G={class:"flex items-center"},H={class:"flex"},X={class:"flex items-center justify-between"},Y={class:"flex items-center"},Z={class:"flex"},$={class:"flex items-center justify-between"},tt={class:"flex items-center"},et={class:"flex"},st={class:"flex items-center justify-between"},lt={class:"flex items-center"},ot={class:"flex"},at={class:"border-t border-gray-200 mt-6 pt-4"},rt={class:"text-xs font-bold text-gray-500 uppercase tracking-wider"},nt={class:"mt-6 space-y-6"},it={class:"flex items-start"},ct={class:"flex-shrink-0 mr-4"},dt=["src","alt"],ut={key:1,class:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center"},ft={class:"flex-1"},mt={class:"flex items-center justify-between"},vt={class:"text-lg font-medium text-gray-900"},xt={class:"text-sm text-gray-500"},ht={key:0,class:"text-sm text-gray-500"},_t={class:"text-red-500 font-medium"},gt={class:"flex items-center mt-2"},pt={class:"flex"},yt={class:"mt-3 text-gray-700"},wt={key:0,class:"text-center py-12"},kt={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},bt={class:"bg-white rounded-lg p-6 max-w-md w-full"},Mt={class:"text-gray-600 mb-4"},Rt={__name:"Reviews",setup(Bt){const y=z(),h=f(!1),i=f(null),w=f([]),v=f([]),x=f(!1),_=f(""),k=R(()=>{if(y.params.providerId)return parseInt(y.params.providerId);const o=localStorage.getItem("userData");if(o)try{return JSON.parse(o).id}catch(e){console.error("Error parsing user data:",e)}return null}),M=async()=>{var o,e;if(!k.value){_.value="Provider ID not found",x.value=!0;return}h.value=!0;try{const s=await I.post("/getReviews",{provider_id:k.value});if(s.data&&s.data.success){const l=s.data.data;w.value=l.reviews||[],i.value=l.average_ratings,B()}else _.value=((e=(o=s.data)==null?void 0:o.errors)==null?void 0:e[0])||"Error while getting reviews.",x.value=!0}catch(s){console.error("Error fetching reviews:",s),_.value=s.message||"An error occurred while fetching reviews.",x.value=!0}finally{h.value=!1}},B=()=>{v.value=[...w.value].sort((o,e)=>{const s=new Date(o.created_at);return new Date(e.created_at)-s})},F=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),C=o=>o.toFixed(1),b=o=>{if(!o)return 0;const{value_for_money:e,staff_helpfulness:s,quality_of_work:l,communication:u}=o;return(parseFloat(e||0)+parseFloat(s||0)+parseFloat(l||0)+parseFloat(u||0))/4},j=o=>{if(!o)return 0;const{value_for_money:e,staff_helpfulness:s,quality_of_work:l,communication:u}=o;return(parseFloat(e||0)+parseFloat(s||0)+parseFloat(l||0)+parseFloat(u||0))/4},L=()=>{x.value=!1};return D(()=>{M()}),(o,e)=>(a(),E(V,null,{default:S(()=>[t("div",q,[e[15]||(e[15]=t("div",{class:"mt-5"},[t("h1",{class:"text-2xl px-6 font-bold text-gray-900"},"Reviews")],-1)),h.value?(a(),r("div",O,[...e[0]||(e[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"},null,-1)])])):(a(),r("div",P,[t("div",A,[t("div",W,[t("div",J,[t("div",K,[(a(),r(c,null,d(5,s=>t("svg",{key:s,class:m(["w-8 h-8",s<=Math.floor(b(i.value)||0)?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[1]||(e[1]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)),64))])]),t("div",Q,n(C(b(i.value)||0))+" â€¢ "+n(v.value.length)+" reviews ",1),t("div",T,[t("div",U,[t("div",G,[t("div",H,[(a(),r(c,null,d(5,s=>{var l;return t("svg",{key:s,class:m(["w-4 h-4",s<=Math.floor(parseFloat(((l=i.value)==null?void 0:l.value_for_money)||0))?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[2]||(e[2]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)}),64))])]),e[3]||(e[3]=t("span",{class:"text-sm font-medium text-gray-900"},"Value for money",-1))]),t("div",X,[t("div",Y,[t("div",Z,[(a(),r(c,null,d(5,s=>{var l;return t("svg",{key:s,class:m(["w-4 h-4",s<=Math.floor(parseFloat(((l=i.value)==null?void 0:l.staff_helpfulness)||0))?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[4]||(e[4]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)}),64))])]),e[5]||(e[5]=t("span",{class:"text-sm font-medium text-gray-900"},"Staff helpfulness",-1))]),t("div",$,[t("div",tt,[t("div",et,[(a(),r(c,null,d(5,s=>{var l;return t("svg",{key:s,class:m(["w-4 h-4",s<=Math.floor(parseFloat(((l=i.value)==null?void 0:l.quality_of_work)||0))?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[6]||(e[6]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)}),64))])]),e[7]||(e[7]=t("span",{class:"text-sm font-medium text-gray-900"},"Quality of work",-1))]),t("div",st,[t("div",lt,[t("div",ot,[(a(),r(c,null,d(5,s=>{var l;return t("svg",{key:s,class:m(["w-4 h-4",s<=Math.floor(parseFloat(((l=i.value)==null?void 0:l.communication)||0))?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[8]||(e[8]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)}),64))])]),e[9]||(e[9]=t("span",{class:"text-sm font-medium text-gray-900"},"Communication",-1))])])]),t("div",at,[t("h3",rt,n(v.value.length)+" REVIEWS",1)])]),t("div",nt,[(a(!0),r(c,null,d(v.value,s=>{var l,u;return a(),r("div",{key:s.id,class:"bg-white rounded-lg shadow-sm p-6"},[t("div",it,[t("div",ct,[(l=s.customer)!=null&&l.profile_image?(a(),r("img",{key:0,src:s.customer.profile_image,alt:s.customer_name,class:"h-12 w-12 rounded-full object-cover"},null,8,dt)):(a(),r("div",ut,[...e[10]||(e[10]=[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),t("div",ft,[t("div",mt,[t("div",null,[t("h4",vt,n(s.customer_name),1),t("p",xt,n(F(s.created_at)),1),(u=s.booking)!=null&&u.booking_ref?(a(),r("p",ht,[e[11]||(e[11]=N(" Booking ref: ",-1)),t("span",_t,n(s.booking.booking_ref),1)])):p("",!0)])]),t("div",gt,[t("div",pt,[(a(),r(c,null,d(5,g=>t("svg",{key:g,class:m(["w-5 h-5",g<=j(s)?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[12]||(e[12]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2)),64))])]),t("p",yt,n(s.review_text),1)])])])}),128))]),!h.value&&v.value.length===0?(a(),r("div",wt,[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),t("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No reviews yet",-1),t("p",{class:"mt-1 text-gray-500"},"When customers leave reviews, they'll appear here.",-1)])])):p("",!0)])),x.value?(a(),r("div",kt,[t("div",bt,[e[14]||(e[14]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Oops!",-1)),t("p",Mt,n(_.value),1),t("div",{class:"flex justify-end"},[t("button",{onClick:L,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600"}," OK ")])])])):p("",!0)])]),_:1}))}};export{Rt as default};
