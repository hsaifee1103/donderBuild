import{l as I,r as m,d as x,b as j,c as w,o as r,w as L,k as N,a as e,f as l,i as R,v as z,g as F,F as _,p as b,t as c}from"./app-IgbZzkPW.js";import{P as G}from"./ProviderDashboardLayout-Cb3-j8bR.js";import{D as O}from"./DateRangePicker-C7CUOsHT.js";import"./NotificationDropdown-r037V1rt.js";import"./x-CgxBf4w-.js";const P={class:"p-6 bg-white rounded-xl shadow-sm border border-gray-200"},T={class:"flex flex-col sm:flex-row justify-between gap-4 mb-6"},U={class:"flex items-center w-full sm:w-1/3 border border-gray-300 rounded-lg px-3 py-2"},$={class:"relative"},E=["value"],q={key:0},A={class:"text-lg font-semibold text-gray-800 mb-3"},H={class:"divide-y divide-gray-100"},J={class:"flex items-center space-x-3"},K=["src"],Q={class:"font-medium text-gray-800 truncate"},W={class:"text-gray-600 text-sm"},X={class:"text-gray-600 text-sm"},Y={class:"text-gray-800 font-medium"},Z={key:1,class:"text-center py-10 text-gray-500"},ee={__name:"Invoices",setup(te){const k=JSON.parse(localStorage.getItem("userData")||"{}").id,f=m({}),v=m(""),i=m(!1),n=m({start:new Date(new Date().setMonth(new Date().getMonth()-1)),end:new Date}),D=async()=>{try{const s=await N.post("/get-invoices",{provider_id:k});s.data.success&&(f.value=s.data.data)}catch(s){console.error("Error fetching invoices:",s)}},C=()=>i.value=!i.value,M=x(()=>{const s=n.value.start,t=n.value.end;return`${s.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})} - ${t.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`}),g=x(()=>{const s=v.value.toLowerCase(),t=n.value.start,o=n.value.end,d={};for(const[a,p]of Object.entries(f.value)){const h=p.filter(u=>{const S=u.customer_name.toLowerCase().includes(s),V=u.total_price.toString().includes(s),y=u.booking_date?new Date(u.booking_date):null,B=!y||y>=t&&y<=o;return(S||V)&&B});h.length>0&&(d[a]=h)}return d});return j(D),(s,t)=>(r(),w(G,null,{default:L(()=>[e("div",P,[t[6]||(t[6]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Invoices"),e("p",{class:"text-gray-500"},"Keep all your invoices organised in one place.")],-1)),e("div",T,[e("div",U,[t[3]||(t[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"})],-1)),R(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>v.value=o),type:"text",placeholder:"Search name, amount",class:"w-full outline-none text-gray-700 placeholder-gray-400"},null,512),[[z,v.value]])]),e("div",$,[e("input",{type:"text",readonly:"",onClick:C,value:M.value,class:"w-full sm:w-60 border border-gray-300 rounded-lg px-3 py-2 text-gray-700 cursor-pointer"},null,8,E),t[4]||(t[4]=e("svg",{class:"absolute right-3 top-2.5 w-5 h-5 text-gray-500 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),i.value?(r(),w(O,{key:0,modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o),show:i.value,onClose:t[2]||(t[2]=o=>i.value=!1),extraClasses:"top-full right-0 mt-2"},null,8,["modelValue","show"])):F("",!0)])]),g.value&&Object.keys(g.value).length?(r(),l("div",q,[(r(!0),l(_,null,b(g.value,(o,d)=>(r(),l("div",{key:d,class:"mb-8"},[e("h2",A,c(d),1),t[5]||(t[5]=e("div",{class:"grid grid-cols-4 font-semibold text-gray-600 text-sm border-b border-gray-200 pb-3 mb-2"},[e("div",null,"Customer Name"),e("div",null,"Total Services"),e("div",null,"Date"),e("div",null,"Total Amount")],-1)),e("div",H,[(r(!0),l(_,null,b(o,(a,p)=>(r(),l("div",{key:p,class:"grid grid-cols-4 items-center py-3 hover:bg-gray-50 transition"},[e("div",J,[e("img",{src:a.customer_profile_image||"https://static.vecteezy.com/system/resources/previews/036/594/092/non_2x/man-empty-avatar-photo-placeholder-for-social-networks-resumes-forums-and-dating-sites-male-and-female-no-photo-images-for-unfilled-user-profile-free-vector.jpg",class:"w-10 h-10 rounded-full object-cover border border-gray-200",alt:"User"},null,8,K),e("span",Q,c(a.customer_name),1)]),e("div",W,c(a.services.length)+" Services ",1),e("div",X,c(a.booking_date||"—"),1),e("div",Y," £"+c(a.total_price.toFixed(2)),1)]))),128))])]))),128))])):(r(),l("div",Z," No invoices found for this period. "))])]),_:1}))}},ie=I(ee,[["__scopeId","data-v-ab22223d"]]);export{ie as default};
