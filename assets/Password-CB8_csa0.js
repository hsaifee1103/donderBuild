import{l as b,r as i,b as C,c as M,o as n,w as P,y as j,a as s,f as l,g as u,t as w,i as g,x as _,k as A}from"./app-DJPj3-n2.js";import{C as B}from"./CustomerDashboardLayout-XBDnsAF3.js";import"./NotificationDropdown-DQWgBRpK.js";import"./x-BthwGwRq.js";const z={class:"max-w-7xl mx-auto"},D={class:"bg-white rounded-lg overflow-hidden"},L={class:"p-6"},E={key:0,class:"mb-6 p-4 bg-green-50 text-green-700 rounded-lg"},N={key:1,class:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg"},S={class:"flex items-start"},V={class:"space-y-6 shadow border p-6 rounded-lg border-gray-200 max-w-2xl"},U={class:"relative"},q=["type"],F={key:0,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I={key:1,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$={key:0,class:"mt-1 text-sm text-red-600"},J={class:"relative"},O=["type"],T={key:0,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y={key:1,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},G={key:0,class:"mt-1 text-sm text-red-600"},H={class:"relative"},K=["type"],Q={key:0,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R={key:1,class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:0,class:"mt-1 text-sm text-red-600"},X={class:"flex justify-end"},Z=["disabled"],ee={__name:"Password",setup(se){const t=i({current_password:"",new_password:"",new_password_confirmation:""}),p=i(!1),c=i(!1),v=i(!1),m=i(!1),d=i(""),o=i({}),f=i(!1),y=i(null),x=async()=>{try{await j();const r=localStorage.getItem("userData");if(r)try{const e=JSON.parse(r);y.value=e.id||e.customer_id}catch(e){console.error("Error parsing user data:",e)}}catch(r){console.error("Error loading user data:",r)}},h=()=>{o.value={};let r=!0;return t.value.current_password||(o.value.current_password="Current password is required.",r=!1),t.value.new_password?t.value.new_password.length<8&&(o.value.new_password="Password must be at least 8 characters long.",r=!1):(o.value.new_password="New password is required.",r=!1),t.value.new_password_confirmation?t.value.new_password!==t.value.new_password_confirmation&&(o.value.new_password_confirmation="Passwords do not match.",r=!1):(o.value.new_password_confirmation="Please confirm your new password.",r=!1),r},k=async()=>{if(d.value="",o.value={},!!h()){f.value=!0;try{const r={customer_id:y.value,current_password:t.value.current_password,new_password:t.value.new_password,new_password_confirmation:t.value.new_password_confirmation},e=await A.post("/customerChangePassword",r);e.data&&e.data.success?(m.value=!0,t.value={current_password:"",new_password:"",new_password_confirmation:""},setTimeout(()=>{m.value=!1},3e3)):e.data.errors&&Array.isArray(e.data.errors)&&e.data.errors.length>0?(d.value=e.data.errors.join(", "),e.data.errors.forEach(a=>{a.includes("Current password")?o.value.current_password=a:a.includes("new password")&&(o.value.new_password=a)})):e.data.message?d.value=e.data.message:d.value="Failed to change password. Please try again."}catch(r){console.error("Error changing password:",r),r.response&&r.response.data?r.response.data.errors&&Array.isArray(r.response.data.errors)?(d.value=r.response.data.errors.join(", "),r.response.data.errors.forEach(e=>{e.includes("Current password")?o.value.current_password=e:e.includes("new password")&&(o.value.new_password=e)})):r.response.data.message?d.value=r.response.data.message:d.value="An error occurred while changing your password. Please try again.":d.value="An error occurred while changing your password. Please try again."}finally{f.value=!1}}};return C(()=>{x()}),(r,e)=>(n(),M(B,null,{default:P(()=>[s("div",z,[e[19]||(e[19]=s("div",{class:"mt-5"},[s("h1",{class:"text-2xl px-6 font-bold text-gray-900"},"Password")],-1)),s("div",D,[s("div",L,[e[18]||(e[18]=s("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"Change Password",-1)),m.value?(n(),l("div",E,[...e[6]||(e[6]=[s("div",{class:"flex items-start"},[s("svg",{class:"h-5 w-5 text-green-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),s("p",null,"Your password has been updated successfully!")],-1)])])):u("",!0),d.value?(n(),l("div",N,[s("div",S,[e[7]||(e[7]=s("svg",{class:"h-5 w-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),s("p",null,w(d.value),1)])])):u("",!0),s("div",V,[s("div",null,[e[10]||(e[10]=s("label",{for:"current_password",class:"block text-sm font-medium text-gray-700 mb-1"}," Current Password ",-1)),s("div",U,[g(s("input",{id:"current_password","onUpdate:modelValue":e[0]||(e[0]=a=>t.value.current_password=a),type:p.value?"text":"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Enter your current password"},null,8,q),[[_,t.value.current_password]]),s("button",{type:"button",onClick:e[1]||(e[1]=a=>p.value=!p.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p.value?(n(),l("svg",F,[...e[8]||(e[8]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),l("svg",I,[...e[9]||(e[9]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),o.value.current_password?(n(),l("p",$,w(o.value.current_password),1)):u("",!0)]),s("div",null,[e[13]||(e[13]=s("label",{for:"new_password",class:"block text-sm font-medium text-gray-700 mb-1"}," New Password ",-1)),s("div",J,[g(s("input",{id:"new_password","onUpdate:modelValue":e[2]||(e[2]=a=>t.value.new_password=a),type:c.value?"text":"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Enter your new password"},null,8,O),[[_,t.value.new_password]]),s("button",{type:"button",onClick:e[3]||(e[3]=a=>c.value=!c.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[c.value?(n(),l("svg",T,[...e[11]||(e[11]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),l("svg",Y,[...e[12]||(e[12]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),o.value.new_password?(n(),l("p",G,w(o.value.new_password),1)):u("",!0),e[14]||(e[14]=s("p",{class:"mt-1 text-sm text-gray-500"},"Password must be at least 8 characters long.",-1))]),s("div",null,[e[17]||(e[17]=s("label",{for:"new_password_confirmation",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirm New Password ",-1)),s("div",H,[g(s("input",{id:"new_password_confirmation","onUpdate:modelValue":e[4]||(e[4]=a=>t.value.new_password_confirmation=a),type:v.value?"text":"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Confirm your new password"},null,8,K),[[_,t.value.new_password_confirmation]]),s("button",{type:"button",onClick:e[5]||(e[5]=a=>v.value=!v.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[v.value?(n(),l("svg",Q,[...e[15]||(e[15]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),l("svg",R,[...e[16]||(e[16]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),o.value.new_password_confirmation?(n(),l("p",W,w(o.value.new_password_confirmation),1)):u("",!0)]),s("div",X,[s("button",{onClick:k,class:"px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:f.value},w(f.value?"Changing Password...":"Change Password"),9,Z)])])])])])]),_:1}))}},ne=b(ee,[["__scopeId","data-v-5457d8ee"]]);export{ne as default};
