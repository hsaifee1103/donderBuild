import{r as m,d as ye,k as E,z as Me,b as Pe,f as n,o as a,a as e,g,E as s,i as G,F as _e,p as ke,t as h,q as we,h as ae,v as be,S as Ce,n as je,A as Ee}from"./app-C7zuiOEw.js";function ze(){const J=m(!1),z=m(!1),v=m([]),I=m(1),O=m(!1),L=m(null),$=m(!1),U=m(""),P=m(null),B=m(null),D=m(!1),c=m(null),V=m(!1),p=m(null),T=m(""),R=m(!1),j=m(null),k=m(null),S=m(!1),K=m(null),H=m(!1),w=m("post"),A=m(null),Q=["Spam","Abusive Content","Harassment or Bullying","Hate Speech","False Information","Violence or Threats","Inappropriate or Sexual Content","Scam or Fraud","Impersonation","Other"],b=m(null),X=ye(()=>{var u,d;const r=((u=b.value)==null?void 0:u.first_name)||"",l=((d=b.value)==null?void 0:d.last_name)||"";return`${r} ${l}`.trim()||"User"}),ie=ye(()=>{var r,l;return console.log((r=b.value)==null?void 0:r.image_url,"currentUser.value?.image_url"),(l=b.value)==null?void 0:l.image_url}),_=ye(()=>{var r;return((r=b.value)==null?void 0:r.id)||null}),Z=async(r=!1)=>{var l;if(!J.value){r&&(I.value=1,v.value=[]),J.value=!0;try{const u=await E.get("/posts?per_page=15");if(u.data&&u.data.success){const d=u.data.data;v.value=d.data||[],ee(d)}else console.error("Error fetching posts:",(l=u.data)==null?void 0:l.errors)}catch(u){console.error("Error fetching posts:",u)}finally{J.value=!1}}},N=async()=>{var r;if(!(z.value||!O.value)){z.value=!0;try{const l=await E.get(`/posts?per_page=15&page=${I.value+1}`);if(l.data&&l.data.success){const u=l.data.data;v.value=[...v.value,...u.data||[]],ee(u)}else console.error("Error loading more posts:",(r=l.data)==null?void 0:r.errors)}catch(l){console.error("Error loading more posts:",l)}finally{z.value=!1}}},ee=r=>{O.value=r.last_page>r.current_page,I.value=r.current_page,L.value=r.next_page_url},de=r=>{var l;!z.value&&O.value&&((l=v.value[v.value.length-1])==null?void 0:l.id)===r.id&&N()},ue=async()=>{var r,l,u;if(!(!U.value.trim()||D.value)){D.value=!0;try{const d=new FormData;d.append("content",U.value),P.value&&d.append("image",B.value);const i=await E.post("/posts",d,{headers:{"Content-Type":"multipart/form-data"}});i.data&&i.data.success?(v.value.unshift(i.data.data),U.value="",P.value=null,B.value=null,$.value=!1,alert("Post created successfully!")):(console.error("Error creating post:",(r=i.data)==null?void 0:r.errors),alert("Error creating post: "+(((u=(l=i.data)==null?void 0:l.errors)==null?void 0:u[0])||"Unknown error")))}catch(d){console.error("Error creating post:",d),alert("Error creating post: "+d.message)}finally{D.value=!1}}},ce=async r=>{var l,u;if(_.value)try{const d=await E.post("/likes",{post_id:r.id});d.data&&d.data.success?((l=r.likes)==null?void 0:l.some(f=>f.userId===_.value||f.user_id===_.value))?r.likes=r.likes.filter(f=>f.userId!==_.value&&f.user_id!==_.value):(r.likes||(r.likes=[]),r.likes.push({id:Date.now(),user_id:_.value,userId:_.value,post_id:r.id,postId:r.id})):console.error("Error toggling like:",(u=d.data)==null?void 0:u.errors)}catch(d){console.error("Error toggling like:",d)}},me=r=>{var l;return((l=r.likes)==null?void 0:l.some(u=>u.userId===_.value||u.user_id===_.value))||!1},ve=async r=>{var l,u,d;if(confirm("Are you sure you want to delete this post?"))try{const i=await E.delete("/posts",{data:{id:r.id,_method:"DELETE"}});i.data&&i.data.success?(v.value=v.value.filter(f=>f.id!==r.id),j.value=null,alert("Post deleted successfully!")):(console.error("Error deleting post:",(l=i.data)==null?void 0:l.errors),alert("Error deleting post: "+(((d=(u=i.data)==null?void 0:u.errors)==null?void 0:d[0])||"Unknown error")))}catch(i){console.error("Error deleting post:",i),alert("Error deleting post: "+i.message)}},fe=r=>{w.value="post",A.value=r.id,H.value=!0,j.value=null},ge=r=>{p.value=r,V.value=!0,T.value=""},he=async()=>{var r,l,u;if(!(!T.value.trim()||!p.value||R.value)){R.value=!0;try{const d=new FormData;d.append("post_id",p.value.id),d.append("content",T.value);const i=await E.post("/comments",d,{headers:{"Content-Type":"multipart/form-data"}});if(i.data&&i.data.success){p.value.comments||(p.value.comments=[]),p.value.comments.unshift(i.data.data);const f=v.value.findIndex(y=>y.id===p.value.id);f!==-1&&(v.value[f].comments||(v.value[f].comments=[]),v.value[f].comments.unshift(i.data.data)),T.value="",Me(()=>{const y=document.querySelector(".overflow-y-auto");y&&(y.scrollTop=y.scrollHeight)})}else console.error("Error adding comment:",(r=i.data)==null?void 0:r.errors),alert("Error adding comment: "+(((u=(l=i.data)==null?void 0:l.errors)==null?void 0:u[0])||"Unknown error"))}catch(d){console.error("Error adding comment:",d),alert("Error adding comment: "+d.message)}finally{R.value=!1}}},te=async r=>{var l,u,d;if(confirm("Are you sure you want to delete this comment?"))try{const i=await E.delete("/comments",{data:{id:r.id,_method:"DELETE"}});if(i.data&&i.data.success){p.value&&p.value.comments&&(p.value.comments=p.value.comments.filter(y=>y.id!==r.id));const f=v.value.findIndex(y=>y.id===p.value.id);f!==-1&&v.value[f].comments&&(v.value[f].comments=v.value[f].comments.filter(y=>y.id!==r.id)),k.value=null,alert("Comment deleted successfully!")}else console.error("Error deleting comment:",(l=i.data)==null?void 0:l.errors),alert("Error deleting comment: "+(((d=(u=i.data)==null?void 0:u.errors)==null?void 0:d[0])||"Unknown error"))}catch(i){console.error("Error deleting comment:",i),alert("Error deleting comment: "+i.message)}},se=r=>{w.value="comment",A.value=r.id,H.value=!0,k.value=null},oe=async r=>{var l,u,d;try{const i=await E.post("/report",{id:A.value,type:w.value,reason:r});i.data&&i.data.success?(alert(`${w.value} reported successfully!`),H.value=!1):(console.error("Error reporting:",(l=i.data)==null?void 0:l.errors),alert("Error reporting: "+(((d=(u=i.data)==null?void 0:u.errors)==null?void 0:d[0])||"Unknown error")))}catch(i){console.error("Error reporting:",i),alert("Error reporting: "+i.message)}},re=r=>r.user_id===_.value,le=r=>r.user_id===_.value,Y=r=>{j.value=j.value==r?null:r},pe=r=>{k.value=k.value===r?null:r},ne=()=>{j.value=null},xe=()=>{k.value=null},x=()=>{c.value.click()},t=r=>{const l=r.target.files[0];if(l&&l.type.startsWith("image/")){const u=new FileReader;u.onload=d=>{P.value=d.target.result,B.value=l},u.readAsDataURL(l)}},C=()=>{P.value=null,B.value=null},F=r=>{K.value=r,S.value=!0},W=()=>{S.value=!1,K.value=null},o=r=>{if(!r)return"";const l=new Date(r);if(isNaN(l.getTime()))return"Invalid date";const d=new Date-l,i=Math.floor(d/6e4),f=Math.floor(d/36e5),y=Math.floor(d/864e5);return i<1?"Just now":i<60?`${i} min ago`:f<24?`${f} hour${f>1?"s":""} ago`:y<7?`${y} day${y>1?"s":""} ago`:l.toLocaleDateString()},M=()=>{try{const r=localStorage.getItem("userData");r&&(b.value=JSON.parse(r))}catch(r){console.error("Error loading user data:",r)}};return{isLoading:J,isLoadingMore:z,posts:v,currentPage:I,hasMorePages:O,nextPageUrl:L,showCreatePost:$,postContent:U,postImage:P,postImageFile:B,isCreatingPost:D,fileInput:c,showPostDetail:V,selectedPost:p,commentText:T,isAddingComment:R,activePostMenu:j,activeCommentMenu:k,showImageViewer:S,viewerImageUrl:K,showReportModal:H,reportType:w,reportTargetId:A,reportReasons:Q,currentUser:b,currentUserName:X,currentUserImage:ie,currentUserId:_,fetchCommunityPosts:Z,loadMorePosts:N,loadMorePostsIfNeeded:de,createPost:ue,toggleLike:ce,isPostLiked:me,deletePost:ve,reportPost:fe,openPostDetail:ge,addComment:he,deleteComment:te,reportComment:se,submitReport:oe,isPostOwner:re,isCommentOwner:le,togglePostMenu:Y,toggleCommentMenu:pe,closePostMenu:ne,closeCommentMenu:xe,triggerFileUpload:x,handleImageUpload:t,removePostImage:C,openImageViewer:F,closeImageViewer:W,formatDate:o,loadCurrentUser:M,initialize:()=>{M(),Z()}}}const Ie={class:"max-w-7xl mx-auto"},Le={key:0,class:"flex justify-center mt-20"},$e={key:1},Ue={key:0,class:"mt-6 space-y-6"},Be={class:"flex items-start mb-4"},De={class:"flex-shrink-0 mr-4"},Ve=["src","alt"],Te={key:1,class:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center"},Ne={class:"flex-1"},Fe={class:"flex items-center justify-between"},Oe={class:"text-lg font-medium text-gray-900"},Re={class:"text-sm text-gray-500"},Se={class:"mb-4"},He={key:0,class:"text-gray-700 mb-4"},Ae={key:1,class:"mb-4"},We=["src","onClick"],qe={class:"flex items-center justify-between border-t border-gray-200 pt-4"},Je={class:"flex space-x-4"},Ke=["onClick"],Ye=["onClick"],Ge={class:"relative"},Qe=["onClick"],Xe=["onClick"],Ze=["onClick"],et={key:0,class:"flex justify-center py-4"},tt={key:1,class:"h-4"},st={key:1,class:"text-center py-12"},ot={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},rt={class:"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto"},lt={class:"p-6"},nt={class:"flex justify-between items-center mb-6"},at={class:"flex items-center mb-4"},it={class:"flex-shrink-0 mr-3"},dt=["src"],ut={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},ct={class:"text-md font-medium text-gray-900"},mt={class:"mb-4"},vt={key:0,class:"mb-4"},ft={class:"relative"},gt=["src"],ht={key:1,class:"mb-6"},pt={class:"flex justify-end space-x-3"},xt=["disabled"],yt={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_t={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"},kt={class:"p-4 border-b border-gray-200"},wt={class:"flex justify-between items-center"},bt={class:"flex-1 overflow-y-auto p-4"},Ct={key:0,class:"mb-6"},Mt={class:"flex items-start mb-4"},Pt={class:"flex-shrink-0 mr-4"},jt=["src","alt"],Et={key:1,class:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center"},zt={class:"flex-1"},It={class:"flex items-center justify-between"},Lt={class:"text-lg font-medium text-gray-900"},$t={class:"text-sm text-gray-500"},Ut={class:"mb-4"},Bt={key:0,class:"text-gray-700 mb-4"},Dt={key:1,class:"mb-4"},Vt=["src"],Tt={class:"flex items-center justify-between border-t border-gray-200 pt-4"},Nt={class:"flex space-x-4"},Ft={key:1},Ot={class:"text-md font-medium text-gray-900 mb-4"},Rt={key:0,class:"space-y-4 mb-6"},St={key:0,class:"flex-1 bg-gray-50 rounded-lg p-4"},Ht={class:"flex items-start mb-2"},At={class:"flex-shrink-0 mr-3"},Wt=["src","alt"],qt={key:1,class:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center"},Jt={class:"flex-1"},Kt={class:"flex items-center justify-between"},Yt={class:"text-sm font-medium text-gray-900"},Gt={class:"text-xs text-gray-500"},Qt={class:"relative"},Xt=["onClick"],Zt=["onClick"],es=["onClick"],ts={key:0,class:"text-gray-700 text-sm"},ss={key:1,class:"mt-2"},os=["src"],rs={key:1,class:"text-center py-4 text-gray-500"},ls={class:"p-4 border-t border-gray-200"},ns={class:"flex items-center space-x-3"},as={class:"flex-shrink-0"},is=["src"],ds={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},us={class:"flex-1"},cs=["disabled"],ms={key:4,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50"},vs={class:"relative max-w-4xl max-h-[90vh]"},fs=["src"],gs={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},hs={class:"bg-white rounded-lg w-full max-w-md"},ps={class:"p-6"},xs={class:"flex justify-between items-center mb-4"},ys={class:"text-lg font-bold text-gray-900"},_s={class:"text-gray-600 mb-4"},ks={class:"space-y-2"},ws=["onClick"],bs={class:"mt-6 flex justify-end"},Ms={__name:"CommunityFeed",setup(J){const{isLoading:z,isLoadingMore:v,posts:I,hasMorePages:O,showCreatePost:L,postContent:$,postImage:U,isCreatingPost:P,fileInput:B,showPostDetail:D,selectedPost:c,commentText:V,activePostMenu:p,activeCommentMenu:T,showImageViewer:R,viewerImageUrl:j,showReportModal:k,reportType:S,reportReasons:K,currentUserName:H,currentUserImage:w,loadMorePosts:A,createPost:Q,toggleLike:b,isPostLiked:X,deletePost:ie,reportPost:_,openPostDetail:Z,addComment:N,deleteComment:ee,reportComment:de,submitReport:ue,isPostOwner:ce,isCommentOwner:me,togglePostMenu:ve,toggleCommentMenu:fe,closePostMenu:ge,closeCommentMenu:he,triggerFileUpload:te,handleImageUpload:se,removePostImage:oe,openImageViewer:re,closeImageViewer:le,formatDate:Y,initialize:pe}=ze();Pe(()=>{pe()});const ne={mounted(x,t){x.clickOutsideEvent=function(C){x===C.target||x.contains(C.target)||t.value(C)},document.body.addEventListener("click",x.clickOutsideEvent)},unmounted(x){document.body.removeEventListener("click",x.clickOutsideEvent)}},xe={mounted(x,t){const C={root:null,rootMargin:"0px",threshold:.1},F=new IntersectionObserver(W=>{W.forEach(o=>{o.isIntersecting&&t.value()})},C);F.observe(x),x._observer=F},unmounted(x){x._observer&&x._observer.disconnect()}};return(x,t)=>{var C,F,W;return a(),n("div",Ie,[t[44]||(t[44]=e("div",{class:"mt-5"},[e("h1",{class:"text-2xl px-6 font-bold text-gray-900"},"Community")],-1)),s(z)?(a(),n("div",Le,[...t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"},null,-1)])])):(a(),n("div",$e,[s(I).length>0?(a(),n("div",Ue,[(a(!0),n(_e,null,ke(s(I),o=>{var M,q,r;return a(),n("div",{key:o.id,class:"bg-white rounded-lg shadow-sm p-6"},[e("div",Be,[e("div",De,[(M=o.user_details)!=null&&M.profile_image?(a(),n("img",{key:0,src:o.user_details.profile_image,alt:o.user_details.first_name+" "+o.user_details.last_name,class:"h-12 w-12 rounded-full object-cover"},null,8,Ve)):(a(),n("div",Te,[...t[20]||(t[20]=[e("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",Ne,[e("div",Fe,[e("div",null,[e("h4",Oe,h(o.user_details.first_name+" "+o.user_details.last_name),1),e("p",Re,h(s(Y)(o.created_at)),1)])])])]),e("div",Se,[o.content?(a(),n("p",He,h(o.content),1)):g("",!0),o.image_url?(a(),n("div",Ae,[e("img",{src:o.image_url,alt:"Post image",class:"w-full rounded-lg object-cover max-h-96 cursor-pointer",onClick:l=>s(re)(o.image_url)},null,8,We)])):g("",!0)]),e("div",qe,[e("div",Je,[e("button",{onClick:l=>s(b)(o),class:we(["flex items-center space-x-1 text-gray-500 hover:text-red-500",{"text-red-500":s(X)(o)}])},[t[21]||(t[21]=e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),e("span",null,h(((q=o.likes)==null?void 0:q.length)||0),1)],10,Ke),e("button",{onClick:l=>s(Z)(o),class:"flex items-center space-x-1 text-gray-500 hover:text-blue-500"},[t[22]||(t[22]=e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z","clip-rule":"evenodd"})],-1)),e("span",null,h(((r=o.comments)==null?void 0:r.length)||0),1)],8,Ye)]),e("div",Ge,[e("button",{onClick:ae(l=>s(ve)(o.id),["stop"]),class:"text-gray-500 hover:text-gray-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,Qe),s(p)==o.id?G((a(),n("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",onClick:t[0]||(t[0]=ae(()=>{},["stop"]))},[s(ce)(o)?(a(),n("button",{key:0,onClick:l=>s(ie)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Delete ",8,Xe)):g("",!0),e("button",{onClick:l=>s(_)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Report ",8,Ze)])),[[ne,s(ge)]]):g("",!0)])])])}),128)),s(v)?(a(),n("div",et,[...t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"},null,-1)])])):g("",!0),s(O)&&!s(v)?G((a(),n("div",tt,null,512)),[[xe,s(A)]]):g("",!0)])):(a(),n("div",st,[...t[25]||(t[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),e("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No Posts Yet",-1),e("p",{class:"mt-1 text-gray-500"},"Community posts will appear here.",-1)])]))])),e("button",{onClick:t[1]||(t[1]=o=>L.value=!0),class:"fixed bottom-6 right-6 bg-red-500 text-white rounded-full p-4 shadow-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 z-40"},[...t[26]||(t[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])]),s(L)?(a(),n("div",ot,[e("div",rt,[e("div",lt,[e("div",nt,[t[28]||(t[28]=e("h3",{class:"text-xl font-bold text-gray-900"},"Create Post",-1)),e("button",{onClick:t[2]||(t[2]=o=>L.value=!1),class:"text-gray-500 hover:text-gray-700"},[...t[27]||(t[27]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",at,[e("div",it,[s(w)?(a(),n("img",{key:0,src:s(w),alt:"User",class:"h-10 w-10 rounded-full object-cover"},null,8,dt)):(a(),n("div",ut,[...t[29]||(t[29]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",null,[e("h4",ct,h(s(H)),1),t[30]||(t[30]=e("p",{class:"text-sm text-gray-500"},"via post",-1))])]),e("div",mt,[G(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>Ce($)?$.value=o:null),rows:"4",class:"shadow-sm focus:ring-red-500 focus:border-red-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"What's on your mind?"},null,512),[[be,s($)]])]),s(U)?(a(),n("div",vt,[e("div",ft,[e("img",{src:s(U),alt:"Post image",class:"w-full rounded-lg object-cover max-h-64"},null,8,gt),e("button",{onClick:t[4]||(t[4]=(...o)=>s(oe)&&s(oe)(...o)),class:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75"},[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):(a(),n("div",ht,[e("button",{onClick:t[5]||(t[5]=(...o)=>s(te)&&s(te)(...o)),class:"flex items-center justify-center w-full py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},[...t[32]||(t[32]=[e("svg",{class:"w-5 h-5 mr-2 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),je(" Add Photo ",-1)])]),e("input",{type:"file",ref_key:"fileInput",ref:B,onChange:t[6]||(t[6]=(...o)=>s(se)&&s(se)(...o)),class:"hidden",accept:"image/*"},null,544)])),e("div",pt,[e("button",{onClick:t[7]||(t[7]=o=>L.value=!1),class:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("button",{onClick:t[8]||(t[8]=(...o)=>s(Q)&&s(Q)(...o)),class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:s(P)||!s($).trim()},h(s(P)?"Posting...":"Post"),9,xt)])])])])):g("",!0),s(D)?(a(),n("div",yt,[e("div",_t,[e("div",kt,[e("div",wt,[t[34]||(t[34]=e("h3",{class:"text-lg font-bold text-gray-900"},"Comments",-1)),e("button",{onClick:t[9]||(t[9]=o=>D.value=!1),class:"text-gray-500 hover:text-gray-700"},[...t[33]||(t[33]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",bt,[s(c)?(a(),n("div",Ct,[e("div",Mt,[e("div",Pt,[(C=s(c).user_details)!=null&&C.profile_image?(a(),n("img",{key:0,src:s(c).user_details.profile_image,alt:s(c).user_details.first_name+" "+s(c).user_details.first_name,class:"h-12 w-12 rounded-full object-cover"},null,8,jt)):(a(),n("div",Et,[...t[35]||(t[35]=[e("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",zt,[e("div",It,[e("div",null,[e("h4",Lt,h(s(c).user_details.first_name+" "+s(c).user_details.first_name),1),e("p",$t,h(s(Y)(s(c).created_at)),1)])])])]),e("div",Ut,[s(c).content?(a(),n("p",Bt,h(s(c).content),1)):g("",!0),s(c).image_url?(a(),n("div",Dt,[e("img",{src:s(c).image_url,alt:"Post image",class:"w-full rounded-lg object-cover max-h-96 cursor-pointer",onClick:t[10]||(t[10]=o=>s(re)(s(c).image_url))},null,8,Vt)])):g("",!0)]),e("div",Tt,[e("div",Nt,[e("button",{onClick:t[11]||(t[11]=o=>s(b)(s(c))),class:we(["flex items-center space-x-1 text-gray-500 hover:text-red-500",{"text-red-500":s(X)(s(c))}])},[t[36]||(t[36]=e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})],-1)),e("span",null,h(((F=s(c).likes)==null?void 0:F.length)||0),1)],2)])])])):g("",!0),s(c)?(a(),n("div",Ft,[e("h4",Ot,"Comments ("+h(((W=s(c).comments)==null?void 0:W.length)||0)+")",1),s(c).comments&&s(c).comments.length>0?(a(),n("div",Rt,[(a(!0),n(_e,null,ke(s(c).comments,o=>{var M;return a(),n("div",{key:o.id,class:"flex"},[t[39]||(t[39]=e("div",{class:"flex flex-col items-center mr-4"},[e("div",{class:"w-0.5 h-full bg-gray-200"})],-1)),o!=null&&o.user_details?(a(),n("div",St,[e("div",Ht,[e("div",At,[(M=o.user_details)!=null&&M.profile_image?(a(),n("img",{key:0,src:o.user_details.profile_image,alt:o.user_details.first_name+" "+o.user_details.last_name,class:"h-8 w-8 rounded-full object-cover"},null,8,Wt)):(a(),n("div",qt,[...t[37]||(t[37]=[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",Jt,[e("div",Kt,[e("div",null,[e("h5",Yt,h(o.user_details.first_name+" "+o.user_details.last_name),1),e("p",Gt,h(s(Y)(o.created_at)),1)]),e("div",Qt,[e("button",{onClick:ae(q=>s(fe)(o.id),["stop"]),class:"text-gray-500 hover:text-gray-700"},[...t[38]||(t[38]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4zm0 6a2 2 0 110-4 2 2 0 010 4z"})],-1)])],8,Xt),s(T)==o.id?G((a(),n("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",onClick:t[12]||(t[12]=ae(()=>{},["stop"]))},[s(me)(o)?(a(),n("button",{key:0,onClick:q=>s(ee)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Delete ",8,Zt)):g("",!0),e("button",{onClick:q=>s(de)(o),class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"}," Report ",8,es)])),[[ne,s(he)]]):g("",!0)])])])]),o.content?(a(),n("p",ts,h(o.content),1)):g("",!0),o.image_url?(a(),n("div",ss,[e("img",{src:o.image_url,alt:"Comment image",class:"w-full rounded-lg object-cover max-h-48"},null,8,os)])):g("",!0)])):g("",!0)])}),128))])):(a(),n("div",rs," No comments yet. Be the first to comment! "))])):g("",!0)]),e("div",ls,[e("div",ns,[e("div",as,[s(w)?(a(),n("img",{key:0,src:s(w),alt:"User",class:"h-10 w-10 rounded-full object-cover"},null,8,is)):(a(),n("div",ds,[...t[40]||(t[40]=[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),e("div",us,[G(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>Ce(V)?V.value=o:null),type:"text",class:"shadow-sm focus:ring-red-500 focus:border-red-500 block w-full sm:text-sm border border-gray-300 rounded-md py-2 px-3",placeholder:"Add a comment here",onKeyup:t[14]||(t[14]=Ee((...o)=>s(N)&&s(N)(...o),["enter"]))},null,544),[[be,s(V)]])]),e("button",{onClick:t[15]||(t[15]=(...o)=>s(N)&&s(N)(...o)),class:"flex-shrink-0 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:!s(V).trim()},[...t[41]||(t[41]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,cs)])])])])):g("",!0),s(R)?(a(),n("div",ms,[e("div",vs,[e("img",{src:s(j),alt:"Full size image",class:"max-w-full max-h-full object-contain"},null,8,fs),e("button",{onClick:t[16]||(t[16]=(...o)=>s(le)&&s(le)(...o)),class:"absolute top-4 right-4 bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-opacity-75"},[...t[42]||(t[42]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):g("",!0),s(k)?(a(),n("div",gs,[e("div",hs,[e("div",ps,[e("div",xs,[e("h3",ys,"Report "+h(s(S)),1),e("button",{onClick:t[17]||(t[17]=o=>k.value=!1),class:"text-gray-500 hover:text-gray-700"},[...t[43]||(t[43]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("p",_s,"Why are you reporting this "+h(s(S))+"?",1),e("div",ks,[(a(!0),n(_e,null,ke(s(K),o=>(a(),n("button",{key:o,onClick:M=>s(ue)(o),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md"},h(o),9,ws))),128))]),e("div",bs,[e("button",{onClick:t[18]||(t[18]=o=>k.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900"}," Cancel ")])])])])):g("",!0)])}}};export{Ms as _};
