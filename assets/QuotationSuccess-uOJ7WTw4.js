import{l as z,r as d,d as u,e as J,b as P,c as H,o as a,w as f,k as E,u as Q,m as U,a as e,f as r,j as y,n as b,t as o,F as L,p as O,g as w}from"./app-CTtqvBQy.js";import{_ as Y}from"./MainLayout-DgZIWz7b.js";import"./NotificationDropdown-BoJJU9Nh.js";const K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},W={class:"mb-6"},X={class:"flex","aria-label":"Breadcrumb"},Z={class:"inline-flex items-center space-x-1 md:space-x-3"},ee={class:"inline-flex items-center"},te={class:"flex items-center"},se={key:0,class:"flex justify-center py-12"},le={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},oe={class:"lg:col-span-2"},ae={class:"bg-white rounded-lg shadow-sm overflow-hidden"},re={class:"p-6"},ne={class:"mb-8"},ie={class:"space-y-4"},de={class:"flex-1"},ce={class:"font-medium text-gray-900"},ue={class:"flex items-center mt-1"},me={class:"text-sm text-gray-500"},ge={class:"font-medium text-gray-900"},ve={class:"mb-8"},fe={class:"p-4 border border-gray-200 rounded-lg"},xe={class:"text-lg font-medium text-gray-900"},pe={key:0},_e={key:1},he={key:2},ye={class:"text-sm text-gray-600 mt-1"},be={key:0},we={key:1},ke={class:"mb-8"},Se={class:"p-4 border border-gray-200 rounded-lg"},je={class:"text-gray-700"},Ne={class:"mb-8"},Be={class:"p-4 border border-gray-200 rounded-lg"},De={class:"flex items-center"},Ce={class:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden mr-4"},Ve=["src","alt"],Me={key:1,class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={class:"flex-1"},Oe={class:"font-medium text-gray-900"},Fe={class:"flex items-center text-sm text-gray-600 mt-1"},Ge={class:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded font-medium"},Ie={class:"text-xs text-gray-500 mt-2"},Ae={class:"mb-8"},Re={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},Te=["src","alt"],$e={class:"mb-8"},qe={class:"p-4 border border-gray-200 rounded-lg"},ze={class:"flex justify-between items-center mb-2"},Je={class:"font-medium text-gray-900"},Pe={class:"flex justify-between items-center text-lg font-bold mt-4 pt-4 border-t border-gray-200"},He={class:"lg:col-span-1"},Ee={class:"bg-white rounded-lg shadow-sm sticky top-6"},Qe={class:"p-6"},Ue={class:"flex items-start space-x-3 mb-6"},Ye={class:"w-12 h-12 bg-yellow-400 rounded-lg flex items-center justify-center overflow-hidden"},Ke=["src","alt"],We={key:1,class:"text-black font-bold text-lg"},Xe={class:"flex-1"},Ze={class:"flex items-center mt-1"},et={class:"ml-1 text-sm font-medium"},tt={class:"ml-1 text-sm text-gray-500"},st={class:"text-sm text-gray-600 mt-1"},lt={__name:"QuotationSuccess",setup(ot){const F=J();Q();const c=d(null),x=d(!0),k=d(null),p=d([]),i=d(null),n=d(null),S=d({}),j=d({}),N=u(()=>F.params.provider_id),G=async()=>{var s,t;try{x.value=!0;const l=await E.post("/garage",{provider_id:N.value});l.data&&l.data.success?c.value=l.data.data:k.value=l.data.message||"Failed to load garage details"}catch(l){k.value=((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.message)||l.message||"An error occurred",console.error("Error fetching garage details:",l)}finally{x.value=!1}},I=()=>{const s=localStorage.getItem("selectedServices"),t=localStorage.getItem("appointmentDetails"),l=localStorage.getItem("selectedVehicle"),m=localStorage.getItem("quoteDetails"),g=localStorage.getItem("vehiclePhotos");s&&(p.value=JSON.parse(s)),t&&(i.value=JSON.parse(t)),l&&(n.value=JSON.parse(l)),m&&(S.value=JSON.parse(m)),g&&(j.value=JSON.parse(g))},B=s=>s?(typeof s=="string"?new Date(s):s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short",year:"numeric"}):"",A=s=>s||"",_=u(()=>{var s,t,l;return((l=(t=(s=c.value)==null?void 0:s.businesses)==null?void 0:t[0])==null?void 0:l.business_name)||"Garage"}),R=u(()=>_.value.charAt(0).toUpperCase()),T=u(()=>{var t,l;const s=(l=(t=c.value)==null?void 0:t.business_location)==null?void 0:l[0];return s?`${s.city}, ${s.state}, ${s.country}`:"Location not available"}),D=u(()=>p.value.reduce((s,t)=>s+parseFloat(t.price||0),0)),$=u(()=>0),q=u(()=>D.value+$.value);return P(()=>{G(),I()}),(s,t)=>{const l=U("router-link");return a(),H(Y,null,{default:f(()=>{var m,g,C,V,M;return[e("main",K,[e("div",W,[e("nav",X,[e("ol",Z,[e("li",ee,[y(l,{to:{name:"Home"},class:"text-gray-700 hover:text-gray-900 inline-flex items-center"},{default:f(()=>[...t[0]||(t[0]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})],-1),b(" Home ",-1)])]),_:1})]),e("li",null,[e("div",te,[t[1]||(t[1]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),y(l,{to:{name:"GarageDetails",params:{provider_id:N.value}},class:"text-gray-700 hover:text-gray-900 ml-1 md:ml-2 font-medium"},{default:f(()=>[b(o(_.value),1)]),_:1},8,["to"])])]),t[2]||(t[2]=e("li",null,[e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"text-gray-500 ml-1 md:ml-2 font-medium"},"Quotation Success")])],-1))])])]),x.value?(a(),r("div",se,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-coral-500"},null,-1)])])):(a(),r("div",le,[e("div",oe,[e("div",ae,[t[16]||(t[16]=e("div",{class:"p-6 border-b border-gray-200"},[e("div",{class:"flex items-center"},[e("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])]),e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Your Request is Sent!"),e("p",{class:"text-gray-600 mt-1"},"Your task is sent. Here's what's next:")])])],-1)),e("div",re,[t[15]||(t[15]=e("div",{class:"mb-8"},[e("div",{class:"space-y-6"},[e("div",{class:"flex items-start"},[e("div",{class:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-4"},[e("span",{class:"text-blue-600 font-bold"},"1")]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Garage owner will make offer"),e("p",{class:"text-gray-600 mt-1"},"Garage owners will provide tailored offers based on your service needs.")])]),e("div",{class:"flex items-start"},[e("div",{class:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-4"},[e("span",{class:"text-blue-600 font-bold"},"2")]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Accept an offer"),e("p",{class:"text-gray-600 mt-1"},"Review and accept the best offer from trusted garage owners to get your service started.")])]),e("div",{class:"flex items-start"},[e("div",{class:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-4"},[e("span",{class:"text-blue-600 font-bold"},"3")]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Chat and get it done"),e("p",{class:"text-gray-600 mt-1"},"Connect with garage owners to finalize details and complete your service seamlessly.")])])])],-1)),e("div",ne,[t[5]||(t[5]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Services",-1)),e("div",ie,[(a(!0),r(L,null,O(p.value,v=>(a(),r("div",{key:v.id,class:"flex justify-between items-start p-4 border border-gray-200 rounded-lg"},[e("div",de,[e("h3",ce,o(v.service_name),1),e("div",ue,[t[4]||(t[4]=e("svg",{class:"w-4 h-4 text-gray-400 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",me,o(v.service_duration||"N/A"),1)])]),e("span",ge,"£"+o(v.price),1)]))),128))])]),e("div",ve,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"To Be Done On",-1)),e("div",fe,[e("div",xe,[i.value.availabilityType==="on-date"?(a(),r("span",pe,o(B(i.value.date)),1)):i.value.availabilityType==="before-date"?(a(),r("span",_e," Before "+o(B(i.value.date)),1)):i.value.availabilityType==="flexible"?(a(),r("span",he," Flexible scheduling ")):w("",!0)]),e("div",ye,[i.value.time?(a(),r("span",be,o(A(i.value.time)),1)):w("",!0),i.value.duration?(a(),r("span",we," ("+o(i.value.duration)+")",1)):w("",!0)])])]),e("div",ke,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notes for Garage",-1)),e("div",Se,[e("p",je,o(S.value.notes||"No notes provided"),1)])]),e("div",Ne,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Vehicle Info",-1)),e("div",Be,[e("div",De,[e("div",Ce,[n.value.image?(a(),r("img",{key:0,src:n.value.image,alt:`${n.value.car_make||"Vehicle"} ${n.value.car_model||""}`,class:"w-full h-full object-cover"},null,8,Ve)):(a(),r("svg",Me,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))]),e("div",Le,[e("h3",Oe,o(n.value.car_make||"Unknown")+" "+o(n.value.car_model||"Vehicle"),1),e("div",Fe,[e("span",Ge,o(n.value.registrationNumber||n.value.car_model||"No Registration"),1)]),e("div",Ie,o(n.value.fuelType||"N/A")+" • "+o(n.value.transmission||"N/A")+" • Registered year "+o(n.value.yearOfManufacture||"N/A"),1)])])])]),e("div",Ae,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Vehicle Photos",-1)),e("div",Re,[(a(!0),r(L,null,O(j.value.photos,(v,h)=>(a(),r("div",{key:h,class:"aspect-square bg-gray-200 rounded-lg overflow-hidden"},[e("img",{src:`/assets/images/car/car_${h+1}.png`,alt:`Vehicle photo ${h+1}`,class:"w-full h-full object-cover"},null,8,Te)]))),128))])]),e("div",$e,[t[14]||(t[14]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Estimated Price",-1)),e("div",qe,[e("div",ze,[t[11]||(t[11]=e("span",{class:"text-gray-600"},"Subtotal",-1)),e("span",Je,"£"+o(D.value.toFixed(2)),1)]),e("div",Pe,[t[12]||(t[12]=e("span",null,"Total to pay",-1)),e("span",null,"£"+o(q.value.toFixed(2)),1)]),t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 mt-2"},"Price can vary in the final quote",-1))])])])])]),e("div",He,[e("div",Ee,[t[19]||(t[19]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-xl font-bold text-gray-900"},"Auto One Haven Garage")],-1)),e("div",Qe,[e("div",Ue,[e("div",Ye,[(C=(g=(m=c.value)==null?void 0:m.businesses)==null?void 0:g[0])!=null&&C.file_id?(a(),r("img",{key:0,src:c.value.businesses[0].file_id,alt:_.value+" logo",class:"w-full h-full object-cover"},null,8,Ke)):(a(),r("span",We,o(R.value),1))]),e("div",Xe,[e("div",Ze,[t[17]||(t[17]=e("svg",{class:"w-4 h-4 text-yellow-400 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292z"})],-1)),e("span",et,o(((V=c.value)==null?void 0:V.rating)||"0.0"),1),e("span",tt,"("+o(((M=c.value)==null?void 0:M.rating_count)||0)+")",1)]),e("p",st,o(T.value),1)])]),y(l,{to:{name:"MyRequests"},class:"w-full font-medium py-3 px-4 rounded-lg transition-colors bg-coral-500 hover:bg-red-500 text-white text-center block"},{default:f(()=>[...t[18]||(t[18]=[b(" Go to My Request ",-1)])]),_:1})])])])]))])]}),_:1})}}},it=z(lt,[["__scopeId","data-v-9e638e55"]]);export{it as default};
