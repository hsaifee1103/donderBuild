import{l as v,c as b,o as y,w as p,m as x,r as l,b as w,e as h,k as C,u as E,a as t,f as k,g as S,n as g,t as m,h as _,i as A,v as L}from"./app-U24E4X8J.js";import{_ as q}from"./AuthLayout-Dx88WwOc.js";const M={name:"CustomerConfirmEmail",components:{AuthLayout:q},setup(){const c=E(),e=h(),n=l(""),o=l(!1),s=l(""),d=l(""),i=l(""),a=l(""),f=l("");return w(()=>{d.value=e.query.maskedEmail||"",i.value=e.query.mobile||"",a.value=e.query.countryCode||"",f.value=localStorage.getItem("forgotPasswordEmail")||"",localStorage.removeItem("forgotPasswordEmail")}),{email:n,isLoading:o,errorMessage:s,maskedEmail:d,handleSubmit:async()=>{o.value=!0,s.value="";try{if(n.value.toLowerCase()!==f.value.toLowerCase()){s.value="The email you entered does not match our records. Please try again.",o.value=!1;return}const u={email:n.value,mobile:i.value,country_code:a.value,user_type:"customer"},r=await C.post("/customer/password/forgot",u);r.data&&r.data.success?c.push({path:"/customer/forgot-password/otp",query:{email:n.value,mobile:i.value,countryCode:a.value}}):r.data.errors&&Array.isArray(r.data.errors)?s.value=r.data.errors.join(", "):r.data.message?s.value=r.data.message:s.value="Failed to send verification code."}catch(u){if(console.error("Error sending OTP:",u),u.response){const r=u.response.data;r.errors&&Array.isArray(r.errors)?s.value=r.errors.join(", "):r.message?s.value=r.message:s.value="An error occurred while sending the verification code."}else s.value="Network error. Please check your connection."}finally{o.value=!1}}}}},P={class:"w-full max-w-md mx-auto"},B={class:"text-gray-600 mb-8 text-center"},N={class:"font-medium text-gray-900"},T={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},V=["disabled"];function D(c,e,n,o,s,d){const i=x("AuthLayout");return y(),b(i,null,{default:p(()=>[t("div",P,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-2 text-center"},"Confirm Email",-1)),t("p",B,[e[2]||(e[2]=g(" We need to confirm your email address to send you instructions to reset your password. ",-1)),e[3]||(e[3]=t("br",null,null,-1)),e[4]||(e[4]=t("br",null,null,-1)),e[5]||(e[5]=g(" Your registered email is: ",-1)),t("span",N,m(o.maskedEmail),1)]),o.errorMessage?(y(),k("div",T,m(o.errorMessage),1)):S("",!0),t("form",{onSubmit:e[1]||(e[1]=_((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"])),class:"space-y-6"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Enter your full email address",-1)),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),type:"email",placeholder:"Enter your email here",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none",required:""},null,512),[[L,o.email]])]),t("button",{type:"submit",disabled:o.isLoading,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-red-300 text-white font-medium py-3 px-4 rounded-lg transition-colors"},m(o.isLoading?"Sending...":"Continue"),9,V)],32)])]),_:1})}const F=v(M,[["render",D]]);export{F as default};
