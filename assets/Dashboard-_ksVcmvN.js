import{r as i,d as rt,D as it,b as ut,c as Z,o as u,w as ct,k as pt,u as xt,a as t,j as c,n as tt,E as p,g as mt,f as et,t as o}from"./app-CeYD0-mp.js";import{P as gt}from"./ProviderDashboardLayout-_RL2-QAZ.js";import{D as vt}from"./DateRangePicker-BGp_a4g4.js";import{c as m,f as ht}from"./x-jDAcizyc.js";import"./NotificationDropdown-CFIqk1aN.js";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=m("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=m("euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=m("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),wt={class:"max-w-7xl mx-auto"},yt={class:"px-6 mt-6"},Dt={class:"flex flex-col sm:flex-row justify-between sm:items-center gap-4"},kt={class:"flex gap-3"},Bt={class:"relative"},jt=["value"],Et={class:"px-6 mt-6"},Ft={key:0,class:"flex justify-center items-center py-12"},Mt={key:1,class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},St={class:"rounded-xl border border-[#E5E7EB] bg-white p-6 shadow-sm"},Ct={class:"flex items-center justify-between"},Tt={class:"rounded-full bg-[#FEE2E2] p-2"},Vt={class:"mt-4"},Rt={class:"text-3xl font-bold text-[#111827]"},It={class:"mt-4 grid grid-cols-2 gap-4"},Pt={class:"text-lg font-medium"},At={class:"text-lg font-medium"},Lt={class:"text-lg font-medium"},Nt={class:"text-lg font-medium"},Ot={class:"rounded-xl border border-[#E5E7EB] bg-white p-6 shadow-sm"},zt={class:"flex items-center justify-between"},Jt={class:"rounded-full bg-[#DBEAFE] p-2"},Ut={class:"mt-4"},Yt={class:"text-3xl font-bold text-[#111827]"},$t={class:"mt-4 grid grid-cols-2 gap-4"},qt={class:"text-lg font-medium"},Gt={class:"text-lg font-medium"},Ht={class:"text-lg font-medium"},Wt={class:"text-lg font-medium"},Kt={class:"text-lg font-medium"},Qt={class:"lg:col-span-2"},Xt={class:"rounded-xl border border-[#E5E7EB] bg-white p-6 shadow-sm"},Zt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},te={class:"bg-blue-50 rounded-lg p-4 text-center"},ee={class:"text-2xl font-bold text-blue-700"},se={class:"bg-yellow-50 rounded-lg p-4 text-center"},oe={class:"text-2xl font-bold text-yellow-700"},le={class:"bg-green-50 rounded-lg p-4 text-center"},ae={class:"text-2xl font-bold text-green-700"},ne={class:"bg-red-50 rounded-lg p-4 text-center"},de={class:"text-2xl font-bold text-red-700"},re={class:"bg-purple-50 rounded-lg p-4 text-center"},ie={class:"text-2xl font-bold text-purple-700"},ve={__name:"Dashboard",setup(ue){const st=xt(),n=i(!1),a=i({start:new Date(new Date().setMonth(new Date().getMonth()-1)),end:new Date}),ot=()=>n.value=!n.value,lt=rt(()=>{const l=a.value.start,e=a.value.end;return`${l.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})} - ${e.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`}),x=i(!0),d=it({start:"",end:""}),s=i({revenue:{total_earning:0,today:0,this_week:0,this_month:0,this_year:0},jobs:{total_jobs:0,upcoming:0,in_progress:0,completed:0,cancelled:0,pending:0}}),at=()=>{const l=new Date,e=new Date(l.getFullYear(),l.getMonth(),1),r=new Date(l.getFullYear(),l.getMonth()+1,0);d.start=e.toISOString().split("T")[0],d.end=r.toISOString().split("T")[0]},g=async()=>{x.value=!0;try{const l=JSON.parse(localStorage.getItem("userData")||"{}"),e=await pt.post("/providerDashboardSummary",{provider_id:l.id,start_date:d.start,end_date:d.end});e.data&&(console.log("Dashboard Data:",e.data),s.value=e.data.data)}catch(l){console.error("Error loading dashboard data:",l)}finally{x.value=!1}},nt=()=>{g()},dt=()=>{st.push({path:"/provider/reports",query:{startDate:a.value.start.toISOString().split("T")[0],endDate:a.value.end.toISOString().split("T")[0]}})};return ut(()=>{at(),g()}),(l,e)=>(u(),Z(gt,null,{default:ct(()=>{var r,v,h,b,f,_,w,y,D,k,B,j,E,F,M,S,C,T,V,R,I,P,A,L,N,O,z,J,U,Y,$,q,G,H,W,K,Q;return[t("div",wt,[e[23]||(e[23]=t("div",{class:"px-6 pt-6"},[t("nav",{class:"text-sm text-[#6B7280]"},[t("span",{class:"hover:underline cursor-default"},"Provider Account"),t("span",{class:"mx-2"},"›"),t("span",{class:"text-[#111827] font-medium"},"Dashboard")]),t("div",{class:"mt-4 flex flex-col md:flex-row md:items-center md:justify-between"},[t("h1",{class:"text-3xl font-bold tracking-tight"},"Reporting and analytics"),t("p",{class:"mt-2 text-sm text-[#6B7280] md:mt-0"},"Access all of your Donderstorm reports.")])],-1)),t("div",yt,[t("div",Dt,[t("button",{onClick:nt,class:"flex items-center gap-1 rounded-lg border border-[#D1D5DB] bg-white px-3 py-2 text-sm font-medium text-[#111827] shadow-sm hover:bg-[#F9FAFB]"},[c(p(_t),{class:"h-4 w-4"}),e[2]||(e[2]=tt(" Refresh ",-1))]),t("div",kt,[t("div",Bt,[t("input",{type:"text",readonly:"",onClick:ot,value:lt.value,class:"w-full sm:w-60 border border-gray-300 rounded-lg px-3 py-2 text-gray-700 cursor-pointer"},null,8,jt),e[3]||(e[3]=t("svg",{class:"absolute right-3 top-2.5 w-5 h-5 text-gray-500 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),n.value?(u(),Z(vt,{key:0,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=X=>a.value=X),show:n.value,onClose:e[1]||(e[1]=X=>n.value=!1),extraClasses:"top-full right-0 mt-2"},null,8,["modelValue","show"])):mt("",!0)]),t("button",{onClick:dt,class:"flex items-center gap-1 rounded-lg border border-[#D1D5DB] bg-white px-3 py-2 text-sm font-medium text-[#111827] shadow-sm hover:bg-[#F9FAFB]"},[c(p(ht),{class:"h-4 w-4"}),e[4]||(e[4]=tt(" View Reports ",-1))])])])]),t("div",Et,[x.value?(u(),et("div",Ft,[...e[5]||(e[5]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"},null,-1)])])):(u(),et("div",Mt,[t("div",St,[t("div",Ct,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold text-[#111827]"},"Total Earnings",-1)),t("div",Tt,[c(p(ft),{class:"h-5 w-5 text-[#EF4444]"})])]),t("div",Vt,[t("p",Rt,"£"+o((h=(v=(r=s.value)==null?void 0:r.revenue)==null?void 0:v.total_earning)==null?void 0:h.toFixed(2)),1),t("div",It,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-[#6B7280]"},"Today",-1)),t("p",Pt,"£"+o((_=(f=(b=s.value)==null?void 0:b.revenue)==null?void 0:f.today)==null?void 0:_.toFixed(2)),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-[#6B7280]"},"This Week",-1)),t("p",At,"£"+o((D=(y=(w=s.value)==null?void 0:w.revenue)==null?void 0:y.this_week)==null?void 0:D.toFixed(2)),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-[#6B7280]"},"This Month",-1)),t("p",Lt,"£"+o((j=(B=(k=s.value)==null?void 0:k.revenue)==null?void 0:B.this_month)==null?void 0:j.toFixed(2)),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm text-[#6B7280]"},"This Year",-1)),t("p",Nt,"£"+o((M=(F=(E=s.value)==null?void 0:E.revenue)==null?void 0:F.this_year)==null?void 0:M.toFixed(2)),1)])])])]),t("div",Ot,[t("div",zt,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-[#111827]"},"Total Jobs",-1)),t("div",Jt,[c(p(bt),{class:"h-5 w-5 text-[#3B82F6]"})])]),t("div",Ut,[t("p",Yt,o((C=(S=s.value)==null?void 0:S.jobs)==null?void 0:C.total_jobs),1),t("div",$t,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm text-[#6B7280]"},"Upcoming",-1)),t("p",qt,o((V=(T=s.value)==null?void 0:T.jobs)==null?void 0:V.upcoming),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm text-[#6B7280]"},"In Progress",-1)),t("p",Gt,o((I=(R=s.value)==null?void 0:R.jobs)==null?void 0:I.in_progress),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm text-[#6B7280]"},"Completed",-1)),t("p",Ht,o((A=(P=s.value)==null?void 0:P.jobs)==null?void 0:A.completed),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm text-[#6B7280]"},"Cancelled",-1)),t("p",Wt,o((N=(L=s.value)==null?void 0:L.jobs)==null?void 0:N.cancelled),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm text-[#6B7280]"},"Pending",-1)),t("p",Kt,o((z=(O=s.value)==null?void 0:O.jobs)==null?void 0:z.pending),1)])])])]),t("div",Qt,[t("div",Xt,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold text-[#111827] mb-4"},"Job Status Distribution",-1)),t("div",Zt,[t("div",te,[t("p",ee,o((U=(J=s.value)==null?void 0:J.jobs)==null?void 0:U.upcoming),1),e[17]||(e[17]=t("p",{class:"text-sm text-blue-600"},"Upcoming",-1))]),t("div",se,[t("p",oe,o(($=(Y=s.value)==null?void 0:Y.jobs)==null?void 0:$.in_progress),1),e[18]||(e[18]=t("p",{class:"text-sm text-yellow-600"},"In Progress",-1))]),t("div",le,[t("p",ae,o((G=(q=s.value)==null?void 0:q.jobs)==null?void 0:G.completed),1),e[19]||(e[19]=t("p",{class:"text-sm text-green-600"},"Completed",-1))]),t("div",ne,[t("p",de,o((W=(H=s.value)==null?void 0:H.jobs)==null?void 0:W.cancelled),1),e[20]||(e[20]=t("p",{class:"text-sm text-red-600"},"Cancelled",-1))]),t("div",re,[t("p",ie,o((Q=(K=s.value)==null?void 0:K.jobs)==null?void 0:Q.pending),1),e[21]||(e[21]=t("p",{class:"text-sm text-purple-600"},"Pending",-1))])])])])]))])])]}),_:1}))}};export{ve as default};
