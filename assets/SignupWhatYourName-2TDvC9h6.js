import{r as i,b as N,u as h,e as w,c as q,o as p,w as k,a,f as _,g as S,t as f,h as A,i as v,v as y,k as C}from"./app-DJPj3-n2.js";import{_ as T}from"./AuthLayout-BLtCExCm.js";const B={class:"w-full max-w-md mx-auto"},E={key:0,class:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg"},M=["disabled"],L={__name:"SignupWhatYourName",props:{userType:{type:String,required:!0}},setup(g){const s=w(),d=h(),m=g,o=i(""),l=i(""),n=i(!1),r=i(""),b=async()=>{var u;if(!o.value||!l.value){r.value="Please enter both first and last name";return}n.value=!0,r.value="";try{const e={first_name:o.value,last_name:l.value};console.log("Adding name with data:",e);const t=await C.post("/add-name",e);console.log("Add name response:",t.data),t.data&&t.data.success?d.push({path:`/signup/terms/${m.userType}`,query:{contact:s.query.contact,countryCode:s.query.countryCode,mobile:s.query.mobile,firstName:o.value,lastName:l.value}}):r.value=((u=t.data)==null?void 0:u.message)||"Failed to save name. Please try again."}catch(e){if(console.error("Add name error:",e),e.response){const t=e.response.status,c=e.response.data;if(t===422){const x=c.errors||[];r.value=x.join(", ")||"Invalid input data."}else r.value=c.message||"An error occurred while saving name."}else e.request?r.value="Network error. Please check your connection.":r.value="An unexpected error occurred."}finally{n.value=!1}};return N(()=>{localStorage.getItem("authToken")||d.push(`/signup/mobile/${m.userType}`),s.query.firstName&&(o.value=s.query.firstName),s.query.lastName&&(l.value=s.query.lastName),s.query.email&&console.log("Email from query:",s.query.email)}),(u,e)=>(p(),q(T,null,{default:k(()=>[a("div",B,[e[4]||(e[4]=a("div",{class:"text-center mb-8"},[a("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"What's Your Name?"),a("p",{class:"text-gray-600"}," Let us know how to properly address you. ")],-1)),r.value?(p(),_("div",E,f(r.value),1)):S("",!0),a("form",{onSubmit:A(b,["prevent"]),class:"space-y-6"},[a("div",null,[e[2]||(e[2]=a("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"},"First Name",-1)),v(a("input",{id:"firstName","onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),type:"text",placeholder:"Enter your first name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors",required:""},null,512),[[y,o.value]])]),a("div",null,[e[3]||(e[3]=a("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"},"Last Name",-1)),v(a("input",{id:"lastName","onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),type:"text",placeholder:"Enter your last name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors",required:""},null,512),[[y,l.value]])]),a("button",{type:"submit",disabled:n.value||!o.value||!l.value,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 px-4 rounded-lg transition-colors"},f(n.value?"Saving...":"Continue"),9,M)],32)])]),_:1}))}};export{L as default};
