import{r as s,b as f,e as p,k as v,u as y}from"./app-ra6n0F-f.js";import{_ as g}from"./AuthLayout-DhIsmCU_.js";import{C as h}from"./CountrySelector-CpXujSLb.js";import{c as b}from"./countries-DXaTS7mb.js";/* empty css                                                                        */const S={name:"ProviderForgotPassword",components:{AuthLayout:g,CountrySelector:h},setup(){const m=y(),l=p(),a=s(""),c=s(!1),r=s(""),t=s({name:"United Kingdom",dial_code:"+44",code:"GB",flag:"gb"}),u=s(!1),d=async()=>{if(a.value.trim()){c.value=!0,r.value="";try{const e={country_code:t.value.dial_code,mobile:a.value,user_type:"provider"};console.log("Checking user with data:",e);const o=await v.post("/user/email-by-mobile",e);if(console.log("API response:",o.data),o.data&&o.data.success){const{masked_email:n,email:i}=o.data.data;localStorage.setItem("forgotPasswordEmail",i),m.push({path:"/provider/forgot-password/confirm-email",query:{mobile:a.value,countryCode:t.value.dial_code,maskedEmail:n}})}else r.value="No account found with this mobile number. Please check and try again."}catch(e){if(console.error("Error checking user:",e),e.response){const o=e.response.data;r.value=o.message||"An error occurred while checking user information."}else r.value="Network error. Please check your connection."}finally{c.value=!1,u.value=!1}}};return f(()=>{const e=l.query.mobile,o=l.query.countryCode;if(e&&o){a.value=e;const n=b.find(i=>i.dial_code===o);n&&(t.value=n),u.value=!0,d()}}),{phoneNumber:a,isLoading:c,errorMessage:r,selectedCountry:t,handleContinue:d,autoSubmit:u}}};export{S as default};
