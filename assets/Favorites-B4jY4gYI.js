import{C as p}from"./CustomerDashboardLayout-BSeDhfaF.js";import{_ as g}from"./GarageCard-CXYgdoG8.js";import{r as c,b as x,c as h,o as n,w as _,I as r,k as u,a as o,f as d,F as y,p as w,j as k}from"./app-DNlZ5eWp.js";import"./NotificationDropdown-CtzNW0ed.js";import"./x-DNUCuYC4.js";const b={class:"max-w-7xl mx-auto"},C={class:"bg-white rounded-lg overflow-hidden"},B={class:"p-6"},F={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},E=["onClick"],O={key:1,class:"text-center py-12"},L={__name:"Favorites",setup(K){const a=c([]),l=c(null),m=async()=>{var i,t;try{const e=JSON.parse(localStorage.getItem("userData")||"{}");if(l.value=e.id||e.customer_id,!l.value){r({type:"error",title:"Error",message:"User not authenticated.",confirmButtonText:"OK"});return}const s=await u.post("/getFavorites",{user_id:l.value});s.data.success?a.value=s.data.data:r({type:"error",title:"Error",message:s.data.message||"Failed to load favorites.",confirmButtonText:"OK"})}catch(e){console.error("Error loading favorites:",e),r({type:"error",title:"Error",message:((t=(i=e.response)==null?void 0:i.data)==null?void 0:t.message)||"Failed to load favorites.",confirmButtonText:"OK"})}},v=async i=>{var t,e;try{if(!l.value){r({type:"error",title:"Error",message:"User not authenticated.",confirmButtonText:"OK"});return}const s=await u.post("/favorite",{user_id:l.value,provider_id:i,is_favorite:!1});s.data.success?(a.value=a.value.filter(f=>f.id!==i),r({type:"success",title:"Success",message:"Removed from favorites.",confirmButtonText:"OK"})):r({type:"error",title:"Error",message:s.data.message||"Failed to remove favorite.",confirmButtonText:"OK"})}catch(s){console.error("Error removing favorite:",s),r({type:"error",title:"Error",message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to remove favorite.",confirmButtonText:"OK"})}};return x(()=>{m()}),(i,t)=>(n(),h(p,null,{default:_(()=>[o("div",b,[t[3]||(t[3]=o("div",{class:"mt-5"},[o("h1",{class:"text-2xl px-6 font-bold text-gray-900"},"Favorites")],-1)),o("div",C,[o("div",B,[t[2]||(t[2]=o("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"Favorite Garages",-1)),a.value&&a.value.length>0?(n(),d("div",F,[(n(!0),d(y,null,w(a.value,e=>(n(),d("div",{key:e.id,class:"relative"},[k(g,{garage:{id:e.id,name:e.business_name,location:`${e.address_line_1}, ${e.city}, ${e.country}`,rating:e.rating,reviews:e.rating_count,images:e.portfolio_imgs||[],image:e.portfolio_imgs[0]||[],serviceAvailability:e.description||"No description available"}},null,8,["garage"]),o("button",{onClick:s=>v(e.id),class:"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors"},[...t[0]||(t[0]=[o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M12.001 21.5C11.8445 21.5 11.688 21.4738 11.5385 21.4213C6.94292 19.8957 3.25 15.7342 3.25 10.5C3.25 7.5 5.25 5.25 7.75 5.25C9.25 5.25 10.5 6 11.25 7.25C12 6 13.25 5.25 14.75 5.25C17.25 5.25 19.25 7.5 19.25 10.5C19.25 15.7342 15.5571 19.8957 10.9615 21.4213C10.812 21.4738 10.6555 21.5 10.499 21.5H12.001Z",fill:"#EC5B70",stroke:"#182224","stroke-width":"1.5"})],-1)])],8,E)]))),128))])):(n(),d("div",O,[...t[1]||(t[1]=[o("div",{class:"mb-4"},[o("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1),o("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"No favorite garages found",-1),o("p",{class:"text-gray-600"},"Check back later to see your favorite garages.",-1)])]))])])])]),_:1}))}};export{L as default};
