import{l as $,r as i,b as H,c as J,o as n,w as V,k as v,I as u,u as R,j as C,a as t,f as d,g as b,F as Q,p as W,q as X,t as f,i as c,v as m}from"./app-CTtqvBQy.js";import{S as Y}from"./SetupLayout-oCnZY9_I.js";import{C as A}from"./CountrySelector-C2vfKOom.js";import{P as Z}from"./ProviderDashboardLayout-Bpkv7GAz.js";import"./BackIcon-CByhw0Ua.js";import"./IconDocument-DbfsIkoI.js";import"./countries-DXaTS7mb.js";/* empty css                                                                        */import"./NotificationDropdown-BoJJU9Nh.js";import"./x-DpUPLwB8.js";const ee={class:"w-full p-6 overflow-y-auto"},te={class:"bg-white border-b border-gray-200 px-8 py-6"},le={key:0,class:"flex justify-center items-center h-64"},oe={key:1,class:"space-y-6"},se={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},re=["onClick"],ae={class:"flex justify-center mb-4"},ne={key:0,class:"w-24 h-24 rounded-full overflow-hidden bg-blue-100"},ie=["src","alt"],de={class:"text-center"},ue={class:"text-base font-semibold text-gray-900 mb-1"},ce={class:"text-sm text-gray-500"},me={key:0,class:"absolute top-10 right-3 bg-white rounded-lg shadow-lg border border-gray-200 z-20"},pe=["onClick"],fe=["onClick"],ge={class:"mt-8"},ve=["disabled"],be={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ye={class:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},xe={class:"p-6 space-y-5"},he={class:"flex flex-col items-center"},_e={class:"w-24 h-24 bg-pink-200 rounded-full flex items-center justify-center mb-3"},we=["src"],ke={class:"grid grid-cols-2 gap-3"},Ce={class:"grid grid-cols-2 gap-3"},je={class:"flex items-center"},Ee=["disabled"],Fe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Be={class:"bg-white rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto"},Me={key:0,class:"p-6 space-y-5"},Ue={class:"flex items-center justify-between"},Ve={class:"w-24 h-24 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center"},Ae=["src"],Se={key:1,class:"text-gray-500 font-semibold text-lg"},De={class:"grid grid-cols-2 gap-3"},Le={class:"grid grid-cols-2 gap-3"},Te={class:"flex items-center"},Pe={class:"flex gap-3 mt-6"},qe=["disabled"],ze={__name:"Employees",setup(Oe){const S=R(),j=i(!0),y=i(!1),E=i([]),_=i(!1),w=i(!1),p=i(null),x=i(!1),k=i(!1),g=i(null),D=i(null),L=i(null),s=i({first_name:"",last_name:"",selectedCountry:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:"gb"},mobile:"",email:"",job_title:"",preview:null,photoFile:null}),r=i({first_name:"",last_name:"",selectedCountry:null,mobile:"",email:"",job_title:"",photoFile:null}),h=async()=>{var o;try{const e=localStorage.getItem("userData");if(!e)return;const l=JSON.parse(e),a=await v.get("/get-employee");(o=a.data)!=null&&o.success&&(E.value=a.data.data||[])}catch(e){console.error("Error fetching employees:",e),u({type:"error",title:"Error",message:"Failed to load employees.",confirmButtonText:"OK"})}finally{j.value=!1}},F=(o,e)=>(o.charAt(0)+e.charAt(0)).toUpperCase(),T=o=>{const e=["bg-blue-500","bg-orange-500","bg-green-500","bg-purple-500","bg-indigo-500"];let l=0;for(let a=0;a<o.length;a++)l=o.charCodeAt(a)+((l<<5)-l);return e[Math.abs(l)%e.length]},P=o=>{g.value=g.value===o?null:o},q=()=>{_.value=!0,s.value={first_name:"",last_name:"",selectedCountry:{name:"United Kingdom",dial_code:"+44",code:"GB",flag:"gb"},mobile:"",email:"",job_title:"",preview:null,photoFile:null}},B=()=>{_.value=!1},z=o=>{p.value=o,r.value={first_name:o.first_name,last_name:o.last_name,selectedCountry:{name:"United Kingdom",dial_code:o.country_code||"+44",code:"GB",flag:"gb"},mobile:o.mobile,email:o.email||"",job_title:o.job_title,photoFile:null},w.value=!0,g.value=null},M=()=>{w.value=!1,p.value=null},O=o=>{const e=o.target.files[0];e&&(s.value.photoFile=e,s.value.preview=URL.createObjectURL(e))},I=o=>{const e=o.target.files[0];e&&(r.value.photoFile=e)},K=async()=>{var o,e;if(!s.value.first_name||!s.value.last_name||!s.value.mobile||!s.value.job_title){u({type:"error",title:"Validation Error",message:"Please fill in all required fields.",confirmButtonText:"OK"});return}x.value=!0;try{const l=new FormData;l.append("first_name",s.value.first_name),l.append("last_name",s.value.last_name),l.append("country_code",s.value.selectedCountry.dial_code),l.append("mobile",s.value.mobile),l.append("email",s.value.email),l.append("job_title",s.value.job_title),s.value.photoFile&&l.append("img",s.value.photoFile);const a=await v.post("/add_edit_employee",l,{headers:{"Content-Type":"multipart/form-data"}});if((o=a.data)!=null&&o.success)await h(),B(),u({type:"success",title:"Employee Added Successfully",message:a.data.message||"Employee has been added.",confirmButtonText:"Great!"});else throw new Error(((e=a.data)==null?void 0:e.message)||"Failed to add employee")}catch(l){console.error("Add employee error:",l),u({type:"error",title:"Failed to Add Employee",message:l.message||"An error occurred.",confirmButtonText:"OK"})}finally{x.value=!1}},N=async()=>{var o,e;if(!r.value.first_name||!r.value.last_name||!r.value.mobile||!r.value.job_title){u({type:"error",title:"Validation Error",message:"Please fill in all required fields.",confirmButtonText:"OK"});return}k.value=!0;try{const l=new FormData;l.append("employee_id",p.value.id),l.append("first_name",r.value.first_name),l.append("last_name",r.value.last_name),l.append("country_code",r.value.selectedCountry.dial_code),l.append("mobile",r.value.mobile),l.append("email",r.value.email),l.append("job_title",r.value.job_title),r.value.photoFile&&l.append("img",r.value.photoFile);const a=await v.post("/add_edit_employee",l,{headers:{"Content-Type":"multipart/form-data"}});if((o=a.data)!=null&&o.success)await h(),M(),u({type:"success",title:"Employee Updated Successfully",message:a.data.message||"Employee has been updated.",confirmButtonText:"Great!"});else throw new Error(((e=a.data)==null?void 0:e.message)||"Failed to update employee")}catch(l){console.error("Update employee error:",l),u({type:"error",title:"Failed to Update Employee",message:l.message||"An error occurred.",confirmButtonText:"OK"})}finally{k.value=!1}},U=async o=>{var e,l;if(confirm("Are you sure you want to delete this employee?"))try{const a=await v.delete("/deleteEmployee",{data:{employee_id:o}});if((e=a.data)!=null&&e.success)await h(),u({type:"success",title:"Employee Deleted Successfully",message:"Employee has been removed.",confirmButtonText:"Great!"});else throw new Error(((l=a.data)==null?void 0:l.message)||"Failed to delete employee")}catch(a){console.error("Delete employee error:",a),u({type:"error",title:"Failed to Delete Employee",message:a.message||"An error occurred.",confirmButtonText:"OK"})}},G=async()=>{var o;y.value=!0;try{const e=localStorage.getItem("userData"),l=JSON.parse(e),a=await v.post("/provider/profile",{provider_id:l.id});(o=a.data)!=null&&o.success&&localStorage.setItem("userData",JSON.stringify(a.data.data)),S.push("/provider/business-hub/billing")}catch(e){console.error("Continue error:",e),u({type:"error",title:"Error",message:"Failed to proceed.",confirmButtonText:"OK"})}finally{y.value=!1}};return H(()=>{h()}),(o,e)=>(n(),J(Z,null,{default:V(()=>[C(Y,null,{default:V(()=>[t("div",ee,[t("div",te,[e[32]||(e[32]=t("div",{class:"mb-8"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Add Employee"),t("p",{class:"text-sm text-gray-600"},"Enter employee details to add them to your team. Manage your team efficiently and easily.")],-1)),j.value?(n(),d("div",le,[...e[13]||(e[13]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"},null,-1)])])):(n(),d("div",oe,[t("div",se,[t("button",{onClick:q,class:"border-2 border-dashed border-red-300 rounded-lg p-8 flex flex-col items-center justify-center hover:bg-red-50 transition-colors h-64"},[...e[14]||(e[14]=[t("div",{class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-3"},[t("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)])]),(n(!0),d(Q,null,W(E.value,l=>(n(),d("div",{key:l.id,class:"relative bg-white rounded-lg border border-gray-200 p-4 overflow-hidden group"},[t("button",{onClick:a=>P(l.id),class:"absolute top-3 right-3 bg-white rounded-full p-1 hover:bg-gray-100 transition-colors z-10"},[...e[15]||(e[15]=[t("svg",{class:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"5",r:"2"}),t("circle",{cx:"12",cy:"12",r:"2"}),t("circle",{cx:"12",cy:"19",r:"2"})],-1)])],8,re),t("div",ae,[l.img?(n(),d("div",ne,[t("img",{src:l.img,alt:`${l.first_name} ${l.last_name}`,class:"w-full h-full object-cover"},null,8,ie)])):(n(),d("div",{key:1,class:X(["w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-xl",T(l.first_name+l.last_name)])},f(F(l.first_name,l.last_name)),3))]),t("div",de,[t("p",ue,f(l.first_name)+" "+f(l.last_name.charAt(0))+".",1),t("p",ce,f(l.job_title),1)]),g.value===l.id?(n(),d("div",me,[t("button",{onClick:a=>{z(l),g.value=null},class:"w-full flex items-center space-x-2 px-4 py-3 hover:bg-gray-50 text-left first:rounded-t-lg"},[...e[16]||(e[16]=[t("svg",{class:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 11H9v-2.828l8.586-8.586z"})],-1),t("span",{class:"text-sm text-gray-900"},"Edit",-1)])],8,pe),t("button",{onClick:a=>{U(l.id),g.value=null},class:"w-full flex items-center space-x-2 px-4 py-3 hover:bg-gray-50 text-left last:rounded-b-lg border-t border-gray-200"},[...e[17]||(e[17]=[t("svg",{class:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),t("span",{class:"text-sm text-gray-900"},"Delete",-1)])],8,fe)])):b("",!0)]))),128))])])),t("div",ge,[t("button",{onClick:G,disabled:y.value,class:"bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 px-8 rounded-lg transition-colors"},f(y.value?"Saving...":"Save & Continue"),9,ve)]),_.value?(n(),d("div",be,[t("div",ye,[t("div",{class:"flex items-center justify-between p-6 border-b border-gray-200"},[e[19]||(e[19]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Add new employee",-1)),t("button",{onClick:B,class:"text-gray-400 hover:text-gray-600"},[...e[18]||(e[18]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",xe,[t("div",he,[t("div",_e,[e[20]||(e[20]=t("label",{for:"add-photo",class:"cursor-pointer"},[t("svg",{class:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})])],-1)),t("input",{id:"add-photo",ref_key:"addPhotoInput",ref:D,type:"file",accept:"image/*",class:"hidden",onChange:O},null,544)]),s.value.preview?(n(),d("img",{key:0,src:s.value.preview,class:"w-24 h-24 rounded-full mt-2 object-cover"},null,8,we)):b("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Full name*",-1)),t("div",ke,[c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.first_name=l),type:"text",placeholder:"First name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,s.value.first_name]]),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.last_name=l),type:"text",placeholder:"Last name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,s.value.last_name]])])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Phone number *",-1)),t("div",Ce,[t("div",je,[C(A,{modelValue:s.value.selectedCountry,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.selectedCountry=l)},null,8,["modelValue"])]),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.mobile=l),type:"tel",placeholder:"(000) 000 0000",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,s.value.mobile]])])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Email",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.email=l),type:"email",placeholder:"e.g. employee@mail.com",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"},null,512),[[m,s.value.email]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Job title *",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.job_title=l),type:"text",placeholder:"e.g. Mechanic",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,s.value.job_title]])]),t("button",{onClick:K,disabled:x.value,class:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 rounded-lg transition-colors mt-6"},f(x.value?"Adding...":"Add"),9,Ee)])])])):b("",!0),w.value?(n(),d("div",Fe,[t("div",Be,[t("div",{class:"flex items-center justify-between p-6 border-b border-gray-200"},[e[26]||(e[26]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Edit employee",-1)),t("button",{onClick:M,class:"text-gray-400 hover:text-gray-600"},[...e[25]||(e[25]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),p.value?(n(),d("div",Me,[t("div",Ue,[t("div",Ve,[p.value.img?(n(),d("img",{key:0,src:p.value.img,class:"w-full h-full object-cover"},null,8,Ae)):(n(),d("div",Se,f(F(p.value.first_name,p.value.last_name)),1))]),e[27]||(e[27]=t("label",{for:"edit-photo",class:"bg-gray-900 text-white px-4 py-2 rounded-full text-sm cursor-pointer hover:bg-gray-800 transition-colors"}," Change ",-1)),t("input",{id:"edit-photo",ref_key:"editPhotoInput",ref:L,type:"file",accept:"image/*",class:"hidden",onChange:I},null,544)]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Full name*",-1)),t("div",De,[c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.first_name=l),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,r.value.first_name]]),c(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.last_name=l),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,r.value.last_name]])])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Phone number *",-1)),t("div",Le,[t("div",Te,[C(A,{modelValue:r.value.selectedCountry,"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.selectedCountry=l)},null,8,["modelValue"])]),c(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.mobile=l),type:"tel",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,r.value.mobile]])])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Email",-1)),c(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.email=l),type:"email",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"},null,512),[[m,r.value.email]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-900 mb-2"},"Job title *",-1)),c(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.job_title=l),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:""},null,512),[[m,r.value.job_title]])]),t("div",Pe,[t("button",{onClick:e[12]||(e[12]=l=>U(p.value.id)),class:"flex-1 bg-red-50 text-red-600 font-semibold py-3 rounded-lg hover:bg-red-100 transition-colors"},"Remove"),t("button",{onClick:N,disabled:k.value,class:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 rounded-lg transition-colors"},"Update",8,qe)])])):b("",!0)])])):b("",!0)])])]),_:1})]),_:1}))}},Xe=$(ze,[["__scopeId","data-v-dcff3790"]]);export{Xe as default};
