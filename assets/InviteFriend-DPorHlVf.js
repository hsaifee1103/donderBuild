import{l as L,r as u,d as C,b as S,c as D,o as N,w as T,k as g,a as e,i as f,n as b,t as x,q as y,N as w}from"./app-CeYD0-mp.js";import{C as j}from"./CustomerDashboardLayout-BAZ_9ioO.js";import"./NotificationDropdown-CFIqk1aN.js";import"./x-jDAcizyc.js";const B={class:"relative rounded-xl overflow-hidden border border-pink-200 bg-gradient-to-b from-white to-pink-50",style:{"padding-top":"4rem","padding-bottom":"calc(4rem + 20px)"}},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},O={class:"flex flex-col md:flex-row items-center justify-between"},V={class:"md:w-1/2 text-left py-8"},$={class:"text-gray-600 mb-6 max-w-xl"},F={class:"font-medium"},J={class:"mb-6"},M={class:"inline-flex rounded-md bg-white border border-gray-200 overflow-hidden"},P={class:"mb-6 w-full max-w-xl"},U={class:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-4"},q=["title"],z={class:"mb-6 w-full max-w-xl text-center"},A={__name:"InviteFriend",setup(H){const i=u(0),l=u(!1),d=JSON.parse(localStorage.getItem("userData")||"{}"),h=C(()=>(d==null?void 0:d.name)||"User"),s=u(null),c={customerInfo:"/customer-info",updateInviteLink:"/update-invite-link"};async function k(){var a;try{const t=await g.get(c.customerInfo),n=((a=t.data)==null?void 0:a.data)||t.data||{},r=n.invite_link??n.inviteLink??null;if(r){s.value=r;return}await p()}catch(t){console.error("Error fetching customer:",t),await p()}}async function p(){var a,t,n,r,v;try{const o=await g.post(c.updateInviteLink,{}),_=((t=(a=o.data)==null?void 0:a.data)==null?void 0:t.inviteLink)??((n=o.data)==null?void 0:n.invite_link)??((r=o.data)==null?void 0:r.inviteLink)??((v=o.data)==null?void 0:v.link)??null;s.value=_}catch(o){console.error("Error generating invite link:",o)}}async function m(){s.value&&(await navigator.clipboard.writeText(s.value),l.value=!0,setTimeout(()=>l.value=!1,2e3))}async function I(){if(!s.value)return m();const a=`ðŸ› ï¸ Vehicle maintenance just got easier.
I'm using Donderstorm â€“ the UK's #1 platform for managing it all!
Sign up now and check it out for yourself:
ðŸ‘‰ ${s.value}`;if(navigator.share)try{await navigator.share({title:"Join Donderstorm",text:a,url:s.value})}catch{}else await m(),alert("Link copied to clipboard!")}return S(()=>{k()}),(a,t)=>(N(),D(j,null,{default:T(()=>[t[9]||(t[9]=e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 mb-2 text-sm text-gray-600"},[e("span",{class:"text-gray-500"},"My Account"),e("span",{class:"mx-1"},"â€º"),e("span",{class:"font-medium text-gray-800"},"Invite your friends")],-1)),t[10]||(t[10]=e("h1",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-3xl font-bold text-gray-900 mb-6"}," Invite your friends ",-1)),e("section",B,[e("div",E,[e("div",O,[e("div",V,[t[6]||(t[6]=e("h2",{class:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight mb-4"}," Invite your friends & colleagues to Donderstorm ",-1)),e("p",$,[t[2]||(t[2]=b(" Hey ",-1)),e("span",F,x(h.value),1),t[3]||(t[3]=b("! Share the app with friends and earn rewards together. ",-1))]),e("div",J,[e("div",M,[e("button",{class:y(["px-4 py-2 text-sm font-medium",i.value===0?"bg-theme text-white":"text-gray-700"]),onClick:t[0]||(t[0]=n=>i.value=0)}," Invite Link ",2),e("button",{class:y(["px-4 py-2 text-sm font-medium",i.value===1?"bg-theme text-white":"text-gray-700"]),onClick:t[1]||(t[1]=n=>i.value=1)}," Invited ",2)])]),f(e("div",P,[e("div",U,[e("p",{class:"text-sm text-gray-600 text-center truncate",title:s.value||"â€”"},x(s.value||"â€”"),9,q)]),t[4]||(t[4]=e("p",{class:"text-xs text-gray-500 text-center mb-4"}," Share this link with friends to get referral rewards. ",-1)),e("button",{onClick:m,class:"bg-theme text-white w-full py-3 rounded-md hover:bg-red-600 text-sm font-medium transition-colors"},x(l.value?"Copied!":"Copy Invite Link"),1),e("button",{onClick:I,class:"w-full mt-3 py-3 rounded-md border text-gray-700 text-sm font-medium"}," Share ")],512),[[w,i.value===0]]),f(e("div",z,[...t[5]||(t[5]=[e("p",{class:"text-sm text-gray-700 mb-3"}," People that used your invite link ",-1),e("img",{src:"/assets/images/bg/invite-bg.png",class:"max-w-[260px] mx-auto mb-4 opacity-50"},null,-1),e("p",{class:"text-gray-500 text-sm"}," Once people use your invite link, they will appear here. ",-1)])],512),[[w,i.value===1]])]),t[7]||(t[7]=e("div",{class:"md:w-1/2 flex justify-end py-8"},[e("img",{src:"/assets/images/bg/invite-bg.png",alt:"Invite illustration",class:"max-w-[520px] w-full h-auto rounded-lg"})],-1))])]),t[8]||(t[8]=e("div",{class:"absolute left-0 right-0 bottom-0 h-5 bg-theme"},null,-1))])]),_:1}))}},W=L(A,[["__scopeId","data-v-fc28a13e"]]);export{W as default};
