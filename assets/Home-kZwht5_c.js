import{l as U,a as ge,o as n,w as O,f as i,g as b,b as e,j as I,X as Q,r as c,c as D,u as me,d as se,y as je,O as Ge,t as $,q as G,A as k,h as j,F,p as H,i as Be,v as Ne,n as ue,s as ee,k as te,z as oe,K as Ve}from"./app-C0VbAaEP.js";import{_ as De}from"./MainLayout-DdHJq3ix.js";import{N as Ee}from"./NumberPlate-DAexXZ3g.js";import{A as qe}from"./AddVehicleForm-D_uRfWFY.js";import{_ as ze}from"./GarageCard-DEyiLdDc.js";import"./NotificationDropdown-BpaKGOwL.js";const Ze={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Fe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},He={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 z-index--1 transition-opacity","aria-hidden":"true"},Ke={key:0,class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Oe={__name:"AuthModal",props:{show:{type:Boolean,default:!1}},emits:["close","login"],setup(m,{emit:P}){const d=P,w=()=>{d("close")},f=()=>{d("login")};return(y,p)=>(n(),ge(Q,{name:"modal"},{default:O(()=>[m.show?(n(),i("div",Ze,[e("div",Fe,[I(Q,{name:"modal-overlay"},{default:O(()=>[m.show?(n(),i("div",He)):b("",!0)]),_:1}),p[1]||(p[1]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),I(Q,{name:"modal-content"},{default:O(()=>[m.show?(n(),i("div",Ke,[p[0]||(p[0]=e("div",{class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"}," Authentication Required "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," You need to be logged in to add a vehicle. Please log in to continue. ")])])])],-1)),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{type:"button",onClick:f,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-500 text-base font-medium text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," Log In "),e("button",{type:"button",onClick:w,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])):b("",!0)]),_:1})])])):b("",!0)]),_:1}))}},Ue=U(Oe,[["__scopeId","data-v-3da1fc09"]]),Re={class:"relative bg-cover bg-center bg-no-repeat",style:{"background-image":"url('/assets/images/bg/hero-bg.png')",padding:"100px 0px"}},We={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 text-center text-white"},Je=["innerHTML"],Ye={class:"text-xl mb-8 opacity-90"},Qe={class:"max-w-5xl mx-auto bg-white rounded-lg shadow-lg overflow-visible relative"},Xe={class:"flex flex-col md:flex-row"},et={class:"w-full md:w-96 border-b md:border-b-0 md:border-r border-gray-200 relative",style:{width:"100%"}},tt={class:"flex items-center h-full"},ot={class:"w-50 pl-2 pr-2 flex-shrink-0 border-r border-gray-200 flex items-center justify-center h-full bg-gray-50 rounded-l-lg"},st={class:"flex-1 min-w-0 py-3 pr-4 relative"},lt={class:"relative"},at=["onKeydown","aria-expanded"],nt={class:"font-medium"},rt=["onClick","onKeydown","aria-selected"],it={key:0,class:"px-4 py-3 text-gray-500 text-center"},ct={key:1,class:"px-4 py-3 text-red-500 text-center"},dt={class:"w-full md:w-3/4 locationBox"},ut={class:"h-full flex items-center px-4 py-3"},gt={class:"relative w-full"},mt=["onKeydown"],vt={key:0,class:"absolute right-3 top-3"},pt={key:1,class:"absolute z-10 mt-1 w-full bg-white shadow-xl rounded-lg overflow-y-auto focus:outline-none",style:{"max-height":"300px"}},ft={class:"w-full text-start"},ht={class:"text-sm text-gray-500"},wt={key:1},yt=["onClick"],xt={class:"font-medium text-gray-900"},bt={class:"text-sm text-gray-500"},_t={key:2,class:"text-start"},Ct=["onClick"],kt={class:"font-medium text-gray-900"},St={class:"text-sm text-gray-500"},Lt={key:3,class:"p-4 text-center text-gray-500"},$t={class:"mt-6 text-sm opacity-75"},It={__name:"HeroSection",props:{title:{type:String,default:"Find local Garages<br />You can rely on"},subtitle:{type:String,default:"Trusted repairs, transparent pricing, and real-time updates."}},emits:["location-updated"],setup(m,{emit:P}){const d=c([]),w=c(!0),f=c(!1),y=c(""),p=c(!1),M=c(null),T=c(""),x=c(null),A=c(!1),E=c(!1),q=c(null),S=c(""),u=c(null),s=c(!1),a=c(!1),B=c(!1),h=c(null),L=c(null),_=c([]),C=c([]),v=c(-1);let R=null,N=null,le=null;const W=D(()=>{const o=[];return d.value&&d.value.length>0&&d.value.forEach(t=>{o.push({label:t.name,value:t.id})}),o}),ve=D(()=>{const o=W.value.find(t=>t.value===y.value);return o?o.label:""}),J=async()=>{p.value?z():ae()},ae=async()=>{p.value=!0},z=()=>{p.value=!1},Y=o=>{y.value=o.value,z()},ne=()=>{const o=localStorage.getItem("authToken"),t=localStorage.getItem("userData");if(!o||!t){E.value=!0;return}A.value=!0},pe=()=>{E.value=!1},fe=()=>{sessionStorage.setItem("redirectAfterLogin","addVehicle"),window.location.href="/login"},re=()=>{A.value=!1},he=o=>{const t=o.registrationNumber.toUpperCase().replace(/\s/g,"");if(!/^[A-Z]{2}[0-9]{2}[A-Z]{3}$|^[A-Z][0-9]{1,3}[A-Z]{3}$|^[A-Z]{3}[0-9]{1,3}[A-Z]{2}$/.test(t))return x.value="Please enter a valid UK registration number (e.g., SV62TYA)",!0;T.value=t,re()},we=()=>{s.value=!0,v.value=-1,!h.value&&!a.value&&be(),u.value&&C.value.length===0&&_e()},ye=()=>{if(v.value=-1,S.value.trim()===""){_.value=[];return}clearTimeout(le),le=setTimeout(()=>{xe(S.value)},300)},xe=o=>{if(!R){console.error("Autocomplete service not available");return}B.value=!0;const t={input:o,types:["geocode","establishment"]};R.getPlacePredictions(t,(l,r)=>{B.value=!1,r===window.google.maps.places.PlacesServiceStatus.OK&&l?_.value=l.map(g=>({place_id:g.place_id,name:g.structured_formatting.main_text,display_name:g.description,terms:g.terms})):_.value=[]})},be=()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser.");return}a.value=!0,navigator.geolocation.getCurrentPosition(async o=>{try{const{latitude:t,longitude:l}=o.coords;if(u.value={latitude:t,longitude:l},N){const r={location:new window.google.maps.LatLng(t,l),radius:50};N.nearbySearch(r,(g,V)=>{V===window.google.maps.places.PlacesServiceStatus.OK&&g&&g.length>0?h.value={display_name:g[0].vicinity||"Current Location",lat:t,lon:l,place_id:g[0].place_id}:h.value={display_name:"Current Location",lat:t,lon:l},a.value=!1})}else h.value={display_name:"Current Location",lat:t,lon:l},a.value=!1}catch(t){console.error("Error getting current location:",t),a.value=!1}},o=>{console.error("Error getting current location:",o),a.value=!1})},_e=()=>{if(!u.value||!N)return;const o={location:new window.google.maps.LatLng(u.value.latitude,u.value.longitude),radius:5e3,type:["point_of_interest","establishment"]};N.nearbySearch(o,(t,l)=>{l===window.google.maps.places.PlacesServiceStatus.OK&&t&&(C.value=t.slice(0,5).map(r=>({place_id:r.place_id,name:r.name,display_name:r.vicinity||r.name,lat:r.geometry.location.lat(),lon:r.geometry.location.lng()})))})},Ce=()=>{if(!s.value)return;const o=(h.value?1:0)+C.value.length+_.value.length;v.value<o-1?v.value++:v.value=0,oe(()=>{const t=document.querySelector(".location-dropdown .bg-red-50");t&&t.scrollIntoView({block:"nearest"})})},ke=()=>{if(!s.value)return;const o=(h.value?1:0)+C.value.length+_.value.length;v.value>0?v.value--:v.value=o-1,oe(()=>{const t=document.querySelector(".location-dropdown .bg-red-50");t&&t.scrollIntoView({block:"nearest"})})},Se=()=>{if(v.value===-1)return;let o=null;if(h.value&&v.value===0)o=h.value;else{const t=h.value?1:0;if(v.value<t+C.value.length)o=C.value[v.value-t];else{const l=t+C.value.length;o=_.value[v.value-l]}}o&&Z(o)},Le=me(),$e=()=>{const o={};y.value&&(o.category_id=y.value),L.value?(o.location=L.value.display_name,o.lat=L.value.lat,o.lng=L.value.lon):S.value&&(o.location=S.value),Le.push({name:"GarageList",query:o})},Z=async o=>{if(L.value=o,S.value=o.display_name,s.value=!1,v.value=-1,localStorage.setItem("selectedLocation",JSON.stringify(o)),o.place_id&&!o.lat){if(!N){console.error("Places service not available");return}const t={placeId:o.place_id,fields:["geometry","formatted_address","name"]};N.getDetails(t,(l,r)=>{if(r===window.google.maps.places.PlacesServiceStatus.OK&&l&&l.geometry){const g={...o,lat:l.geometry.location.lat(),lon:l.geometry.location.lng(),display_name:l.formatted_address||l.name};ce(g.lat,g.lon)}})}else ce(o.lat,o.lon)},ie=()=>{s.value=!1,v.value=-1},ce=async(o,t)=>{var l;try{const r=localStorage.getItem("authToken");r&&ee(r);const g={latitude:o,longitude:t,radius:30,min_price:0,max_price:999999},V=await te.post("/getHomeData",g);V.data&&V.data.success?Te("location-updated",{latitude:o,longitude:t,data:V.data.data}):console.error("Failed to fetch home data:",((l=V.data)==null?void 0:l.message)||"Unknown error")}catch(r){console.error("Error fetching home data:",r)}};function K(){if(!window.google||!window.google.maps||!window.google.maps.places){console.error("Google Maps Places API not loaded");return}R=new window.google.maps.places.AutocompleteService,N=new window.google.maps.places.PlacesService(document.createElement("div"))}function Ie(){if(window.google&&window.google.maps&&window.google.maps.places){K();return}if(window.google&&window.google.maps){setTimeout(()=>{window.google.maps.places?K():console.error("Google Maps Places library failed to load")},500);return}const o=document.querySelector('script[src*="maps.googleapis.com"]');if(o){o.addEventListener("load",()=>{setTimeout(K,100)});return}const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgnny_BI3s86wp8bZIznJU1qkL1o7leDo&libraries=places",t.async=!0,t.defer=!0,t.onload=()=>{setTimeout(K,100)},t.onerror=()=>{console.error("Failed to load Google Maps API script")},document.head.appendChild(t)}const de=o=>{if(p.value&&M.value&&!M.value.contains(o.target)){const t=document.querySelector('[aria-haspopup="listbox"]');t&&!t.contains(o.target)&&z()}s.value&&q.value&&!q.value.contains(o.target)&&ie()},Me=o=>{var r;const t=Math.min(o+1,W.value.length-1),l=(r=M.value)==null?void 0:r.children[t];l==null||l.focus()},Ae=o=>{var r;const t=Math.max(o-1,0),l=(r=M.value)==null?void 0:r.children[t];l==null||l.focus()},Pe=async()=>{var o;try{w.value=!0,f.value=!1;const t=localStorage.getItem("authToken");t&&ee(t);const l=await te.get("/categories");l.data&&l.data.success?d.value=l.data.data:(f.value=!0,console.error("Failed to fetch categories:",((o=l.data)==null?void 0:o.message)||"Unknown error"))}catch(t){f.value=!0,console.error("Error fetching categories:",t)}finally{w.value=!1}},Te=P;return se(async()=>{T.value=await je();const o=localStorage.getItem("selectedLocation");if(console.log(o,"savedLocation"),o)try{const t=JSON.parse(o);L.value=t,S.value=t.display_name,console.log(t,"parsedLocation"),setTimeout(()=>{Z(t)},500)}catch(t){console.error("Error parsing saved location:",t)}Pe(),document.addEventListener("click",de),Ie()}),Ge(()=>{document.removeEventListener("click",de)}),(o,t)=>(n(),i("section",Re,[e("div",We,[e("h1",{class:"text-5xl md:text-6xl font-bold mb-4 leading-tight",innerHTML:m.title},null,8,Je),e("p",Ye,$(m.subtitle),1),e("div",Qe,[e("div",Xe,[e("div",et,[e("div",tt,[e("div",ot,[I(Ee,{plateNumber:T.value,onClick:ne},null,8,["plateNumber"])]),e("div",st,[e("div",lt,[e("button",{onClick:J,onKeydown:[k(J,["enter"]),k(j(J,["prevent"]),["space"]),k(z,["escape"]),k(j(ae,["prevent"]),["arrow-down"])],class:G(["w-full text-start py-2 px-0 bg-transparent focus:outline-none focus:ring-opacity-50 px-2 flex items-center justify-between",{"text-gray-500":!y.value,"text-gray-700":y.value}]),"aria-haspopup":"listbox","aria-expanded":p.value},[e("span",nt,$(ve.value||"Select Service"),1),(n(),i("svg",{class:G(["w-5 h-5 text-gray-400 transition-transform duration-200",{"rotate-180":p.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],42,at),p.value?(n(),i("div",{key:0,ref_key:"dropdown",ref:M,class:"absolute text-start top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg py-1 max-h-80 overflow-y-auto z-50 mt-1",role:"listbox",style:{top:"138%"}},[(n(!0),i(F,null,H(W.value,(l,r)=>(n(),i("div",{key:l.value,onClick:g=>Y(l),onKeydown:[k(g=>Y(l),["enter"]),k(j(g=>Y(l),["prevent"]),["space"]),k(z,["escape"]),k(j(g=>Me(r),["prevent"]),["arrow-down"]),k(j(g=>Ae(r),["prevent"]),["arrow-up"])],class:G(["px-4 py-3 cursor-pointer hover:bg-red-50 hover:text-red-700 transition-colors duration-150 border-b border-gray-100 last:border-b-0",{"bg-red-50 text-red-700":y.value===l.value,"text-gray-700":y.value!==l.value}]),tabindex:"0",role:"option","aria-selected":y.value===l.value},$(l.label),43,rt))),128)),w.value?(n(),i("div",it," Loading services... ")):b("",!0),f.value?(n(),i("div",ct," Error loading services ")):b("",!0)],512)):b("",!0)])])])]),e("div",dt,[e("div",ut,[e("div",gt,[t[10]||(t[10]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1)),Be(e("input",{ref_key:"locationInput",ref:q,"onUpdate:modelValue":t[0]||(t[0]=l=>S.value=l),type:"text",placeholder:"Postcode/Location",class:"block w-full pl-10 pr-3 py-2 border border-transparent rounded-md text-gray-700 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 focus:border-transparent",onFocus:we,onInput:ye,onKeydown:[k(j(Ce,["prevent"]),["down"]),k(j(ke,["prevent"]),["up"]),k(j(Se,["prevent"]),["enter"]),k(ie,["escape"])]},null,40,mt),[[Ne,S.value]]),B.value?(n(),i("div",vt,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-red-500"},null,-1)])])):b("",!0),s.value?(n(),i("div",pt,[h.value?(n(),i("div",{key:0,onClick:t[1]||(t[1]=l=>Z(h.value)),class:G(["flex items-center p-4 cursor-pointer hover:bg-red-50 transition-colors duration-150 border-b border-gray-100",{"bg-red-50":v.value===0}])},[t[5]||(t[5]=e("div",{class:"flex-shrink-0 mr-3"},[e("div",{class:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center"},[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.64639 11.9855V17.0858L9.36317 18.1609C9.39894 18.214 9.4472 18.2575 9.50372 18.2876C9.56024 18.3177 9.62328 18.3334 9.6873 18.3334C9.75132 18.3334 9.81435 18.3177 9.87087 18.2876C9.92739 18.2575 9.97565 18.214 10.0114 18.1609L10.73 17.0858V11.9855C10.0418 12.1183 9.33459 12.1183 8.64639 11.9855ZM9.68822 1.66675C8.76098 1.66675 7.85456 1.94171 7.08359 2.45686C6.31261 2.972 5.71171 3.7042 5.35687 4.56086C5.00203 5.41752 4.90919 6.36017 5.09008 7.26959C5.27098 8.17902 5.71749 9.01438 6.37315 9.67004C7.02881 10.3257 7.86417 10.7722 8.7736 10.9531C9.68302 11.134 10.6257 11.0412 11.4823 10.6863C12.339 10.3315 13.0712 9.73058 13.5863 8.9596C14.1015 8.18863 14.3764 7.28221 14.3764 6.35497C14.3764 5.11157 13.8825 3.91911 13.0033 3.0399C12.1241 2.16068 10.9316 1.66675 9.68822 1.66675ZM9.68822 4.1412C9.10128 4.14181 8.53856 4.37525 8.12353 4.79028C7.7085 5.2053 7.47507 5.76803 7.47446 6.35497C7.47097 6.45623 7.42829 6.55217 7.35543 6.62257C7.28256 6.69297 7.1852 6.73232 7.08389 6.73232C6.98257 6.73232 6.88521 6.69297 6.81235 6.62257C6.73948 6.55217 6.6968 6.45623 6.69332 6.35497C6.69418 5.56081 7.01003 4.79942 7.57159 4.23787C8.13314 3.67632 8.89453 3.36046 9.68868 3.3596C9.79233 3.3596 9.89173 3.40077 9.96502 3.47406C10.0383 3.54735 10.0795 3.64675 10.0795 3.7504C10.0795 3.85405 10.0383 3.95345 9.96502 4.02674C9.89173 4.10003 9.79233 4.1412 9.68868 4.1412H9.68822Z",fill:"#182224","fill-opacity":"0.75"})])])],-1)),e("div",ft,[t[4]||(t[4]=e("div",{class:"font-medium text-gray-900"},"Use Current Location",-1)),e("div",ht,$(h.value.display_name),1)])],2)):b("",!0),C.value.length>0?(n(),i("div",wt,[t[7]||(t[7]=e("div",{class:"px-4 py-2 bg-gray-50 text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nearby Locations ",-1)),(n(!0),i(F,null,H(C.value,(l,r)=>(n(),i("div",{key:"nearby-"+r,onClick:g=>Z(l),class:G(["flex items-center p-4 cursor-pointer hover:bg-red-50 transition-colors duration-150 border-b border-gray-100",{"bg-red-50":v.value===r+(h.value?1:0)}])},[t[6]||(t[6]=e("div",{class:"flex-shrink-0 mr-3"},[e("div",{class:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.64639 11.9855V17.0858L9.36317 18.1609C9.39894 18.214 9.4472 18.2575 9.50372 18.2876C9.56024 18.3177 9.62328 18.3334 9.6873 18.3334C9.75132 18.3334 9.81435 18.3177 9.87087 18.2876C9.92739 18.2575 9.97565 18.214 10.0114 18.1609L10.73 17.0858V11.9855C10.0418 12.1183 9.33459 12.1183 8.64639 11.9855ZM9.68822 1.66675C8.76098 1.66675 7.85456 1.94171 7.08359 2.45686C6.31261 2.972 5.71171 3.7042 5.35687 4.56086C5.00203 5.41752 4.90919 6.36017 5.09008 7.26959C5.27098 8.17902 5.71749 9.01438 6.37315 9.67004C7.02881 10.3257 7.86417 10.7722 8.7736 10.9531C9.68302 11.134 10.6257 11.0412 11.4823 10.6863C12.339 10.3315 13.0712 9.73058 13.5863 8.9596C14.1015 8.18863 14.3764 7.28221 14.3764 6.35497C14.3764 5.11157 13.8825 3.91911 13.0033 3.0399C12.1241 2.16068 10.9316 1.66675 9.68822 1.66675ZM9.68822 4.1412C9.10128 4.14181 8.53856 4.37525 8.12353 4.79028C7.7085 5.2053 7.47507 5.76803 7.47446 6.35497C7.47097 6.45623 7.42829 6.55217 7.35543 6.62257C7.28256 6.69297 7.1852 6.73232 7.08389 6.73232C6.98257 6.73232 6.88521 6.69297 6.81235 6.62257C6.73948 6.55217 6.6968 6.45623 6.69332 6.35497C6.69418 5.56081 7.01003 4.79942 7.57159 4.23787C8.13314 3.67632 8.89453 3.36046 9.68868 3.3596C9.79233 3.3596 9.89173 3.40077 9.96502 3.47406C10.0383 3.54735 10.0795 3.64675 10.0795 3.7504C10.0795 3.85405 10.0383 3.95345 9.96502 4.02674C9.89173 4.10003 9.79233 4.1412 9.68868 4.1412H9.68822Z",fill:"#182224","fill-opacity":"0.75"})])])],-1)),e("div",null,[e("div",xt,$(l.name),1),e("div",bt,$(l.display_name),1)])],10,yt))),128))])):b("",!0),_.value.length>0?(n(),i("div",_t,[t[9]||(t[9]=e("div",{class:"px-4 py-2 bg-gray-50 text-xs font-medium text-gray-500 uppercase tracking-wider"}," Search Results ",-1)),(n(!0),i(F,null,H(_.value,(l,r)=>(n(),i("div",{key:"search-"+r,onClick:g=>Z(l),class:G(["flex items-center p-4 cursor-pointer hover:bg-red-50 transition-colors duration-150 border-b border-gray-100",{"bg-red-50":v.value===r+(h.value?1:0)+C.value.length}])},[t[8]||(t[8]=e("div",{class:"flex-shrink-0 mr-3"},[e("div",{class:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center"},[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.64639 11.9855V17.0858L9.36317 18.1609C9.39894 18.214 9.4472 18.2575 9.50372 18.2876C9.56024 18.3177 9.62328 18.3334 9.6873 18.3334C9.75132 18.3334 9.81435 18.3177 9.87087 18.2876C9.92739 18.2575 9.97565 18.214 10.0114 18.1609L10.73 17.0858V11.9855C10.0418 12.1183 9.33459 12.1183 8.64639 11.9855ZM9.68822 1.66675C8.76098 1.66675 7.85456 1.94171 7.08359 2.45686C6.31261 2.972 5.71171 3.7042 5.35687 4.56086C5.00203 5.41752 4.90919 6.36017 5.09008 7.26959C5.27098 8.17902 5.71749 9.01438 6.37315 9.67004C7.02881 10.3257 7.86417 10.7722 8.7736 10.9531C9.68302 11.134 10.6257 11.0412 11.4823 10.6863C12.339 10.3315 13.0712 9.73058 13.5863 8.9596C14.1015 8.18863 14.3764 7.28221 14.3764 6.35497C14.3764 5.11157 13.8825 3.91911 13.0033 3.0399C12.1241 2.16068 10.9316 1.66675 9.68822 1.66675ZM9.68822 4.1412C9.10128 4.14181 8.53856 4.37525 8.12353 4.79028C7.7085 5.2053 7.47507 5.76803 7.47446 6.35497C7.47097 6.45623 7.42829 6.55217 7.35543 6.62257C7.28256 6.69297 7.1852 6.73232 7.08389 6.73232C6.98257 6.73232 6.88521 6.69297 6.81235 6.62257C6.73948 6.55217 6.6968 6.45623 6.69332 6.35497C6.69418 5.56081 7.01003 4.79942 7.57159 4.23787C8.13314 3.67632 8.89453 3.36046 9.68868 3.3596C9.79233 3.3596 9.89173 3.40077 9.96502 3.47406C10.0383 3.54735 10.0795 3.64675 10.0795 3.7504C10.0795 3.85405 10.0383 3.95345 9.96502 4.02674C9.89173 4.10003 9.79233 4.1412 9.68868 4.1412H9.68822Z",fill:"#182224","fill-opacity":"0.75"})])])],-1)),e("div",null,[e("div",kt,$(l.name),1),e("div",St,$(l.display_name),1)])],10,Ct))),128))])):b("",!0),S.value&&!B.value&&_.value.length===0&&C.value.length===0?(n(),i("div",Lt," No locations found. Try a different search term. ")):b("",!0)])):b("",!0)])])]),e("div",{class:"w-full md:w-auto p-3"},[e("button",{onClick:$e,class:"w-full h-full bg-theme hover:bg-red-700 text-white font-semibold py-3 px-6 transition duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 rounded-lg flex items-center justify-center gap-2"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),ue(" Search ",-1)])])])])]),e("p",$t,[t[12]||(t[12]=ue(" Don't know your vehicle registration? ",-1)),e("a",{href:"#",onClick:j(ne,["prevent"]),class:"text-red-300 hover:text-white underline transition-colors duration-300"},"click here")])]),I(qe,{"is-visible":A.value,"error-message":x.value,onClose:re,onSubmit:he},null,8,["is-visible","error-message"]),I(Ue,{show:E.value,onClose:pe,onLogin:fe},null,8,["show"])]))}},Mt=U(It,[["__scopeId","data-v-7339763e"]]),At={class:"relative rounded-xl overflow-hidden border border-pink-200 bg-gradient-to-b from-white to-pink-50",style:{"padding-top":"4rem","padding-bottom":"calc(4rem + 20px)"}},Pt={__name:"InviteSection",setup(m){return(P,d)=>(n(),i("section",At,[...d[0]||(d[0]=[Ve('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex flex-col md:flex-row items-center justify-between"><div class="md:w-1/2 text-left py-8"><h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight mb-4"> Invite your friends &amp; colleagues. </h2><p class="text-gray-600 mb-6 max-w-xl"> It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. </p><button class="bg-theme text-white px-6 py-3 rounded-md hover:bg-red-600 font-semibold"> Invite friends </button></div><div class="md:w-1/2 flex justify-end py-8"><img src="/assets/images/bg/invite-bg.png" alt="Invite illustration" class="max-w-[520px] w-full h-auto"></div></div></div><div class="absolute left-0 right-0 bottom-0 h-5 bg-theme"></div>',2)])]))}},Tt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},jt={class:"flex justify-between items-center mb-8"},Gt={class:"text-3xl font-bold text-gray-900"},Bt={key:0,class:"flex space-x-2"},Nt=["disabled"],Vt=["disabled"],Dt={key:0,class:"text-center py-12"},Et={class:"text-xl font-medium text-gray-900 mb-2"},qt={key:1,class:"relative"},zt={__name:"GarageSection",props:{title:{type:String,required:!0},garages:{type:Array,required:!0},backgroundColor:{type:String,default:"bg-gray-50"}},setup(m){const P=m;console.log(P.garages,P.title);const d=c(null),w=c(!1),f=c(!1),y=()=>{if(!d.value)return;const{scrollLeft:T,scrollWidth:x,clientWidth:A}=d.value;w.value=T>0,f.value=T<x-A-10},p=()=>{d.value&&d.value.scrollBy({left:-320,behavior:"smooth"})},M=()=>{d.value&&d.value.scrollBy({left:320,behavior:"smooth"})};return se(async()=>{await oe(),y()}),(T,x)=>(n(),i("section",{class:G(["py-16",m.backgroundColor])},[e("div",Tt,[e("div",jt,[e("h2",Gt,$(m.title),1),m.garages&&m.garages.length>0?(n(),i("div",Bt,[e("button",{onClick:p,class:G(["p-2 rounded-full bg-white shadow hover:shadow-md transition-shadow",{"opacity-50 cursor-not-allowed":!w.value}]),disabled:!w.value},[...x[0]||(x[0]=[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],10,Nt),e("button",{onClick:M,class:G(["p-2 rounded-full bg-white shadow hover:shadow-md transition-shadow",{"opacity-50 cursor-not-allowed":!f.value}]),disabled:!f.value},[...x[1]||(x[1]=[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,Vt)])):b("",!0)]),m.garages&&m.garages.length===0?(n(),i("div",Dt,[x[2]||(x[2]=e("div",{class:"mb-4"},[e("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("h3",Et,"No "+$(m.title)+" providers found",1),x[3]||(x[3]=e("p",{class:"text-gray-600"},"Check back later to see the most popular garages in your area.",-1))])):b("",!0),m.garages&&m.garages.length>0?(n(),i("div",qt,[e("div",{ref_key:"scrollContainer",ref:d,class:"flex space-x-6 overflow-x-auto scrollbar-hide pb-4",onScroll:y},[(n(!0),i(F,null,H(m.garages,A=>(n(),i("div",{key:A.id,class:"flex-none w-80"},[I(ze,{garage:A},null,8,["garage"])]))),128))],544)])):b("",!0)])],2))}},X=U(zt,[["__scopeId","data-v-eda6427e"]]),Zt={class:"pt-16 bg-white"},Ft={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ht={key:0,class:"flex justify-center py-8"},Kt={key:1,class:"text-center py-8 text-red-500"},Ot={key:2,class:"relative"},Ut=["onClick"],Rt={class:"bg-white rounded-xl flex flex-col items-center justify-center text-center transition-all duration-300 hover:border-red-500 h-24 sm:h-32 md:h-40 border-gray-200"},Wt={class:"mb-1 sm:mb-3"},Jt=["src","alt"],Yt={class:"text-xs sm:text-sm font-medium text-gray-900 group-hover:text-red-500 transition-colors line-clamp-2"},Qt={class:"max-w-7xl mx-auto bg-white px-4 sm:px-6 lg:px-8 py-16"},Xt={__name:"Home",setup(m){const P=me(),d=c(null),w=c(!0),f=c(!1),y=u=>{const s=u.toLowerCase();return s.includes("mobile bodywork")||s.includes("dents")||s.includes("smart")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884030.png":s.includes("mechanics")||s.includes("services")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884031.png":s.includes("tyre")||s.includes("wheel")||s.includes("tracking")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884032.png":s.includes("alloy")||s.includes("refurbishment")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884033.png":s.includes("wrap")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884034.png":s.includes("window")||s.includes("tinting")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884035.png":s.includes("upholstery")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884036.png":s.includes("detailing")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884030-1.png":s.includes("mobile detailing")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884031-1.png":s.includes("breakdown")||s.includes("recovery")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884032-1.png":s.includes("glass")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884033-1.png":s.includes("heating")||s.includes("cooling")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884034-1.png":s.includes("safety")||s.includes("security")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884035-1.png":s.includes("locking")||s.includes("keys")?"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884036-1.png":"https://donderstorm.com/wp-content/uploads/2025/04/Group-1597884030-1.png"},p=c(null),M=u=>{if(!p.value)return;const s=300;u==="left"?p.value.scrollBy({left:-s,behavior:"smooth"}):p.value.scrollBy({left:s,behavior:"smooth"})},T=u=>{P.push({path:"/garages",query:{category_id:u.id}})},x=async u=>{try{w.value=!0,f.value=!1,d.value=u.data}catch(s){f.value=!0,console.error("Error updating home data with location:",s)}finally{w.value=!1}},A=D(()=>{var u;return((u=d.value)==null?void 0:u.categories)||[]}),E=D(()=>{var s;return(((s=d.value)==null?void 0:s.nearby_providers)||[]).map(a=>({id:a.id,name:a.business_name,rating:a.rating||"0.0",reviews:a.rating_count||0,location:`${a.city}, ${a.state}, ${a.country}`,image:a.business_img||"https://via.placeholder.com/300x200",serviceAvailability:a.description||"Services Available",portfolio_imgs:a.portfolio_imgs||[]}))}),q=D(()=>{var s;return(((s=d.value)==null?void 0:s.top_rated_providers)||[]).map(a=>({id:a.id,name:a.business_name,rating:a.rating||"0.0",reviews:a.rating_count||0,location:`${a.city}, ${a.state}, ${a.country}`,image:a.business_img||"https://via.placeholder.com/300x200",serviceAvailability:a.description||"Services Available",portfolio_imgs:a.portfolio_imgs||[]}))}),S=D(()=>{var s;return(((s=d.value)==null?void 0:s.new_providers)||[]).map(a=>({id:a.id,name:a.business_name,rating:a.rating||"0.0",reviews:a.rating_count||0,location:`${a.city}, ${a.state}, ${a.country}`,image:a.business_img||"https://via.placeholder.com/300x200",serviceAvailability:a.description||"Services Available",portfolio_imgs:a.portfolio_imgs||[]}))});return se(async()=>{var u;try{w.value=!0,f.value=!1;const s=localStorage.getItem("authToken");s&&ee(s);let a=51.5074,B=-.1278;if(navigator.geolocation)try{const _=await new Promise((C,v)=>{navigator.geolocation.getCurrentPosition(C,v)});a=_.coords.latitude,B=_.coords.longitude}catch(_){console.error("Error getting location:",_)}const h={latitude:a,longitude:B,radius:30,min_price:0,max_price:999999},L=await te.post("/getHomeData",h);L.data&&L.data.success?d.value=L.data.data:(f.value=!0,console.error("Failed to fetch home data:",((u=L.data)==null?void 0:u.message)||"Unknown error"))}catch(s){f.value=!0,console.error("Error fetching home data:",s)}finally{w.value=!1}}),(u,s)=>(n(),ge(De,null,{default:O(()=>[I(Mt,{onLocationUpdated:x}),e("section",Zt,[e("div",Ft,[s[6]||(s[6]=e("div",{class:"text-center mb-12"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-4"},"Wide Range of Categories"),e("p",{class:"text-gray-600"},"From oil changes to major repairs, browse 100+ services. Quality and reliable service at your fingertips.")],-1)),w.value?(n(),i("div",Ht,[...s[2]||(s[2]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-red-500"},null,-1)])])):f.value?(n(),i("div",Kt,[...s[3]||(s[3]=[e("p",null,"Failed to load data. Please try again later.",-1)])])):(n(),i("div",Ot,[e("button",{onClick:s[0]||(s[0]=a=>M("left")),class:"hidden md:block absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 focus:outline-none","aria-label":"Scroll categories left"},[...s[4]||(s[4]=[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:s[1]||(s[1]=a=>M("right")),class:"hidden md:block absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 focus:outline-none","aria-label":"Scroll categories right"},[...s[5]||(s[5]=[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),e("div",{ref_key:"categoriesContainer",ref:p,class:"categories-container flex overflow-x-auto scrollbar-hide py-4"},[(n(!0),i(F,null,H(A.value,a=>(n(),i("div",{key:a.id,class:"category-box flex-shrink-0 w-24 sm:w-32 md:w-40 mx-1 sm:mx-2 group cursor-pointer",onClick:B=>T(a)},[e("div",Rt,[e("div",Wt,[e("img",{src:y(a.name),alt:a.name,class:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 object-contain"},null,8,Jt)]),e("h3",Yt,$(a.name),1)])],8,Ut))),128))],512)]))])]),I(X,{title:"Popular Nearby",garages:E.value,"background-color":"bg-white"},null,8,["garages"]),I(X,{title:"Trending",garages:q.value,"background-color":"bg-white"},null,8,["garages"]),e("div",Qt,[I(Pt)]),I(X,{title:"New to Donderstorm",garages:S.value,"background-color":"bg-white"},null,8,["garages"])]),_:1}))}},no=U(Xt,[["__scopeId","data-v-3ca39f5a"]]);export{no as default};
